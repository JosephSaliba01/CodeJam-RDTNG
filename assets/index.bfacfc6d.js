(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function In(){}function Pp(n){return n()}function zh(){return Object.create(null)}function ti(n){n.forEach(Pp)}function $i(n){return typeof n=="function"}function ni(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function sm(n){return Object.keys(n).length===0}function om(n,...e){if(n==null)return In;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function ur(n,e,t){n.$$.on_destroy.push(om(e,t))}function lr(n){return n==null?"":n}function xa(n,e,t){return n.set(t),e}function Ie(n,e){n.appendChild(e)}function pt(n,e,t){n.insertBefore(e,t||null)}function ht(n){n.parentNode&&n.parentNode.removeChild(n)}function bc(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function He(n){return document.createElement(n)}function on(n){return document.createTextNode(n)}function St(){return on(" ")}function zo(){return on("")}function Ut(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function Be(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function am(n){return Array.from(n.childNodes)}function hr(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function Vh(n,e){n.value=e==null?"":e}function ku(n,e,t,r){t===null?n.style.removeProperty(e):n.style.setProperty(e,t,r?"important":"")}function ec(n,e,t){n.classList[t?"add":"remove"](e)}let Fa;function Ma(n){Fa=n}function Op(){if(!Fa)throw new Error("Function called outside component initialization");return Fa}function lm(n){Op().$$.on_mount.push(n)}function jf(n){Op().$$.on_destroy.push(n)}const Aa=[],sf=[],Vl=[],Hh=[],cm=Promise.resolve();let of=!1;function um(){of||(of=!0,cm.then(Ip))}function af(n){Vl.push(n)}const Au=new Set;let Tl=0;function Ip(){const n=Fa;do{for(;Tl<Aa.length;){const e=Aa[Tl];Tl++,Ma(e),fm(e.$$)}for(Ma(null),Aa.length=0,Tl=0;sf.length;)sf.pop()();for(let e=0;e<Vl.length;e+=1){const t=Vl[e];Au.has(t)||(Au.add(t),t())}Vl.length=0}while(Aa.length);for(;Hh.length;)Hh.pop()();of=!1,Au.clear(),Ma(n)}function fm(n){if(n.fragment!==null){n.update(),ti(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(af)}}const Hl=new Set;let Ns;function Vo(){Ns={r:0,c:[],p:Ns}}function Ho(){Ns.r||ti(Ns.c),Ns=Ns.p}function It(n,e){n&&n.i&&(Hl.delete(n),n.i(e))}function en(n,e,t,r){if(n&&n.o){if(Hl.has(n))return;Hl.add(n),Ns.c.push(()=>{Hl.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}function Qi(n){n&&n.c()}function bi(n,e,t,r){const{fragment:i,after_update:s}=n.$$;i&&i.m(e,t),r||af(()=>{const o=n.$$.on_mount.map(Pp).filter($i);n.$$.on_destroy?n.$$.on_destroy.push(...o):ti(o),n.$$.on_mount=[]}),s.forEach(af)}function vi(n,e){const t=n.$$;t.fragment!==null&&(ti(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function hm(n,e){n.$$.dirty[0]===-1&&(Aa.push(n),um(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Si(n,e,t,r,i,s,o,a=[-1]){const l=Fa;Ma(n);const u=n.$$={fragment:null,ctx:[],props:s,update:In,not_equal:i,bound:zh(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:zh(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(u.root);let f=!1;if(u.ctx=t?t(n,e.props||{},(m,y,...d)=>{const v=d.length?d[0]:y;return u.ctx&&i(u.ctx[m],u.ctx[m]=v)&&(!u.skip_bound&&u.bound[m]&&u.bound[m](v),f&&hm(n,m)),y}):[],u.update(),f=!0,ti(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const m=am(e.target);u.fragment&&u.fragment.l(m),m.forEach(ht)}else u.fragment&&u.fragment.c();e.intro&&It(n.$$.fragment),bi(n,e.target,e.anchor,e.customElement),Ip()}Ma(l)}class Ni{$destroy(){vi(this,1),this.$destroy=In}$on(e,t){if(!$i(t))return In;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!sm(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function mn(n){this.content=n}mn.prototype={constructor:mn,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),s=r.content.slice();return i==-1?s.push(t||n,e):(s[i+1]=e,t&&(s[i]=t)),new mn(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new mn(t)},addToStart:function(n,e){return new mn([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new mn(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),s=r.find(n);return i.splice(s==-1?i.length:s,0,e,t),new mn(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=mn.from(n),n.size?new mn(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=mn.from(n),n.size?new mn(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=mn.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};mn.from=function(n){if(n instanceof mn)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new mn(e)};function Tp(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Tp(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Ep(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let u=0,f=Math.min(o.text.length,a.text.length);for(;u<f&&o.text[o.text.length-u-1]==a.text[a.text.length-u-1];)u++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let u=Ep(o.content,a.content,t-1,r-1);if(u)return u}t-=l,r-=l}}class xe{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],u=a+l.nodeSize;if(u>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let f=a+1;l.nodesBetween(Math.max(0,e-f),Math.min(l.content.size,t-f),r,i+f)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new xe(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new xe(r,i)}cutByIndex(e,t){return e==t?xe.empty:e==0&&t==this.content.length?this:new xe(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new xe(i,s)}addToStart(e){return new xe([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new xe(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Tp(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Ep(this,e,t,r)}findIndex(e,t=-1){if(e==0)return El(0,e);if(e==this.size)return El(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?El(r+1,o):El(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return xe.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new xe(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return xe.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new xe(t||e,r)}static from(e){if(!e)return xe.empty;if(e instanceof xe)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new xe([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}xe.empty=new xe([],0);const Lu={index:0,offset:0};function El(n,e){return Lu.index=n,Lu.offset=e,Lu}function tc(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!tc(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!tc(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}class Nt{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&tc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Nt.none;if(e instanceof Nt)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}}Nt.none=[];class nc extends Error{}class Re{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Fp(this.content,e+this.openStart,t);return r&&new Re(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Re(Dp(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Re.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Re(xe.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Re(e,r,i)}}Re.empty=new Re(xe.empty,0,0);function Dp(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Dp(s.content,e-i-1,t-i-1)))}function Fp(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=Fp(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}function dm(n,e,t){if(t.openStart>n.depth)throw new nc("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new nc("Inconsistent open depths");return Rp(n,e,t,0)}function Rp(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let o=Rp(n,e,t,r+1);return s.copy(s.content.replaceChild(i,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let o=n.parent,a=o.content;return Cs(o,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=pm(t,n);return Cs(s,jp(n,o,a,e,r))}else return Cs(s,rc(n,e,r))}function Bp(n,e){if(!e.type.compatibleContent(n.type))throw new nc("Cannot join "+e.type.name+" onto "+n.type.name)}function lf(n,e,t){let r=n.node(t);return Bp(r,e.node(t)),r}function Ls(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Pa(n,e,t,r){let i=(e||n).node(t),s=0,o=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(Ls(n.nodeAfter,r),s++));for(let a=s;a<o;a++)Ls(i.child(a),r);e&&e.depth==t&&e.textOffset&&Ls(e.nodeBefore,r)}function Cs(n,e){return n.type.checkContent(e),n.copy(e)}function jp(n,e,t,r,i){let s=n.depth>i&&lf(n,e,i+1),o=r.depth>i&&lf(t,r,i+1),a=[];return Pa(null,n,i,a),s&&o&&e.index(i)==t.index(i)?(Bp(s,o),Ls(Cs(s,jp(n,e,t,r,i+1)),a)):(s&&Ls(Cs(s,rc(n,e,i+1)),a),Pa(e,t,i,a),o&&Ls(Cs(o,rc(t,r,i+1)),a)),Pa(r,null,i,a),new xe(a)}function rc(n,e,t){let r=[];if(Pa(null,n,t,r),n.depth>t){let i=lf(n,e,t+1);Ls(Cs(i,rc(n,e,t+1)),r)}return Pa(e,null,t,r),new xe(r)}function pm(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(xe.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class Ra{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Nt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new ic(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),u=s-l;if(r.push(o,a,i+l),!u||(o=o.child(a),o.isText))break;s=u-1,i+=l+1}return new Ra(t,r,s)}static resolveCached(e,t){for(let i=0;i<Cu.length;i++){let s=Cu[i];if(s.pos==t&&s.doc==e)return s}let r=Cu[_u]=Ra.resolve(e,t);return _u=(_u+1)%mm,r}}let Cu=[],_u=0,mm=12;class ic{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const gm=Object.create(null);class Qr{constructor(e,t,r,i=Nt.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||xe.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&tc(this.attrs,t||e.defaultAttrs||gm)&&Nt.sameSet(this.marks,r||Nt.none)}copy(e=null){return e==this.content?this:new Qr(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Qr(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return Re.empty;let i=this.resolve(e),s=this.resolve(t),o=r?0:i.sharedDepth(t),a=i.start(o),u=i.node(o).content.cut(i.pos-a,s.pos-a);return new Re(u,i.depth-o,s.depth-o)}replace(e,t,r){return dm(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return Ra.resolveCached(this,e)}resolveNoCache(e){return Ra.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),qp(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=xe.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=Nt.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!Nt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=xe.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,i,r)}}Qr.prototype.text=void 0;class sc extends Qr{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):qp(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new sc(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new sc(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function qp(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Os{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new ym(e,t);if(r.next==null)return Os.empty;let i=zp(r);r.next&&r.err("Unexpected trailing text");let s=km(Nm(i));return Am(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!t||l.validEnd))return xe.from(a.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:f,next:m}=o.next[u];if(!(f.isText||f.hasRequiredAttrs())&&i.indexOf(m)==-1){i.push(m);let y=s(m,a.concat(f));if(y)return y}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Os.empty=new Os(!0);class ym{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function zp(n){let e=[];do e.push(bm(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function bm(n){let e=[];do e.push(vm(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function vm(n){let e=Sm(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=wm(n,e);else break;return e}function Uh(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function wm(n,e){let t=Uh(n),r=t;return n.eat(",")&&(n.next!="}"?r=Uh(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function xm(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let o=t[s];o.groups.indexOf(e)>-1&&i.push(o)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function Sm(n){if(n.eat("(")){let e=zp(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=xm(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Nm(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(o,a,l){let u={term:l,to:a};return e[o].push(u),u}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,u)=>l.concat(s(u,a)),[]);if(o.type=="seq")for(let l=0;;l++){let u=s(o.exprs[l],a);if(l==o.exprs.length-1)return u;i(u,a=t())}else if(o.type=="star"){let l=t();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=t();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let u=0;u<o.min;u++){let f=t();i(s(o.expr,l),f),l=f}if(o.max==-1)i(s(o.expr,l),l);else for(let u=o.min;u<o.max;u++){let f=t();r(l,f),i(s(o.expr,l),f),l=f}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Vp(n,e){return e-n}function Wh(n,e){let t=[];return r(e),t.sort(Vp);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&t.indexOf(l)==-1&&r(l)}}}function km(n){let e=Object.create(null);return t(Wh(n,0));function t(r){let i=[];r.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let f=0;f<i.length;f++)i[f][0]==a&&(u=i[f][1]);Wh(n,l).forEach(f=>{u||i.push([a,u=[]]),u.indexOf(f)==-1&&u.push(f)})})});let s=e[r.join(",")]=new Os(r.indexOf(n.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(Vp);s.next.push({type:i[o][0],next:e[a.join(",")]||t(a)})}return s}}function Am(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:u}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(u)==-1&&r.push(u)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Hp(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function Up(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function Wp(n){let e=Object.create(null);if(n)for(let t in n)e[t]=new Lm(n[t]);return e}class oc{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Wp(r.attrs),this.defaultAttrs=Hp(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Os.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Up(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Qr(this,this.computeAttrs(e),xe.from(t),Nt.setFrom(r))}createChecked(e=null,t,r){return t=xe.from(t),this.checkContent(t),new Qr(this,this.computeAttrs(e),t,Nt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=xe.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(xe.empty,!0);return s?new Qr(this,e,t.append(s),Nt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Nt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,o)=>r[s]=new oc(s,t,o));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}class Lm{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class vc{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=Wp(i.attrs),this.excluded=null;let s=Hp(this.attrs);this.instance=s?new Nt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Nt(this,Up(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new vc(s,i++,t,o)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class Cm{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=mn.from(e.nodes),t.marks=mn.from(e.marks||{}),this.nodes=oc.compile(this.spec.nodes,this),this.marks=vc.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;s.contentMatch=r[o]||(r[o]=Os.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?$h(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:$h(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof oc){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new sc(r,r.defaultAttrs,e,Nt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Qr.fromJSON(this,e)}markFromJSON(e){return Nt.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function $h(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],o=s;if(s)t.push(s);else for(let a in n.marks){let l=n.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&t.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}class Do{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new Gh(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Gh(this,t,!0);return r.addAll(e,t.from,t.to),Re.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Pm(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Kh(o)),o.mark=i})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Kh(o)),o.node=i})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Do(e,Do.schemaRules(e)))}}const $p={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},_m={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Jp={ol:!0,ul:!0},ac=1,lc=2,Oa=4;function Jh(n,e,t){return e!=null?(e?ac:0)|(e==="full"?lc:0):n&&n.whitespace=="pre"?ac|lc:t&~Oa}class Dl{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=Nt.none,this.stashMarks=[],this.match=o||(a&Oa?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(xe.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ac)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=xe.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(xe.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):Im(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!$p.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Gh{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=Jh(null,t.preserveWhitespace,0)|(r?Oa:0);i?s=new Dl(i.type,i.attrs,Nt.none,Nt.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new Dl(null,null,Nt.none,Nt.none,!0,null,o):s=new Dl(e.schema.topNodeType,null,Nt.none,Nt.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(e.nodeType==3)this.addTextNode(e);else if(e.nodeType==1){let t=e.getAttribute("style"),r=t?this.readStyles(Om(t)):null,i=this.top;if(r!=null)for(let s=0;s<r.length;s++)this.addPendingMark(r[s]);if(this.addElement(e),r!=null)for(let s=0;s<r.length;s++)this.removePendingMark(r[s],i)}}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&lc||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&ac)r.options&lc?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;Jp.hasOwnProperty(r)&&this.parser.normalizeLists&&Mm(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:_m.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if($p.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}this.addAll(e),o&&this.sync(a),this.needsBlock=l}else this.addElementByRule(e,s,s.consuming===!1?i:void 0)}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=Nt.none;e:for(let r=0;r<e.length;r+=2)for(let i=void 0;;){let s=this.parser.matchStyle(e[r],e[r+1],this,i);if(!s)continue e;if(s.ignore)return null;if(t=this.parser.schema.marks[s.mark].create(s.attrs).addToSet(t),s.consuming===!1)i=s;else break}return t}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=Jh(e,i,s.options);s.options&Oa&&s.content.length==0&&(o|=Oa),this.nodes.push(new Dl(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let u=t[a];if(u==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let f=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!f||f.name!=u&&f.groups.indexOf(u)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=Tm(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}}function Mm(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Jp.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function Pm(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Om(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function Kh(n){let e={};for(let t in n)e[t]=n[t];return e}function Im(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:f}=a.edge(l);if(u==e||s.indexOf(f)<0&&o(f))return!0}};if(o(i.contentMatch))return!0}}function Tm(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}class Kr{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Mu(t).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let u=o.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(s[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let u=o.marks[l++],f=this.serializeMark(u,o.isInline,t);f&&(s.push([u,i]),i.appendChild(f.dom),i=f.contentDOM||f.dom)}}i.appendChild(this.serializeNodeInner(o,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Kr.renderSpec(Mu(t),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Kr.renderSpec(Mu(r),i(e,t))}static renderSpec(e,t,r=null){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,a=r?e.createElementNS(r,i):e.createElement(i),l=t[1],u=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){u=2;for(let f in l)if(l[f]!=null){let m=f.indexOf(" ");m>0?a.setAttributeNS(f.slice(0,m),f.slice(m+1),l[f]):a.setAttribute(f,l[f])}}for(let f=u;f<t.length;f++){let m=t[f];if(m===0){if(f<t.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:y,contentDOM:d}=Kr.renderSpec(e,m,r);if(a.appendChild(y),d){if(o)throw new RangeError("Multiple content holes");o=d}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Kr(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Yh(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Yh(e.marks)}}function Yh(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function Mu(n){return n.document||window.document}const Gp=65535,Kp=Math.pow(2,16);function Em(n,e){return n+e*Kp}function Xh(n){return n&Gp}function Dm(n){return(n-(n&Gp))/Kp}const Yp=1,Xp=2,Ul=4,Qp=8;class cf{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&Qp)>0}get deletedBefore(){return(this.delInfo&(Yp|Ul))>0}get deletedAfter(){return(this.delInfo&(Xp|Ul))>0}get deletedAcross(){return(this.delInfo&Ul)>0}}class cr{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&cr.empty)return cr.empty}recover(e){let t=0,r=Xh(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+Dm(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let u=this.ranges[a+s],f=this.ranges[a+o],m=l+u;if(e<=m){let y=u?e==l?-1:e==m?1:t:t,d=l+i+(y<0?0:f);if(r)return d;let v=e==(t<0?l:m)?null:Em(a/3,e-l),w=e==l?Xp:e==m?Yp:Ul;return(t<0?e!=l:e!=m)&&(w|=Qp),new cf(d,w,v)}i+=f-u}return r?e+i:new cf(e+i,0,null)}touches(e,t){let r=0,i=Xh(t),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let u=this.ranges[a+s],f=l+u;if(e<=f&&a==i*3)return!0;r+=this.ranges[a+o]-u}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),u=this.ranges[i+t],f=this.ranges[i+r];e(a,a+u,l,l+f),s+=f-u}}invert(){return new cr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?cr.empty:new cr(e<0?[0,-e,0]:[0,0,e])}}cr.empty=new cr([]);class Lo{constructor(e=[],t,r=0,i=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=i}slice(e=0,t=this.maps.length){return new Lo(this.maps,this.mirror,e,t)}copy(){return new Lo(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new Lo;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new cf(e,i,null)}}const Pu=Object.create(null);class $n{getMap(){return cr.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Pu[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Pu)throw new RangeError("Duplicate use of step JSON ID "+e);return Pu[e]=t,t.prototype.jsonID=e,t}}class sn{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new sn(e,null)}static fail(e){return new sn(null,e)}static fromReplace(e,t,r,i){try{return sn.ok(e.replace(t,r,i))}catch(s){if(s instanceof nc)return sn.fail(s.message);throw s}}}function qf(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(qf(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s)}return xe.fromArray(r)}class Gi extends $n{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Re(qf(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),t.openStart,t.openEnd);return sn.fromReplace(e,this.from,this.to,s)}invert(){return new Yr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Gi(t.pos,r.pos,this.mark)}merge(e){return e instanceof Gi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Gi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Gi(t.from,t.to,e.markFromJSON(t.mark))}}$n.jsonID("addMark",Gi);class Yr extends $n{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new Re(qf(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return sn.fromReplace(e,this.from,this.to,r)}invert(){return new Gi(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Yr(t.pos,r.pos,this.mark)}merge(e){return e instanceof Yr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Yr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Yr(t.from,t.to,e.markFromJSON(t.mark))}}$n.jsonID("removeMark",Yr);class Ki extends $n{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return sn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return sn.fromReplace(e,this.pos,this.pos+1,new Re(xe.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Ki(this.pos,t.marks[i]);return new Ki(this.pos,this.mark)}}return new Fo(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ki(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ki(t.pos,e.markFromJSON(t.mark))}}$n.jsonID("addNodeMark",Ki);class Fo extends $n{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return sn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return sn.fromReplace(e,this.pos,this.pos+1,new Re(xe.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Ki(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Fo(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Fo(t.pos,e.markFromJSON(t.mark))}}$n.jsonID("removeNodeMark",Fo);class Ln extends $n{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&uf(e,this.from,this.to)?sn.fail("Structure replace would overwrite content"):sn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new cr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ln(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Ln(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Ln)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?Re.empty:new Re(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ln(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?Re.empty:new Re(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ln(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ln(t.from,t.to,Re.fromJSON(e,t.slice),!!t.structure)}}$n.jsonID("replace",Ln);class fn extends $n{constructor(e,t,r,i,s,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(uf(e,this.from,this.gapFrom)||uf(e,this.gapTo,this.to)))return sn.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return sn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?sn.fromReplace(e,this.from,this.to,r):sn.fail("Content does not fit in gap")}getMap(){return new cr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new fn(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new fn(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new fn(t.from,t.to,t.gapFrom,t.gapTo,Re.fromJSON(e,t.slice),t.insert,!!t.structure)}}$n.jsonID("replaceAround",fn);function uf(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function Fm(n,e,t,r){let i=[],s=[],o,a;n.doc.nodesBetween(e,t,(l,u,f)=>{if(!l.isInline)return;let m=l.marks;if(!r.isInSet(m)&&f.type.allowsMarkType(r.type)){let y=Math.max(u,e),d=Math.min(u+l.nodeSize,t),v=r.addToSet(m);for(let w=0;w<m.length;w++)m[w].isInSet(v)||(o&&o.to==y&&o.mark.eq(m[w])?o.to=d:i.push(o=new Yr(y,d,m[w])));a&&a.to==y?a.to=d:s.push(a=new Gi(y,d,r))}}),i.forEach(l=>n.step(l)),s.forEach(l=>n.step(l))}function Rm(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof vc){let u=o.marks,f;for(;f=r.isInSet(u);)(l||(l=[])).push(f),u=f.removeFromSet(u)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let u=Math.min(a+o.nodeSize,t);for(let f=0;f<l.length;f++){let m=l[f],y;for(let d=0;d<i.length;d++){let v=i[d];v.step==s-1&&m.eq(i[d].style)&&(y=v)}y?(y.to=u,y.step=s):i.push({style:m,from:Math.max(a,e),to:u,step:s})}}}),i.forEach(o=>n.step(new Yr(o.from,o.to,o.style)))}function Bm(n,e,t,r=t.contentMatch){let i=n.doc.nodeAt(e),s=[],o=e+1;for(let a=0;a<i.childCount;a++){let l=i.child(a),u=o+l.nodeSize,f=r.matchType(l.type);if(!f)s.push(new Ln(o,u,Re.empty));else{r=f;for(let m=0;m<l.marks.length;m++)t.allowsMarkType(l.marks[m].type)||n.step(new Yr(o,u,l.marks[m]))}o=u}if(!r.validEnd){let a=r.fillBefore(xe.empty,!0);n.replace(o,o,new Re(a,0,0))}for(let a=s.length-1;a>=0;a--)n.step(s[a])}function jm(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Uo(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),s=n.$from.index(r),o=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(s,o,t))return r;if(r==0||i.type.spec.isolating||!jm(i,s,o))break}return null}function qm(n,e,t){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,u=a,f=xe.empty,m=0;for(let v=s,w=!1;v>t;v--)w||r.index(v)>0?(w=!0,f=xe.from(r.node(v).copy(f)),m++):l--;let y=xe.empty,d=0;for(let v=s,w=!1;v>t;v--)w||i.after(v+1)<i.end(v)?(w=!0,y=xe.from(i.node(v).copy(y)),d++):u++;n.step(new fn(l,u,o,a,new Re(f.append(y),m,d),f.size-m,!0))}function zf(n,e,t=null,r=n){let i=zm(n,e),s=i&&Vm(r,e);return s?i.map(Qh).concat({type:e,attrs:t}).concat(s.map(Qh)):null}function Qh(n){return{type:n,attrs:null}}function zm(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return t.canReplaceWith(r,i,o)?s:null}function Vm(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let u=r;l&&u<i;u++)l=l.matchType(t.child(u).type);return!l||!l.validEnd?null:o}function Hm(n,e,t){let r=xe.empty;for(let o=t.length-1;o>=0;o--){if(r.size){let a=t[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=xe.from(t[o].type.create(t[o].attrs,r))}let i=e.start,s=e.end;n.step(new fn(i,s,i,s,new Re(r,0,0),t.length,!0))}function Um(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(r,i)&&Wm(n.doc,n.mapping.slice(s).map(a),r)){n.clearIncompatible(n.mapping.slice(s).map(a,1),r);let l=n.mapping.slice(s),u=l.map(a,1),f=l.map(a+o.nodeSize,1);return n.step(new fn(u,f,u+1,f-1,new Re(xe.from(r.create(i,null,o.marks)),0,0),1,!0)),!1}})}function Wm(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function $m(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let o=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,o);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new fn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Re(xe.from(o),0,0),1,!0))}function Co(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,f=t-2;u>s;u--,f--){let m=i.node(u),y=i.index(u);if(m.type.spec.isolating)return!1;let d=m.content.cutByIndex(y,m.childCount),v=r&&r[f]||m;if(v!=m&&(d=d.replaceChild(0,v.type.create(v.attrs))),!m.canReplace(y+1,m.childCount)||!v.type.validContent(d))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function Jm(n,e,t=1,r){let i=n.doc.resolve(e),s=xe.empty,o=xe.empty;for(let a=i.depth,l=i.depth-t,u=t-1;a>l;a--,u--){s=xe.from(i.node(a).copy(s));let f=r&&r[u];o=xe.from(f?f.type.create(f.attrs,o):i.node(a).copy(o))}n.step(new Ln(e,e,new Re(s.append(o),t,t),!0))}function Wo(n,e){let t=n.resolve(e),r=t.index();return Gm(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function Gm(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}function Km(n,e,t){let r=new Ln(e-t,e+t,Re.empty,!0);n.step(r)}function Ym(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function Zp(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),u=r.node(o),f=!1;if(s==1)f=u.canReplace(l,l,i);else{let m=u.contentMatchAt(l).findWrapping(i.firstChild.type);f=m&&u.canReplaceWith(l,l,m[0])}if(f)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Vf(n,e,t=e,r=Re.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return e1(i,s,r)?new Ln(e,t,r):new Xm(i,s,r).fit()}function e1(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class Xm{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=xe.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=xe.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new Re(s,o,a);return e>-1?new fn(r.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||r.pos!=this.$to.pos?new Ln(r.pos,i.pos,l):null}findFittable(){for(let e=1;e<=2;e++)for(let t=this.unplaced.openStart;t>=0;t--){let r,i=null;t?(i=Ou(this.unplaced.content,t-1).firstChild,r=i.content):r=this.unplaced.content;let s=r.firstChild;for(let o=this.depth;o>=0;o--){let{type:a,match:l}=this.frontier[o],u,f=null;if(e==1&&(s?l.matchType(s.type)||(f=l.fillBefore(xe.from(s),!1)):i&&a.compatibleContent(i.type)))return{sliceDepth:t,frontierDepth:o,parent:i,inject:f};if(e==2&&s&&(u=l.findWrapping(s.type)))return{sliceDepth:t,frontierDepth:o,parent:i,wrap:u};if(i&&l.matchType(i.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Ou(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Re(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Ou(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new Re(La(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new Re(La(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let w=0;w<s.length;w++)this.openFrontierNode(s[w]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,u=0,f=[],{match:m,type:y}=this.frontier[t];if(i){for(let w=0;w<i.childCount;w++)f.push(i.child(w));m=m.matchFragment(i)}let d=a.size+e-(o.content.size-o.openEnd);for(;u<a.childCount;){let w=a.child(u),S=m.matchType(w.type);if(!S)break;u++,(u>1||l==0||w.content.size)&&(m=S,f.push(t1(w.mark(y.allowedMarks(w.marks)),u==1?l:0,u==a.childCount?d:-1)))}let v=u==a.childCount;v||(d=-1),this.placed=Ca(this.placed,t,xe.from(f)),this.frontier[t].match=m,v&&d<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,S=a;w<d;w++){let x=S.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),S=x.content}this.unplaced=v?e==0?Re.empty:new Re(La(o.content,e-1,1),e-1,d<0?o.openEnd:e-1):new Re(La(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Iu(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=Iu(e,t,i,r,s);if(!!o){for(let a=t-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],f=Iu(e,a,u,l,!0);if(!f||f.childCount)continue e}return{depth:t,fit:o,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Ca(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Ca(this.placed,this.depth,xe.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(xe.empty,!0);t.childCount&&(this.placed=Ca(this.placed,this.frontier.length,t))}}function La(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(La(n.firstChild.content,e-1,t)))}function Ca(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Ca(n.lastChild.content,e-1,t)))}function Ou(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function t1(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,t1(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(xe.empty,!0)))),n.copy(r)}function Iu(n,e,t,r,i){let s=n.node(e),o=i?n.indexAfter(e):n.index(e);if(o==s.childCount&&!t.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!Qm(t,s.content,o)?a:null}function Qm(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function Zm(n){return n.spec.defining||n.spec.definingForContent}function e2(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if(e1(i,s,r))return n.step(new Ln(e,t,r));let o=r1(i,n.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let y=i.depth,d=i.pos-1;y>0;y--,d--){let v=i.node(y).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;o.indexOf(y)>-1?a=y:i.before(y)==d&&o.splice(1,0,-y)}let l=o.indexOf(a),u=[],f=r.openStart;for(let y=r.content,d=0;;d++){let v=y.firstChild;if(u.push(v),d==r.openStart)break;y=v.content}for(let y=f-1;y>=0;y--){let d=u[y].type,v=Zm(d);if(v&&i.node(l).type!=d)f=y;else if(v||!d.isTextblock)break}for(let y=r.openStart;y>=0;y--){let d=(y+f+1)%(r.openStart+1),v=u[d];if(!!v)for(let w=0;w<o.length;w++){let S=o[(w+l)%o.length],x=!0;S<0&&(x=!1,S=-S);let _=i.node(S-1),B=i.index(S-1);if(_.canReplaceWith(B,B,v.type,v.marks))return n.replace(i.before(S),x?s.after(S):t,new Re(n1(r.content,0,r.openStart,d),d,r.openEnd))}}let m=n.steps.length;for(let y=o.length-1;y>=0&&(n.replace(e,t,r),!(n.steps.length>m));y--){let d=o[y];d<0||(e=i.before(d),t=s.after(d))}}function n1(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(n1(s.content,e+1,t,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(n).append(n);n=o.append(s.matchFragment(o).fillBefore(xe.empty,!0))}return n}function t2(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=Ym(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new Re(xe.from(r),0,0))}function n2(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=r1(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return n.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return n.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&t>r.end(o)&&i.end(o)-t!=i.depth-o)return n.delete(r.before(o),t);n.delete(e,t)}function r1(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}class _o extends $n{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return sn.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return sn.fromReplace(e,this.pos,this.pos+1,new Re(xe.from(i),0,t.isLeaf?0:1))}getMap(){return cr.empty}invert(e){return new _o(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new _o(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new _o(t.pos,t.attr,t.value)}}$n.jsonID("attr",_o);let Ro=class extends Error{};Ro=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Ro.prototype=Object.create(Error.prototype);Ro.prototype.constructor=Ro;Ro.prototype.name="TransformError";class r2{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Lo}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Ro(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=Re.empty){let i=Vf(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new Re(xe.from(r),0,0))}delete(e,t){return this.replace(e,t,Re.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return e2(this,e,t,r),this}replaceRangeWith(e,t,r){return t2(this,e,t,r),this}deleteRange(e,t){return n2(this,e,t),this}lift(e,t){return qm(this,e,t),this}join(e,t=1){return Km(this,e,t),this}wrap(e,t){return Hm(this,e,t),this}setBlockType(e,t=e,r,i=null){return Um(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i=[]){return $m(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new _o(e,t,r)),this}addNodeMark(e,t){return this.step(new Ki(e,t)),this}removeNodeMark(e,t){if(!(t instanceof Nt)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new Fo(e,t)),this}split(e,t=1,r){return Jm(this,e,t,r),this}addMark(e,t,r){return Fm(this,e,t,r),this}removeMark(e,t,r){return Rm(this,e,t,r),this}clearIncompatible(e,t,r){return Bm(this,e,t,r),this}}const Tu=Object.create(null);class lt{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new i2(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Re.empty){let r=t.content.lastChild,i=null;for(let a=0;a<t.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:u}=o[a],f=e.mapping.slice(s);e.replaceRange(f.map(l.pos),f.map(u.pos),a?Re.empty:t),a==0&&td(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),u=l.map(o.pos),f=l.map(a.pos);s?e.deleteRange(u,f):(e.replaceRangeWith(u,f,t),td(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new ct(e):yo(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=t<0?yo(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):yo(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Or(e.node(0))}static atStart(e){return yo(e,e,0,0,1)||new Or(e)}static atEnd(e){return yo(e,e,e.content.size,e.childCount,-1)||new Or(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Tu[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Tu)throw new RangeError("Duplicate use of selection JSON ID "+e);return Tu[e]=t,t.prototype.jsonID=e,t}getBookmark(){return ct.between(this.$anchor,this.$head).getBookmark()}}lt.prototype.visible=!0;class i2{constructor(e,t){this.$from=e,this.$to=t}}let Zh=!1;function ed(n){!Zh&&!n.parent.inlineContent&&(Zh=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class ct extends lt{constructor(e,t=e){ed(e),ed(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return lt.near(r);let i=e.resolve(t.map(this.anchor));return new ct(i.parent.inlineContent?i:r,r)}replace(e,t=Re.empty){if(super.replace(e,t),t==Re.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ct&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new wc(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ct(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=lt.findFrom(t,r,!0)||lt.findFrom(t,-r,!0);if(s)t=s.$head;else return lt.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(lt.findFrom(e,-r,!0)||lt.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new ct(e,t)}}lt.jsonID("text",ct);class wc{constructor(e,t){this.anchor=e,this.head=t}map(e){return new wc(e.map(this.anchor),e.map(this.head))}resolve(e){return ct.between(e.resolve(this.anchor),e.resolve(this.head))}}class Xe extends lt{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?lt.near(s):new Xe(s)}content(){return new Re(xe.from(this.node),0,0)}eq(e){return e instanceof Xe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Hf(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Xe(e.resolve(t.anchor))}static create(e,t){return new Xe(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Xe.prototype.visible=!1;lt.jsonID("node",Xe);class Hf{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new wc(r,r):new Hf(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&Xe.isSelectable(r)?new Xe(t):lt.near(t)}}class Or extends lt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Re.empty){if(t==Re.empty){e.delete(0,e.doc.content.size);let r=lt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Or(e)}map(e){return new Or(e)}eq(e){return e instanceof Or}getBookmark(){return s2}}lt.jsonID("all",Or);const s2={map(){return this},resolve(n){return new Or(n)}};function yo(n,e,t,r,i,s=!1){if(e.inlineContent)return ct.create(n,t);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Xe.isSelectable(a))return Xe.create(n,t-(i<0?a.nodeSize:0))}else{let l=yo(n,a,t+i,i<0?a.childCount:0,i,s);if(l)return l}t+=a.nodeSize*i}return null}function td(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Ln||i instanceof fn))return;let s=n.mapping.maps[r],o;s.forEach((a,l,u,f)=>{o==null&&(o=f)}),n.setSelection(lt.near(n.doc.resolve(o),t))}const nd=1,Fl=2,rd=4;class o2 extends r2{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|nd)&~Fl,this.storedMarks=null,this}get selectionSet(){return(this.updated&nd)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Fl,this}ensureMarks(e){return Nt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Fl)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Fl,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Nt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r==null?t:r,!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(t);s=r==t?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,s)),this.selection.empty||this.setSelection(lt.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=rd,this}get scrolledIntoView(){return(this.updated&rd)>0}}function id(n,e){return!e||!n?n:n.bind(e)}class _a{constructor(e,t,r){this.name=e,this.init=id(t.init,r),this.apply=id(t.apply,r)}}const a2=[new _a("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new _a("selection",{init(n,e){return n.selection||lt.atStart(e.doc)},apply(n){return n.selection}}),new _a("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new _a("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Eu{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=a2.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new _a(r.key,r.spec.state,r))})}}class xo{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,u=i?i[o].state:this,f=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,u,r);if(f&&r.filterTransaction(f,o)){if(f.setMeta("appendedTransaction",e),!i){i=[];for(let m=0;m<this.config.plugins.length;m++)i.push(m<o?{state:r,n:t.length}:{state:this,n:0})}t.push(f),r=r.applyInner(f),s=!0}i&&(i[o]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new xo(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new o2(this)}static create(e){let t=new Eu(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new xo(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new Eu(this.schema,e.plugins),r=t.fields,i=new xo(t);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Eu(e.schema,e.plugins),s=new xo(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Qr.fromJSON(e.schema,t.doc);else if(o.name=="selection")s.selection=lt.fromJSON(s.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],u=l.spec.state;if(l.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){s[o.name]=u.fromJSON.call(l,e,t[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function i1(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=i1(i,e,{})),t[r]=i}return t}class er{constructor(e){this.spec=e,this.props={},e.props&&i1(e.props,this,this.props),this.key=e.key?e.key.key:s1("plugin")}getState(e){return e[this.key]}}const Du=Object.create(null);function s1(n){return n in Du?n+"$"+ ++Du[n]:(Du[n]=0,n+"$")}class ki{constructor(e="key"){this.key=s1(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Zn=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Ba=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let sd=null;const yi=function(n,e,t){let r=sd||(sd=document.createRange());return r.setEnd(n,t==null?n.nodeValue.length:t),r.setStart(n,e||0),r},Is=function(n,e,t,r){return t&&(od(n,e,t,r,-1)||od(n,e,t,r,1))},l2=/^(img|br|input|textarea|hr)$/i;function od(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Jr(n))){let s=n.parentNode;if(!s||s.nodeType!=1||u2(n)||l2.test(n.nodeName)||n.contentEditable=="false")return!1;e=Zn(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?Jr(n):0}else return!1}}function Jr(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function c2(n,e,t){for(let r=e==0,i=e==Jr(n);r||i;){if(n==t)return!0;let s=Zn(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==Jr(n)}}function u2(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const xc=function(n){return n.focusNode&&Is(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function So(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function f2(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}const ns=typeof navigator<"u"?navigator:null,ad=typeof document<"u"?document:null,as=ns&&ns.userAgent||"",ff=/Edge\/(\d+)/.exec(as),o1=/MSIE \d/.exec(as),hf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(as),Hn=!!(o1||hf||ff),Zi=o1?document.documentMode:hf?+hf[1]:ff?+ff[1]:0,Tr=!Hn&&/gecko\/(\d+)/i.test(as);Tr&&+(/Firefox\/(\d+)/.exec(as)||[0,0])[1];const df=!Hn&&/Chrome\/(\d+)/.exec(as),Vn=!!df,h2=df?+df[1]:0,Tn=!Hn&&!!ns&&/Apple Computer/.test(ns.vendor),Bo=Tn&&(/Mobile\/\w+/.test(as)||!!ns&&ns.maxTouchPoints>2),ar=Bo||(ns?/Mac/.test(ns.platform):!1),Gr=/Android \d/.test(as),Sc=!!ad&&"webkitFontSmoothing"in ad.documentElement.style,d2=Sc?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function p2(n){return{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function zi(n,e){return typeof n=="number"?n:n[e]}function m2(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function ld(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let o=t||n.dom;o;o=Ba(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,u=l?p2(s):m2(a),f=0,m=0;if(e.top<u.top+zi(r,"top")?m=-(u.top-e.top+zi(i,"top")):e.bottom>u.bottom-zi(r,"bottom")&&(m=e.bottom-u.bottom+zi(i,"bottom")),e.left<u.left+zi(r,"left")?f=-(u.left-e.left+zi(i,"left")):e.right>u.right-zi(r,"right")&&(f=e.right-u.right+zi(i,"right")),f||m)if(l)s.defaultView.scrollBy(f,m);else{let y=a.scrollLeft,d=a.scrollTop;m&&(a.scrollTop+=m),f&&(a.scrollLeft+=f);let v=a.scrollLeft-y,w=a.scrollTop-d;e={left:e.left-v,top:e.top-w,right:e.right-v,bottom:e.bottom-w}}if(l)break}}function g2(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=n.root.elementFromPoint(s,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:a1(n.dom)}}function a1(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Ba(r));return e}function y2({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;l1(t,r==0?0:r-e)}function l1(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let ho=null;function b2(n){if(n.setActive)return n.setActive();if(ho)return n.focus(ho);let e=a1(n);n.focus(ho==null?{get preventScroll(){return ho={preventScroll:!0},!0}}:void 0),ho||(ho=!1,l1(e,0))}function c1(n,e){let t,r=2e8,i,s=0,o=e.top,a=e.top;for(let l=n.firstChild,u=0;l;l=l.nextSibling,u++){let f;if(l.nodeType==1)f=l.getClientRects();else if(l.nodeType==3)f=yi(l).getClientRects();else continue;for(let m=0;m<f.length;m++){let y=f[m];if(y.top<=o&&y.bottom>=a){o=Math.max(y.bottom,o),a=Math.min(y.top,a);let d=y.left>e.left?y.left-e.left:y.right<e.left?e.left-y.right:0;if(d<r){t=l,r=d,i=d&&t.nodeType==3?{left:y.right<e.left?y.right:y.left,top:e.top}:e,l.nodeType==1&&d&&(s=u+(e.left>=(y.left+y.right)/2?1:0));continue}}!t&&(e.left>=y.right&&e.top>=y.top||e.left>=y.left&&e.top>=y.bottom)&&(s=u+1)}}return t&&t.nodeType==3?v2(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:c1(t,i)}function v2(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let s=Ui(r,1);if(s.top!=s.bottom&&Uf(e,s))return{node:n,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function Uf(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function w2(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function x2(n,e,t){let{node:r,offset:i}=c1(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(r,i,s)}function S2(n,e,t,r){let i=-1;for(let s=e;s!=n.dom;){let o=n.docView.nearestDesc(s,!0);if(!o)return null;if(o.node.isBlock&&o.parent){let a=o.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)i=o.posBefore;else if(a.right<r.left||a.bottom<r.top)i=o.posAfter;else break}s=o.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,1)}function u1(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let o=n.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let u=a[l];if(Uf(e,u))return u1(o,e,u)}}if((s=(s+1)%r)==i)break}return n}function N2(n,e){let t=n.dom.ownerDocument,r,i=0;if(t.caretPositionFromPoint)try{let l=t.caretPositionFromPoint(e.left,e.top);l&&({offsetNode:r,offset:i}=l)}catch{}if(!r&&t.caretRangeFromPoint){let l=t.caretRangeFromPoint(e.left,e.top);l&&({startContainer:r,startOffset:i}=l)}let s=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),o;if(!s||!n.dom.contains(s.nodeType!=1?s.parentNode:s)){let l=n.dom.getBoundingClientRect();if(!Uf(e,l)||(s=u1(n.dom,e,l),!s))return null}if(Tn)for(let l=s;r&&l;l=Ba(l))l.draggable&&(r=void 0);if(s=w2(s,e),r){if(Tr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let l=r.childNodes[i],u;l.nodeName=="IMG"&&(u=l.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&i++}r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?o=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(o=S2(n,r,i,e))}o==null&&(o=x2(n,s,e));let a=n.docView.nearestDesc(s,!0);return{pos:o,inside:a?a.posAtStart-a.border:-1}}function Ui(n,e){let t=n.getClientRects();return t.length?t[e<0?0:t.length-1]:n.getBoundingClientRect()}const k2=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function f1(n,e,t){let{node:r,offset:i,atom:s}=n.docView.domFromPos(e,t<0?-1:1),o=Sc||Tr;if(r.nodeType==3)if(o&&(k2.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let l=Ui(yi(r,i,i),t);if(Tr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=Ui(yi(r,i-1,i-1),-1);if(u.top==l.top){let f=Ui(yi(r,i,i+1),-1);if(f.top!=l.top)return Sa(f,f.left<u.left)}}return l}else{let l=i,u=i,f=t<0?1:-1;return t<0&&!i?(u++,f=-1):t>=0&&i==r.nodeValue.length?(l--,f=1):t<0?l--:u++,Sa(Ui(yi(r,l,u),1),f<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==Jr(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return Fu(l.getBoundingClientRect(),!1)}if(s==null&&i<Jr(r)){let l=r.childNodes[i];if(l.nodeType==1)return Fu(l.getBoundingClientRect(),!0)}return Fu(r.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==Jr(r))){let l=r.childNodes[i-1],u=l.nodeType==3?yi(l,Jr(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return Sa(Ui(u,1),!1)}if(s==null&&i<Jr(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?yi(l,0,o?0:1):l.nodeType==1?l:null:null;if(u)return Sa(Ui(u,-1),!0)}return Sa(Ui(r.nodeType==3?yi(r):r,-t),t>=0)}function Sa(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Fu(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function h1(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function A2(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return h1(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.dom;break}s=a.dom.parentNode}let o=f1(n,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=yi(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let f=l[u];if(f.bottom>f.top+1&&(t=="up"?o.top-f.top>(f.bottom-o.top)*2:f.bottom-o.bottom>(o.bottom-f.top)*2))return!1}}return!0})}const L2=/[\u0590-\u08ac]/;function C2(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=n.domSelection();return!L2.test(r.parent.textContent)||!a.modify?t=="left"||t=="backward"?s:o:h1(n,e,()=>{let{focusNode:l,focusOffset:u,anchorNode:f,anchorOffset:m}=n.domSelectionRange(),y=a.caretBidiLevel;a.modify("move",t,"character");let d=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:v,focusOffset:w}=n.domSelectionRange(),S=v&&!d.contains(v.nodeType==1?v:v.parentNode)||l==v&&u==w;try{a.collapse(f,m),l&&(l!=f||u!=m)&&a.extend&&a.extend(l,u)}catch{}return y!=null&&(a.caretBidiLevel=y),S})}let cd=null,ud=null,fd=!1;function _2(n,e,t){return cd==e&&ud==t?fd:(cd=e,ud=t,fd=t=="up"||t=="down"?A2(n,e,t):C2(n,e,t))}const Ir=0,hd=1,No=2,ei=3;class Wa{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=Ir,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>Zn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return(i==null?r>0:i)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!t||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof p1){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof d1&&s.side>=0;r--);if(t<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&t&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?Zn(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?Zn(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],u=o+l.size;if(i==-1&&e<=u){let f=o+l.border;if(e>=f&&t<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,f);e=o;for(let m=a;m>0;m--){let y=this.children[m-1];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(1)){i=Zn(y.dom)+1;break}e-=y.size}i==-1&&(i=0)}if(i>-1&&(u>t||a==this.children.length-1)){t=u;for(let f=a+1;f<this.children.length;f++){let m=this.children[f];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){s=Zn(m.dom);break}t+=m.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),o=Math.max(e,t);for(let y=0,d=0;y<this.children.length;y++){let v=this.children[y],w=d+v.size;if(s>d&&o<w)return v.setSelection(e-d-v.border,t-d-v.border,r,i);d=w}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),u=r.getSelection(),f=!1;if((Tr||Tn)&&e==t){let{node:y,offset:d}=a;if(y.nodeType==3){if(f=!!(d&&y.nodeValue[d-1]==`
`),f&&d==y.nodeValue.length)for(let v=y,w;v;v=v.parentNode){if(w=v.nextSibling){w.nodeName=="BR"&&(a=l={node:w.parentNode,offset:Zn(w)+1});break}let S=v.pmViewDesc;if(S&&S.node&&S.node.isBlock)break}}else{let v=y.childNodes[d-1];f=v&&(v.nodeName=="BR"||v.contentEditable=="false")}}if(Tr&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let y=u.focusNode.childNodes[u.focusOffset];y&&y.contentEditable=="false"&&(i=!0)}if(!(i||f&&Tn)&&Is(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Is(l.node,l.offset,u.focusNode,u.focusOffset))return;let m=!1;if((u.extend||e==t)&&!f){u.collapse(a.node,a.offset);try{e!=t&&u.extend(l.node,l.offset),m=!0}catch{}}if(!m){if(e>t){let d=a;a=l,l=d}let y=document.createRange();y.setEnd(l.node,l.offset),y.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(y)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&t>=r:e<o&&t>r){let a=r+s.border,l=o-s.border;if(e>=a&&t<=l){this.dirty=e==r||t==o?No:hd,e==a&&t==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=ei:s.markDirty(e-a,t-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?No:ei}r=o}this.dirty=No}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?No:hd;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class d1 extends Wa{constructor(e,t,r,i){let s,o=t.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==Ir&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class M2 extends Wa{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ts extends Wa{constructor(e,t,r,i){super(e,[],r,i),this.mark=t}static create(e,t,r,i){let s=i.nodeViews[t.type.name],o=s&&s(t,i,r);return(!o||!o.dom)&&(o=Kr.renderSpec(document,t.type.spec.toDOM(t,r))),new Ts(e,t,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&ei||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return this.dirty!=ei&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Ir){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ir}}slice(e,t,r){let i=Ts.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;t<o&&(s=gf(s,t,o,r)),e>0&&(s=gf(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}}class Es extends Wa{constructor(e,t,r,i,s,o,a,l,u){super(e,[],s,o),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a,o&&this.updateChildren(l,u)}static create(e,t,r,i,s,o){let a=s.nodeViews[t.type.name],l,u=a&&a(t,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),f=u&&u.dom,m=u&&u.contentDOM;if(t.isText){if(!f)f=document.createTextNode(t.text);else if(f.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else f||({dom:f,contentDOM:m}=Kr.renderSpec(document,t.type.spec.toDOM(t)));!m&&!t.isText&&f.nodeName!="BR"&&(f.hasAttribute("contenteditable")||(f.contentEditable="false"),t.type.spec.draggable&&(f.draggable=!0));let y=f;return f=y1(f,r,t),u?l=new P2(e,t,r,i,f,m||null,y,u,s,o+1):t.isText?new Nc(e,t,r,i,f,y,s):new Es(e,t,r,i,f,m||null,y,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>xe.empty)}return e}matchesNode(e,t,r){return this.dirty==Ir&&e.eq(this.node)&&mf(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new I2(this,o&&o.node,e);D2(this.node,this.innerDeco,(u,f,m)=>{u.spec.marks?l.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!m&&l.syncToMarks(f==this.node.childCount?Nt.none:this.node.child(f).marks,r,e),l.placeWidget(u,e,i)},(u,f,m,y)=>{l.syncToMarks(u.marks,r,e);let d;l.findNodeMatch(u,f,m,y)||a&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(d=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(u,f,m,d,e)||l.updateNextNode(u,f,m,e,y)||l.addNode(u,f,m,e,i),i+=u.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==No)&&(o&&this.protectLocalComposition(e,o),m1(this.contentDOM,this.children,e),Bo&&F2(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof ct)||r<t||i>t+this.node.content.size)return null;let s=e.domSelectionRange(),o=R2(s.focusNode,s.focusOffset);if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let a=o.nodeValue,l=B2(this.node.content,a,r-t,i-t);return l<0?null:{node:o,pos:l,text:a}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new M2(this,s,t,i);e.input.compositionNodes.push(o),this.children=gf(this.children,r,r+i.length,e,o)}update(e,t,r,i){return this.dirty==ei||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Ir}updateOuterDeco(e){if(mf(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=g1(this.dom,this.nodeDOM,pf(this.outerDeco,this.node,t),pf(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function dd(n,e,t,r,i){return y1(r,e,n),new Es(void 0,n,e,t,r,r,r,i,0)}class Nc extends Es{constructor(e,t,r,i,s,o,a){super(e,t,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==ei||this.dirty!=Ir&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Ir||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Ir,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new Nc(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=ei)}get domAtom(){return!1}}class p1 extends Wa{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ir&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class P2 extends Es{constructor(e,t,r,i,s,o,a,l,u,f){super(e,t,r,i,s,o,a,u,f),this.spec=l}update(e,t,r,i){if(this.dirty==ei)return!1;if(this.spec.update){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function m1(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==n){for(;a!=r;)r=pd(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(a,r);if(o instanceof Ts){let l=r?r.previousSibling:n.lastChild;m1(o.contentDOM,o.children,t),r=l?l.nextSibling:n.firstChild}}for(;r;)r=pd(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const Ia=function(n){n&&(this.nodeName=n)};Ia.prototype=Object.create(null);const ks=[new Ia];function pf(n,e,t){if(n.length==0)return ks;let r=t?ks[0]:new Ia,i=[r];for(let s=0;s<n.length;s++){let o=n[s].type.attrs;if(!!o){o.nodeName&&i.push(r=new Ia(o.nodeName));for(let a in o){let l=o[a];l!=null&&(t&&i.length==1&&i.push(r=new Ia(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function g1(n,e,t,r){if(t==ks&&r==ks)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=n&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=ks[0]),i=l}O2(i,a||ks[0],o)}return i}function O2(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function y1(n,e,t){return g1(n,n,ks,pf(e,t,n.nodeType!=1))}function mf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function pd(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class I2{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=T2(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Ir,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++)if(this.top.children[l].matchesMark(e[s])){a=l;break}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Ts.create(this.top,e[s],t,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(e,t,r)&&!this.preMatch.matched.has(u)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let o=this.top.children[i];return o.dirty==ei&&o.dom==o.contentDOM&&(o.dirty=No),o.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,s){for(let o=this.index;o<this.top.children.length;o++){let a=this.top.children[o];if(a instanceof Es){let l=this.preMatch.matched.get(a);if(l!=null&&l!=s)return!1;let u=a.dom;if(!(this.lock&&(u==this.lock||u.nodeType==1&&u.contains(this.lock.parentNode))&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=ei&&mf(t,a.outerDeco)))&&a.update(e,t,r,i))return this.destroyBetween(this.index,o),a.dom!=u&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,t,r,i,s){this.top.children.splice(this.index++,0,Es.create(this.top,e,t,r,i,s)),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new d1(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Ts;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Nc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Tn||Vn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new p1(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}}function T2(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let u=t.children[r-1];if(u instanceof Ts)t=u,r=u.children.length;else{a=u,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(!!l){if(l!=n.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function E2(n,e){return n.type.side-e.type.side}function D2(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let u=0;u<n.childCount;u++){let f=n.child(u);r(f,i,e.forChild(s,f),u),s+=f.nodeSize}return}let o=0,a=[],l=null;for(let u=0;;){if(o<i.length&&i[o].to==s){let v=i[o++],w;for(;o<i.length&&i[o].to==s;)(w||(w=[v])).push(i[o++]);if(w){w.sort(E2);for(let S=0;S<w.length;S++)t(w[S],u,!!l)}else t(v,u,!!l)}let f,m;if(l)m=-1,f=l,l=null;else if(u<n.childCount)m=u,f=n.child(u++);else break;for(let v=0;v<a.length;v++)a[v].to<=s&&a.splice(v--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let y=s+f.nodeSize;if(f.isText){let v=y;o<i.length&&i[o].from<v&&(v=i[o].from);for(let w=0;w<a.length;w++)a[w].to<v&&(v=a[w].to);v<y&&(l=f.cut(v-s),f=f.cut(0,v-s),y=v,m=-1)}let d=f.isInline&&!f.isLeaf?a.filter(v=>!v.inline):a.slice();r(f,d,e.forChild(s,f),m),s=y}}function F2(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function R2(n,e){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0){if(n.childNodes.length>e&&n.childNodes[e].nodeType==3)return n.childNodes[e];n=n.childNodes[e-1],e=Jr(n)}else if(n.nodeType==1&&e<n.childNodes.length)n=n.childNodes[e],e=0;else return null}}function B2(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let o=n.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<n.childCount;){let u=n.child(i++);if(s+=u.nodeSize,!u.isText)break;l+=u.text}if(s>=t){let u=a<r?l.lastIndexOf(e,r-a-1):-1;if(u>=0&&u+e.length+a>=t)return a+u;if(t==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function gf(n,e,t,r,i){let s=[];for(let o=0,a=0;o<n.length;o++){let l=n[o],u=a,f=a+=l.size;u>=t||f<=e?s.push(l):(u<e&&s.push(l.slice(0,e-u,r)),i&&(s.push(i),i=void 0),f>t&&s.push(l.slice(t-u,l.size,r)))}return s}function Wf(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,u;if(xc(t)){for(l=a;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&Xe.isSelectable(f)&&i.parent&&!(f.isInline&&c2(t.focusNode,t.focusOffset,i.dom))){let m=i.posBefore;u=new Xe(o==m?a:r.resolve(m))}}else{let f=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(f<0)return null;l=r.resolve(f)}if(!u){let f=e=="pointer"||n.state.selection.head<a.pos&&!s?1:-1;u=$f(n,l,a,f)}return u}function b1(n){return n.editable?n.hasFocus():w1(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function wi(n,e=!1){let t=n.state.selection;if(v1(n,t),!!b1(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Vn){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Is(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)q2(n);else{let{anchor:r,head:i}=t,s,o;md&&!(t instanceof ct)&&(t.$from.parent.inlineContent||(s=gd(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=gd(n,t.to))),n.docView.setSelection(r,i,n.root,e),md&&(s&&yd(s),o&&yd(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&j2(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const md=Tn||Vn&&h2<63;function gd(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(Tn&&i&&i.contentEditable=="false")return Ru(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Ru(i);if(s)return Ru(s)}}function Ru(n){return n.contentEditable="true",Tn&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function yd(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function j2(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!b1(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function q2(n){let e=n.domSelection(),t=document.createRange(),r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setEnd(r.parentNode,Zn(r)+1):t.setEnd(r,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&Hn&&Zi<=11&&(r.disabled=!0,r.disabled=!1)}function v1(n,e){if(e instanceof Xe){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(bd(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else bd(n)}function bd(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function $f(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||ct.between(e,t,r)}function vd(n){return n.editable&&!n.hasFocus()?!1:w1(n)}function w1(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function z2(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Is(e.node,e.offset,t.anchorNode,t.anchorOffset)}function yf(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&lt.findFrom(s,e)}function xs(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function wd(n,e,t){let r=n.state.selection;if(r instanceof ct){if(!r.empty||t.indexOf("s")>-1)return!1;if(n.endOfTextblock(e>0?"right":"left")){let i=yf(n.state,e);return i&&i instanceof Xe?xs(n,i):!1}else if(!(ar&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?Xe.isSelectable(s)?xs(n,new Xe(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):Sc?xs(n,new ct(n.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else{if(r instanceof Xe&&r.node.isInline)return xs(n,new ct(e>0?r.$to:r.$from));{let i=yf(n.state,e);return i?xs(n,i):!1}}}function cc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Ta(n){let e=n.pmViewDesc;return e&&e.size==0&&(n.nextSibling||n.nodeName!="BR")}function Bu(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,o=!1;for(Tr&&t.nodeType==1&&r<cc(t)&&Ta(t.childNodes[r])&&(o=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(Ta(a))i=t,s=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(x1(t))break;{let a=t.previousSibling;for(;a&&Ta(a);)i=t.parentNode,s=Zn(a),a=a.previousSibling;if(a)t=a,r=cc(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}o?bf(n,t,r):i&&bf(n,i,s)}function ju(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=cc(t),s,o;for(;;)if(r<i){if(t.nodeType!=1)break;let a=t.childNodes[r];if(Ta(a))s=t,o=++r;else break}else{if(x1(t))break;{let a=t.nextSibling;for(;a&&Ta(a);)s=a.parentNode,o=Zn(a)+1,a=a.nextSibling;if(a)t=a,r=0,i=cc(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&bf(n,s,o)}function x1(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function bf(n,e,t){let r=n.domSelection();if(xc(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&wi(n)},50)}function xd(n,e,t){let r=n.state.selection;if(r instanceof ct&&!r.empty||t.indexOf("s")>-1||ar&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=yf(n.state,e);if(o&&o instanceof Xe)return xs(n,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof Or?lt.near(o,e):lt.findFrom(o,e);return a?xs(n,a):!1}return!1}function Sd(n,e){if(!(n.state.selection instanceof ct))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let o=n.state.tr;return e<0?o.delete(t.pos-s.nodeSize,t.pos):o.delete(t.pos,t.pos+s.nodeSize),n.dispatch(o),!0}return!1}function Nd(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function V2(n){if(!Tn||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Nd(n,r,"true"),setTimeout(()=>Nd(n,r,"false"),20)}return!1}function H2(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function U2(n,e){let t=e.keyCode,r=H2(e);return t==8||ar&&t==72&&r=="c"?Sd(n,-1)||Bu(n):t==46||ar&&t==68&&r=="c"?Sd(n,1)||ju(n):t==13||t==27?!0:t==37||ar&&t==66&&r=="c"?wd(n,-1,r)||Bu(n):t==39||ar&&t==70&&r=="c"?wd(n,1,r)||ju(n):t==38||ar&&t==80&&r=="c"?xd(n,-1,r)||Bu(n):t==40||ar&&t==78&&r=="c"?V2(n)||xd(n,1,r)||ju(n):r==(ar?"m":"c")&&(t==66||t==73||t==89||t==90)}function S1(n,e){n.someProp("transformCopied",d=>{e=d(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let d=r.firstChild;t.push(d.type.name,d.attrs!=d.type.defaultAttrs?d.attrs:null),r=d.content}let o=n.someProp("clipboardSerializer")||Kr.fromSchema(n.state.schema),a=_1(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let u=l.firstChild,f,m=0;for(;u&&u.nodeType==1&&(f=C1[u.nodeName.toLowerCase()]);){for(let d=f.length-1;d>=0;d--){let v=a.createElement(f[d]);for(;l.firstChild;)v.appendChild(l.firstChild);l.appendChild(v),m++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${m?` -${m}`:""} ${JSON.stringify(t)}`);let y=n.someProp("clipboardTextSerializer",d=>d(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:y}}function N1(n,e,t,r,i){let s=i.parent.type.spec.code,o,a;if(!t&&!e)return null;let l=e&&(r||s||!t);if(l){if(n.someProp("transformPastedText",y=>{e=y(e,s||r,n)}),s)return e?new Re(xe.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Re.empty;let m=n.someProp("clipboardTextParser",y=>y(e,i,r,n));if(m)a=m;else{let y=i.marks(),{schema:d}=n.state,v=Kr.fromSchema(d);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(w=>{let S=o.appendChild(document.createElement("p"));w&&S.appendChild(v.serializeNode(d.text(w,y)))})}}else n.someProp("transformPastedHTML",m=>{t=m(t,n)}),o=J2(t),Sc&&G2(o);let u=o&&o.querySelector("[data-pm-slice]"),f=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(f&&f[3])for(let m=+f[3];m>0;m--){let y=o.firstChild;for(;y&&y.nodeType!=1;)y=y.nextSibling;if(!y)break;o=y}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||Do.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||f),context:i,ruleFromNode(y){return y.nodeName=="BR"&&!y.nextSibling&&y.parentNode&&!W2.test(y.parentNode.nodeName)?{ignore:!0}:null}})),f)a=K2(kd(a,+f[1],+f[2]),f[4]);else if(a=Re.maxOpen($2(a.content,i),!0),a.openStart||a.openEnd){let m=0,y=0;for(let d=a.content.firstChild;m<a.openStart&&!d.type.spec.isolating;m++,d=d.firstChild);for(let d=a.content.lastChild;y<a.openEnd&&!d.type.spec.isolating;y++,d=d.lastChild);a=kd(a,m,y)}return n.someProp("transformPasted",m=>{a=m(a,n)}),a}const W2=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function $2(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,o=[];if(n.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),u;if(!l)return o=null;if(u=o.length&&s.length&&A1(l,s,a,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=L1(o[o.length-1],s.length));let f=k1(a,l);o.push(f),i=i.matchType(f.type),s=l}}),o)return xe.from(o)}return n}function k1(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,xe.from(n));return n}function A1(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=A1(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(xe.from(k1(t,n,i+1))))}}function L1(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,L1(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(xe.empty,!0);return n.copy(t.append(r))}function vf(n,e,t,r,i,s){let o=e<0?n.firstChild:n.lastChild,a=o.content;return i<r-1&&(a=vf(a,e,t,r,i+1,s)),i>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,n.childCount>1||s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(xe.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(a))}function kd(n,e,t){return e<n.openStart&&(n=new Re(vf(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new Re(vf(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const C1={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Ad=null;function _1(){return Ad||(Ad=document.implementation.createHTMLDocument("title"))}function J2(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=_1().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&C1[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=n,i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function G2(n){let e=n.querySelectorAll(Vn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent=="\xA0"&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function K2(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:o}=n;for(let a=r.length-2;a>=0;a-=2){let l=t.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=xe.from(l.create(r[a+1],i)),s++,o++}return new Re(i,s,o)}const En={},Dn={},Y2={touchstart:!0,touchmove:!0};class X2{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Q2(n){for(let e in En){let t=En[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{e5(n,r)&&!Jf(n,r)&&(n.editable||!(r.type in Dn))&&t(n,r)},Y2[e]?{passive:!0}:void 0)}Tn&&n.dom.addEventListener("input",()=>null),wf(n)}function Yi(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function Z2(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function wf(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>Jf(n,r))})}function Jf(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function e5(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function t5(n,e){!Jf(n,e)&&En[e.type]&&(n.editable||!(e.type in Dn))&&En[e.type](n,e)}Dn.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!P1(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Gr&&Vn&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Bo&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,So(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||U2(n,t)?t.preventDefault():Yi(n,"key")};Dn.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Dn.keypress=(n,e)=>{let t=e;if(P1(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||ar&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof ct)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);n.someProp("handleTextInput",s=>s(n,r.$from.pos,r.$to.pos,i))||n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function kc(n){return{left:n.clientX,top:n.clientY}}function n5(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Gf(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(n.someProp(e,a=>o>s.depth?a(n,t,s.nodeAfter,s.before(o),i,!0):a(n,t,s.node(o),s.before(o),i,!1)))return!0;return!1}function Mo(n,e,t){n.focused||n.focus();let r=n.state.tr.setSelection(e);t=="pointer"&&r.setMeta("pointer",!0),n.dispatch(r)}function r5(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&Xe.isSelectable(r)?(Mo(n,new Xe(t),"pointer"),!0):!1}function i5(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof Xe&&(r=t.node);let s=n.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Xe.isSelectable(a)){r&&t.$from.depth>0&&o>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(o);break}}return i!=null?(Mo(n,Xe.create(n.state.doc,i),"pointer"),!0):!1}function s5(n,e,t,r,i){return Gf(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?i5(n,t):r5(n,t))}function o5(n,e,t,r){return Gf(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function a5(n,e,t,r){return Gf(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||l5(n,t,r)}function l5(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Mo(n,ct.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Mo(n,ct.create(r,a+1,a+1+o.content.size),"pointer");else if(Xe.isSelectable(o))Mo(n,Xe.create(r,a),"pointer");else continue;return!0}}function Kf(n){return uc(n)}const M1=ar?"metaKey":"ctrlKey";En.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Kf(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&n5(t,n.input.lastClick)&&!t[M1]&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s};let o=n.posAtCoords(kc(t));!o||(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new c5(n,o,t,!!r)):(s=="doubleClick"?o5:a5)(n,o.pos,o.inside,t)?t.preventDefault():Yi(n,"pointer"))};class c5{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[M1],this.allowDefault=r.shiftKey;let s,o;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),o=t.inside;else{let f=e.state.doc.resolve(t.pos);s=f.parent,o=f.depth?f.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:u}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof Xe&&u.from<=o&&u.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Tr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Yi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>wi(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(kc(e))),this.updateAllowDefault(e),this.allowDefault||!t?Yi(this.view,"pointer"):s5(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Tn&&this.mightDrag&&!this.mightDrag.node.isAtom||Vn&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Mo(this.view,lt.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Yi(this.view,"pointer")}move(e){this.updateAllowDefault(e),Yi(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}En.touchstart=n=>{n.input.lastTouch=Date.now(),Kf(n),Yi(n,"pointer")};En.touchmove=n=>{n.input.lastTouch=Date.now(),Yi(n,"pointer")};En.contextmenu=n=>Kf(n);function P1(n,e){return n.composing?!0:Tn&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const u5=Gr?5e3:-1;Dn.compositionstart=Dn.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),uc(n,!0),n.markCursor=null;else if(uc(n),Tr&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){n.domSelection().collapse(o,o.nodeValue.length);break}else i=o,s=-1}}n.input.composing=!0}O1(n,u5)};Dn.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,O1(n,20))};function O1(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>uc(n),e))}function I1(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=f5());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function f5(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function uc(n,e=!1){if(!(Gr&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),I1(n),e||n.docView&&n.docView.dirty){let t=Wf(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):n.updateState(n.state),!0}return!1}}function h5(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const jo=Hn&&Zi<15||Bo&&d2<604;En.copy=Dn.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=jo?null:t.clipboardData,o=r.content(),{dom:a,text:l}=S1(n,o);s?(t.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):h5(n,a),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function d5(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function p5(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?xf(n,r.value,null,e):xf(n,r.textContent,r.innerHTML,e)},50)}function xf(n,e,t,r){let i=N1(n,e,t,n.input.shiftKey,n.state.selection.$from);if(n.someProp("handlePaste",a=>a(n,r,i||Re.empty)))return!0;if(!i)return!1;let s=d5(i),o=s?n.state.tr.replaceSelectionWith(s,n.input.shiftKey):n.state.tr.replaceSelection(i);return n.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Dn.paste=(n,e)=>{let t=e;if(n.composing&&!Gr)return;let r=jo?null:t.clipboardData;r&&xf(n,r.getData("text/plain"),r.getData("text/html"),t)?t.preventDefault():p5(n,t)};class m5{constructor(e,t){this.slice=e,this.move=t}}const T1=ar?"altKey":"ctrlKey";En.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(kc(t));if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Xe?i.to-1:i.to))){if(r&&r.mightDrag)n.dispatch(n.state.tr.setSelection(Xe.create(n.state.doc,r.mightDrag.pos)));else if(t.target&&t.target.nodeType==1){let u=n.docView.nearestDesc(t.target,!0);u&&u.node.type.spec.draggable&&u!=n.docView&&n.dispatch(n.state.tr.setSelection(Xe.create(n.state.doc,u.posBefore)))}}let o=n.state.selection.content(),{dom:a,text:l}=S1(n,o);t.dataTransfer.clearData(),t.dataTransfer.setData(jo?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",jo||t.dataTransfer.setData("text/plain",l),n.dragging=new m5(o,!t[T1])};En.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Dn.dragover=Dn.dragenter=(n,e)=>e.preventDefault();Dn.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(kc(t));if(!i)return;let s=n.state.doc.resolve(i.pos),o=r&&r.slice;o?n.someProp("transformPasted",v=>{o=v(o,n)}):o=N1(n,t.dataTransfer.getData(jo?"Text":"text/plain"),jo?null:t.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!t[T1]);if(n.someProp("handleDrop",v=>v(n,t,o||Re.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let l=o?Zp(n.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let u=n.state.tr;a&&u.deleteSelection();let f=u.mapping.map(l),m=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,y=u.doc;if(m?u.replaceRangeWith(f,f,o.content.firstChild):u.replaceRange(f,f,o),u.doc.eq(y))return;let d=u.doc.resolve(f);if(m&&Xe.isSelectable(o.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(o.content.firstChild))u.setSelection(new Xe(d));else{let v=u.mapping.map(l);u.mapping.maps[u.mapping.maps.length-1].forEach((w,S,x,_)=>v=_),u.setSelection($f(n,d,u.doc.resolve(v)))}n.focus(),n.dispatch(u.setMeta("uiEvent","drop"))};En.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&wi(n)},20))};En.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};En.beforeinput=(n,e)=>{if(Vn&&Gr&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,So(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Dn)En[n]=Dn[n];function ja(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Yf{constructor(e,t){this.toDOM=e,this.spec=t||_s,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:o}=e.mapResult(t.from+i,this.side<0?-1:1);return o?null:new fr(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Yf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&ja(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class es{constructor(e,t){this.attrs=e,this.spec=t||_s}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new fr(s,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof es&&ja(this.attrs,e.attrs)&&ja(this.spec,e.spec)}static is(e){return e.type instanceof es}destroy(){}}class Xf{constructor(e,t){this.attrs=e,this.spec=t||_s}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let o=e.mapResult(t.to+i,-1);return o.deleted||o.pos<=s.pos?null:new fr(s.pos-r,o.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof Xf&&ja(this.attrs,e.attrs)&&ja(this.spec,e.spec)}destroy(){}}class fr{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new fr(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new fr(e,e,new Yf(t,r))}static inline(e,t,r,i){return new fr(e,t,new es(r,i))}static node(e,t,r,i){return new fr(e,t,new Xf(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof es}}const bo=[],_s={};class rn{constructor(e,t){this.local=e.length?e:bo,this.children=t.length?t:bo}static create(e,t){return t.length?fc(t,e,0,_s):An}find(e,t,r){let i=[];return this.findInner(e==null?0:e,t==null?1e9:t,i,0,r),i}findInner(e,t,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,r,i+a,s)}}map(e,t,r){return this==An||e.maps.length==0?this:this.mapInner(e,t,0,0,r||_s)}mapInner(e,t,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(t,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?g5(this.children,o||[],e,t,r,i,s):o?new rn(o.sort(Ms),bo):An}add(e,t){return t.length?this==An?rn.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((a,l)=>{let u=l+r,f;if(!!(f=D1(t,a,u))){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,f,u+1):i.splice(s,0,l,l+a.nodeSize,fc(f,a,u+1,_s)),s+=3}});let o=E1(s?F1(t):t,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new rn(o.length?this.local.concat(o).sort(Ms):this.local,i||this.children)}remove(e){return e.length==0||this==An?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+t,l=r[s+1]+t;for(let f=0,m;f<e.length;f++)(m=e[f])&&m.from>a&&m.to<l&&(e[f]=null,(o||(o=[])).push(m));if(!o)continue;r==this.children&&(r=this.children.slice());let u=r[s+2].removeInner(o,a+1);u!=An?r[s+2]=u:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,t)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new rn(i,r):An}forChild(e,t){if(this==An)return this;if(t.isLeaf)return rn.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof es){let u=Math.max(s,l.from)-s,f=Math.min(o,l.to)-s;u<f&&(i||(i=[])).push(l.copy(u,f))}}if(i){let a=new rn(i.sort(Ms),bo);return r?new Ji([a,r]):a}return r||An}eq(e){if(this==e)return!0;if(!(e instanceof rn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Qf(this.localsInner(e))}localsInner(e){if(this==An)return bo;if(e.inlineContent||!this.local.some(es.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof es||t.push(this.local[r]);return t}}rn.empty=new rn([],[]);rn.removeOverlap=Qf;const An=rn.empty;class Ji{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,_s));return Ji.from(r)}forChild(e,t){if(t.isLeaf)return rn.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=An&&(s instanceof Ji?r=r.concat(s.members):r.push(s))}return Ji.from(r)}eq(e){if(!(e instanceof Ji)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(!!s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let o=0;o<s.length;o++)t.push(s[o])}}return t?Qf(r?t:t.sort(Ms)):bo}static from(e){switch(e.length){case 0:return An;case 1:return e[0];default:return new Ji(e.every(t=>t instanceof rn)?e:e.reduce((t,r)=>t.concat(r instanceof rn?r:r.members),[]))}}}function g5(n,e,t,r,i,s,o){let a=n.slice();for(let u=0,f=s;u<t.maps.length;u++){let m=0;t.maps[u].forEach((y,d,v,w)=>{let S=w-v-(d-y);for(let x=0;x<a.length;x+=3){let _=a[x+1];if(_<0||y>_+f-m)continue;let B=a[x]+f-m;d>=B?a[x+1]=y<=B?-2:-1:v>=i&&S&&(a[x]+=S,a[x+1]+=S)}m+=S}),f=t.maps[u].map(f,-1)}let l=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){l=!0,a[u+1]=-1;continue}let f=t.map(n[u]+s),m=f-i;if(m<0||m>=r.content.size){l=!0;continue}let y=t.map(n[u+1]+s,-1),d=y-i,{index:v,offset:w}=r.content.findIndex(m),S=r.maybeChild(v);if(S&&w==m&&w+S.nodeSize==d){let x=a[u+2].mapInner(t,S,f+1,n[u]+s+1,o);x!=An?(a[u]=m,a[u+1]=d,a[u+2]=x):(a[u+1]=-2,l=!0)}else l=!0}if(l){let u=y5(a,n,e,t,i,s,o),f=fc(u,r,0,o);e=f.local;for(let m=0;m<a.length;m+=3)a[m+1]<0&&(a.splice(m,3),m-=3);for(let m=0,y=0;m<f.children.length;m+=3){let d=f.children[m];for(;y<a.length&&a[y]<d;)y+=3;a.splice(y,0,f.children[m],f.children[m+1],f.children[m+2])}}return new rn(e.sort(Ms),a)}function E1(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new fr(i.from+e,i.to+e,i.type))}return t}function y5(n,e,t,r,i,s,o){function a(l,u){for(let f=0;f<l.local.length;f++){let m=l.local[f].map(r,i,u);m?t.push(m):o.onRemove&&o.onRemove(l.local[f].spec)}for(let f=0;f<l.children.length;f+=3)a(l.children[f+2],l.children[f]+u+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+s+1);return t}function D1(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,o;s<n.length;s++)(o=n[s])&&o.from>t&&o.to<r&&((i||(i=[])).push(o),n[s]=null);return i}function F1(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function fc(n,e,t,r){let i=[],s=!1;e.forEach((a,l)=>{let u=D1(n,a,l+t);if(u){s=!0;let f=fc(u,a,t+l+1,r);f!=An&&i.push(l,l+a.nodeSize,f)}});let o=E1(s?F1(n):n,-t).sort(Ms);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new rn(o,i):An}function Ms(n,e){return n.from-e.from||n.to-e.to}function Qf(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),Ld(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),Ld(e,i,r.copy(s.from,r.to)));break}}}return e}function Ld(n,e,t){for(;e<n.length&&Ms(t,n[e])>0;)e++;n.splice(e,0,t)}function qu(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=An&&e.push(r)}),n.cursorWrapper&&e.push(rn.create(n.state.doc,[n.cursorWrapper.deco])),Ji.from(e)}const b5={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},v5=Hn&&Zi<=11;class w5{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class x5{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new w5,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Hn&&Zi<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),v5&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,b5)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(!!vd(this.view)){if(this.suppressingSelectionUpdates)return wi(this.view);if(Hn&&Zi<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Is(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let s=e.focusNode;s;s=Ba(s))t.add(s);for(let s=e.anchorNode;s;s=Ba(s))if(t.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&vd(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let f=0;f<t.length;f++){let m=this.registerMutation(t[f],l);m&&(s=s<0?m.from:Math.min(m.from,s),o=o<0?m.to:Math.max(m.to,o),m.typeOver&&(a=!0))}if(Tr&&l.length>1){let f=l.filter(m=>m.nodeName=="BR");if(f.length==2){let m=f[0],y=f[1];m.parentNode&&m.parentNode.parentNode==y.parentNode?y.remove():m.remove()}}let u=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&e.input.lastTouch<Date.now()-300&&xc(r)&&(u=Wf(e))&&u.eq(lt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,wi(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),S5(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||wi(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let f=0;f<e.addedNodes.length;f++)t.push(e.addedNodes[f]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Hn&&Zi<=11&&e.addedNodes.length)for(let f=0;f<e.addedNodes.length;f++){let{previousSibling:m,nextSibling:y}=e.addedNodes[f];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(i=m),(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(s=y)}let o=i&&i.parentNode==e.target?Zn(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?Zn(s):e.target.childNodes.length,u=r.localPosFromDOM(e.target,l,1);return{from:a,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let Cd=new WeakMap,_d=!1;function S5(n){if(!Cd.has(n)&&(Cd.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Tr,_d)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),_d=!0}}function N5(n){let e;function t(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}n.dom.addEventListener("beforeinput",t,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",t,!0);let r=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=n.domAtPos(n.state.selection.anchor);return Is(a.node,a.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}function k5(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=n.docView.parseRange(e,t),l=n.domSelectionRange(),u,f=l.anchorNode;if(f&&n.dom.contains(f.nodeType==1?f:f.parentNode)&&(u=[{node:f,offset:l.anchorOffset}],xc(l)||u.push({node:l.focusNode,offset:l.focusOffset})),Vn&&n.input.lastKeyCode===8)for(let S=s;S>i;S--){let x=r.childNodes[S-1],_=x.pmViewDesc;if(x.nodeName=="BR"&&!_){s=S;break}if(!_||_.size)break}let m=n.state.doc,y=n.someProp("domParser")||Do.fromSchema(n.state.schema),d=m.resolve(o),v=null,w=y.parse(r,{topNode:d.parent,topMatch:d.parent.contentMatchAt(d.index()),topOpen:!0,from:i,to:s,preserveWhitespace:d.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:A5,context:d});if(u&&u[0].pos!=null){let S=u[0].pos,x=u[1]&&u[1].pos;x==null&&(x=S),v={anchor:S+o,head:x+o}}return{doc:w,sel:v,from:o,to:a}}function A5(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Tn&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Tn&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}function L5(n,e,t,r,i){if(e<0){let E=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,ue=Wf(n,E);if(ue&&!n.state.selection.eq(ue)){let le=n.state.tr.setSelection(ue);E=="pointer"?le.setMeta("pointer",!0):E=="key"&&le.scrollIntoView(),n.dispatch(le)}return}let s=n.state.doc.resolve(e),o=s.sharedDepth(t);e=s.before(o+1),t=n.state.doc.resolve(t).after(o+1);let a=n.state.selection,l=k5(n,e,t),u=n.state.doc,f=u.slice(l.from,l.to),m,y;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(m=n.state.selection.to,y="end"):(m=n.state.selection.from,y="start"),n.input.lastKeyCode=null;let d=M5(f.content,l.doc.content,l.from,m,y);if((Bo&&n.input.lastIOSEnter>Date.now()-225||Gr)&&i.some(E=>E.nodeName=="DIV"||E.nodeName=="P"||E.nodeName=="LI")&&(!d||d.endA>=d.endB)&&n.someProp("handleKeyDown",E=>E(n,So(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!d)if(r&&a instanceof ct&&!a.empty&&a.$head.sameParent(a.$anchor)&&!n.composing&&!(l.sel&&l.sel.anchor!=l.sel.head))d={start:a.from,endA:a.to,endB:a.to};else{if(l.sel){let E=Md(n,n.state.doc,l.sel);E&&!E.eq(n.state.selection)&&n.dispatch(n.state.tr.setSelection(E))}return}if(Vn&&n.cursorWrapper&&l.sel&&l.sel.anchor==n.cursorWrapper.deco.from&&l.sel.head==l.sel.anchor){let E=d.endB-d.start;l.sel={anchor:l.sel.anchor+E,head:l.sel.anchor+E}}n.input.domChangeCount++,n.state.selection.from<n.state.selection.to&&d.start==d.endB&&n.state.selection instanceof ct&&(d.start>n.state.selection.from&&d.start<=n.state.selection.from+2&&n.state.selection.from>=l.from?d.start=n.state.selection.from:d.endA<n.state.selection.to&&d.endA>=n.state.selection.to-2&&n.state.selection.to<=l.to&&(d.endB+=n.state.selection.to-d.endA,d.endA=n.state.selection.to)),Hn&&Zi<=11&&d.endB==d.start+1&&d.endA==d.start&&d.start>l.from&&l.doc.textBetween(d.start-l.from-1,d.start-l.from+1)==" \xA0"&&(d.start--,d.endA--,d.endB--);let v=l.doc.resolveNoCache(d.start-l.from),w=l.doc.resolveNoCache(d.endB-l.from),S=u.resolve(d.start),x=v.sameParent(w)&&v.parent.inlineContent&&S.end()>=d.endA,_;if((Bo&&n.input.lastIOSEnter>Date.now()-225&&(!x||i.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!x&&v.pos<l.doc.content.size&&(_=lt.findFrom(l.doc.resolve(v.pos+1),1,!0))&&_.head==w.pos)&&n.someProp("handleKeyDown",E=>E(n,So(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>d.start&&_5(u,d.start,d.endA,v,w)&&n.someProp("handleKeyDown",E=>E(n,So(8,"Backspace")))){Gr&&Vn&&n.domObserver.suppressSelectionUpdates();return}Vn&&Gr&&d.endB==d.start&&(n.input.lastAndroidDelete=Date.now()),Gr&&!x&&v.start()!=w.start()&&w.parentOffset==0&&v.depth==w.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==d.endA&&(d.endB-=2,w=l.doc.resolveNoCache(d.endB-l.from),setTimeout(()=>{n.someProp("handleKeyDown",function(E){return E(n,So(13,"Enter"))})},20));let B=d.start,$=d.endA,Q,he,Y;if(x){if(v.pos==w.pos)Hn&&Zi<=11&&v.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>wi(n),20)),Q=n.state.tr.delete(B,$),he=u.resolve(d.start).marksAcross(u.resolve(d.endA));else if(d.endA==d.endB&&(Y=C5(v.parent.content.cut(v.parentOffset,w.parentOffset),S.parent.content.cut(S.parentOffset,d.endA-S.start()))))Q=n.state.tr,Y.type=="add"?Q.addMark(B,$,Y.mark):Q.removeMark(B,$,Y.mark);else if(v.parent.child(v.index()).isText&&v.index()==w.index()-(w.textOffset?0:1)){let E=v.parent.textBetween(v.parentOffset,w.parentOffset);if(n.someProp("handleTextInput",ue=>ue(n,B,$,E)))return;Q=n.state.tr.insertText(E,B,$)}}if(Q||(Q=n.state.tr.replace(B,$,l.doc.slice(d.start-l.from,d.endB-l.from))),l.sel){let E=Md(n,Q.doc,l.sel);E&&!(Vn&&Gr&&n.composing&&E.empty&&(d.start!=d.endB||n.input.lastAndroidDelete<Date.now()-100)&&(E.head==B||E.head==Q.mapping.map($)-1)||Hn&&E.empty&&E.head==B)&&Q.setSelection(E)}he&&Q.ensureMarks(he),n.dispatch(Q.scrollIntoView())}function Md(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:$f(n,e.resolve(t.anchor),e.resolve(t.head))}function C5(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,o,a,l;for(let f=0;f<r.length;f++)i=r[f].removeFromSet(i);for(let f=0;f<t.length;f++)s=t[f].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=f=>f.mark(a.addToSet(f.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=f=>f.mark(a.removeFromSet(f.marks));else return null;let u=[];for(let f=0;f<e.childCount;f++)u.push(l(e.child(f)));if(xe.from(u).eq(n))return{mark:a,type:o}}function _5(n,e,t,r,i){if(!r.parent.isTextblock||t-e<=i.pos-r.pos||zu(r,!0,!1)<i.pos)return!1;let s=n.resolve(e);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=n.resolve(zu(s,!0,!0));return!o.parent.isTextblock||o.pos>t||zu(o,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function zu(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function M5(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a:o,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&n.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}class P5{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new X2,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Ed),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Id(this),Od(this),this.nodeViews=Td(this),this.docView=dd(this.state.doc,Pd(this),qu(this),this.dom,this),this.domObserver=new x5(this,(r,i,s,o)=>L5(this,r,i,s,o)),this.domObserver.start(),Q2(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&wf(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Ed),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){let r=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(I1(this),s=!0),this.state=e;let o=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(o||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let y=Td(this);I5(y,this.nodeViews)&&(this.nodeViews=y,i=!0)}(o||t.handleDOMEvents!=this._props.handleDOMEvents)&&wf(this),this.editable=Id(this),Od(this);let a=qu(this),l=Pd(this),u=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",f=i||!this.docView.matchesNode(e.doc,l,a);(f||!e.selection.eq(r.selection))&&(s=!0);let m=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&g2(this);if(s){this.domObserver.stop();let y=f&&(Hn||Vn)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&O5(r.selection,e.selection);if(f){let d=Vn?this.trackWrites=this.domSelectionRange().focusNode:null;(i||!this.docView.update(e.doc,l,a,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=dd(e.doc,l,a,this.dom,this)),d&&!this.trackWrites&&(y=!0)}y||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&z2(this))?wi(this,y):(v1(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():m&&y2(m)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Xe){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&ld(this,t.getBoundingClientRect(),e)}else ld(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=t?t(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=t?t(a):a))return i}}hasFocus(){if(Hn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&b2(this.dom),wi(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}posAtCoords(e){return N2(this,e)}coordsAtPos(e,t=1){return f1(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return _2(this,t||this.state,e)}destroy(){!this.docView||(Z2(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],qu(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return t5(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return Tn&&this.root.nodeType===11&&f2(this.dom.ownerDocument)==this.dom?N5(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function Pd(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),e.translate="no",n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"&&(e.class+=" "+t[r]),r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),[fr.node(0,n.state.doc.content.size,e)]}function Od(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:fr.widget(n.state.selection.head,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Id(n){return!n.someProp("editable",e=>e(n.state)===!1)}function O5(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Td(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function I5(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function Ed(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var rs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},hc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Dd=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent);typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent);var T5=typeof navigator<"u"&&/Mac/.test(navigator.platform),E5=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),D5=T5||Dd&&+Dd[1]<57;for(var gn=0;gn<10;gn++)rs[48+gn]=rs[96+gn]=String(gn);for(var gn=1;gn<=24;gn++)rs[gn+111]="F"+gn;for(var gn=65;gn<=90;gn++)rs[gn]=String.fromCharCode(gn+32),hc[gn]=String.fromCharCode(gn);for(var Vu in rs)hc.hasOwnProperty(Vu)||(hc[Vu]=rs[Vu]);function F5(n){var e=D5&&(n.ctrlKey||n.altKey||n.metaKey)||E5&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?hc:rs)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const R5=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function B5(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))R5?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),o&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function j5(n){let e=Object.create(null);for(let t in n)e[B5(t)]=n[t];return e}function Hu(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}function q5(n){return new er({props:{handleKeyDown:R1(n)}})}function R1(n){let e=j5(n);return function(t,r){let i=F5(r),s=i.length==1&&i!=" ",o,a=e[Hu(i,r,!s)];if(a&&a(t.state,t.dispatch,t))return!0;if(s&&(r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=rs[r.keyCode])&&o!=i){let l=e[Hu(o,r,!0)];if(l&&l(t.state,t.dispatch,t))return!0}else if(s&&r.shiftKey){let l=e[Hu(i,r,!0)];if(l&&l(t.state,t.dispatch,t))return!0}return!1}}const z5=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0),V5=(n,e,t)=>{let{$cursor:r}=n.selection;if(!r||(t?!t.endOfTextblock("backward",n):r.parentOffset>0))return!1;let i=B1(r);if(!i){let o=r.blockRange(),a=o&&Uo(o);return a==null?!1:(e&&e(n.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&z1(n,i,e))return!0;if(r.parent.content.size==0&&(qo(s,"end")||Xe.isSelectable(s))){let o=Vf(n.doc,r.before(),r.after(),Re.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(qo(s,"end")?lt.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):Xe.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1};function qo(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const H5=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=B1(r)}let o=s&&s.nodeBefore;return!o||!Xe.isSelectable(o)?!1:(e&&e(n.tr.setSelection(Xe.create(n.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function B1(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}const U5=(n,e,t)=>{let{$cursor:r}=n.selection;if(!r||(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size))return!1;let i=j1(r);if(!i)return!1;let s=i.nodeAfter;if(z1(n,i,e))return!0;if(r.parent.content.size==0&&(qo(s,"start")||Xe.isSelectable(s))){let o=Vf(n.doc,r.before(),r.after(),Re.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(qo(s,"start")?lt.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Xe.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},W5=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=j1(r)}let o=s&&s.nodeAfter;return!o||!Xe.isSelectable(o)?!1:(e&&e(n.tr.setSelection(Xe.create(n.doc,s.pos)).scrollIntoView()),!0)};function j1(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const $5=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),s=i&&Uo(i);return s==null?!1:(e&&e(n.tr.lift(i,s).scrollIntoView()),!0)},J5=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function q1(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const G5=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),s=t.indexAfter(-1),o=q1(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,o.createAndFill());l.setSelection(lt.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},K5=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof Or||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=q1(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=n.tr.insert(o,s.createAndFill());a.setSelection(ct.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},Y5=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(Co(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&Uo(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)},X5=(n,e)=>{let{$from:t,to:r}=n.selection,i,s=t.sharedDepth(r);return s==0?!1:(i=t.before(s),e&&e(n.tr.setSelection(Xe.create(n.doc,i))),!0)};function Q5(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Wo(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function z1(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s,o;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(Q5(n,e,t))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(o=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&o.matchType(s[0]||i.type).validEnd){if(t){let m=e.pos+i.nodeSize,y=xe.empty;for(let w=s.length-1;w>=0;w--)y=xe.from(s[w].create(null,y));y=xe.from(r.copy(y));let d=n.tr.step(new fn(e.pos-1,m,e.pos,m,new Re(y,1,0),s.length,!0)),v=m+2*s.length;Wo(d.doc,v)&&d.join(v),t(d.scrollIntoView())}return!0}let l=lt.findFrom(e,1),u=l&&l.$from.blockRange(l.$to),f=u&&Uo(u);if(f!=null&&f>=e.depth)return t&&t(n.tr.lift(u,f).scrollIntoView()),!0;if(a&&qo(i,"start",!0)&&qo(r,"end")){let m=r,y=[];for(;y.push(m),!m.isTextblock;)m=m.lastChild;let d=i,v=1;for(;!d.isTextblock;d=d.firstChild)v++;if(m.canReplace(m.childCount,m.childCount,d.content)){if(t){let w=xe.empty;for(let x=y.length-1;x>=0;x--)w=xe.from(y[x].copy(w));let S=n.tr.step(new fn(e.pos-y.length,e.pos+i.nodeSize,e.pos+v,e.pos+i.nodeSize-v,new Re(w,y.length,0),0,!0));t(S.scrollIntoView())}return!0}}return!1}function V1(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(ct.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}const Z5=V1(-1),eg=V1(1);function tg(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s),a=o&&zf(o,n,e);return a?(r&&r(t.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Fd(n,e=null){return function(t,r){let{from:i,to:s}=t.selection,o=!1;return t.doc.nodesBetween(i,s,(a,l)=>{if(o)return!1;if(!(!a.isTextblock||a.hasMarkup(n,e)))if(a.type==n)o=!0;else{let u=t.doc.resolve(l),f=u.index();o=u.parent.canReplaceWith(f,f+1,n)}}),o?(r&&r(t.tr.setBlockType(i,s,n,e).scrollIntoView()),!0):!1}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function ng(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(n)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let f=t.doc.resolve(o.start-2);l=new ic(f,f,o.depth),o.endIndex<o.parent.childCount&&(o=new ic(i,t.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let u=zf(l,n,e,o);return u?(r&&r(rg(t.tr,o,u,a,n).scrollIntoView()),!0):!1}}function rg(n,e,t,r,i){let s=xe.empty;for(let f=t.length-1;f>=0;f--)s=xe.from(t[f].type.create(t[f].attrs,s));n.step(new fn(e.start-(r?2:0),e.end,e.start,e.end,new Re(s,0,0),t.length,!0));let o=0;for(let f=0;f<t.length;f++)t[f].type==i&&(o=f+1);let a=t.length-o,l=e.start+t.length-(r?2:0),u=e.parent;for(let f=e.startIndex,m=e.endIndex,y=!0;f<m;f++,y=!1)!y&&Co(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=u.child(f).nodeSize;return n}function ig(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?sg(e,t,n,s):og(e,t,s):!0:!1}}function sg(n,e,t,r){let i=n.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new fn(s-1,o,s,o,new Re(xe.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new ic(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=Uo(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(s,-1)-1;return Wo(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function og(n,e,t){let r=n.tr,i=t.parent;for(let d=t.end,v=t.endIndex-1,w=t.startIndex;v>w;v--)d-=i.child(v).nodeSize,r.delete(d-1,d+1);let s=r.doc.resolve(t.start),o=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==i.childCount,u=s.node(-1),f=s.index(-1);if(!u.canReplace(f+(a?0:1),f+1,o.content.append(l?xe.empty:xe.from(i))))return!1;let m=s.pos,y=m+o.nodeSize;return r.step(new fn(m-(a?1:0),y+(l?1:0),m+1,y-1,new Re((a?xe.empty:xe.from(i.copy(xe.empty))).append(l?xe.empty:xe.from(i.copy(xe.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function ag(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==n);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=n)return!1;if(t){let u=l.lastChild&&l.lastChild.type==a.type,f=xe.from(u?n.create():null),m=new Re(xe.from(n.create(null,xe.from(a.type.create(null,f)))),u?3:1,0),y=s.start,d=s.end;t(e.tr.step(new fn(y-(u?3:1),d,y,d,m,1,!0)).scrollIntoView())}return!0}}function Ac(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}class Lc{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...f)=>{const m=l(...f)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),m}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,u=e||s.tr,f=()=>(!l&&t&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(u),a.every(y=>y===!0)),m={...Object.fromEntries(Object.entries(r).map(([y,d])=>[y,(...w)=>{const S=this.buildProps(u,t),x=d(...w)(S);return a.push(x),m}])),run:f};return m}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,u])=>[l,(...f)=>u(...f)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i;s.storedMarks&&e.setStoredMarks(s.storedMarks);const a={tr:e,editor:i,view:o,state:Ac({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,u])=>[l,(...f)=>u(...f)(a)]))}};return a}}class lg{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function qe(n,e,t){return n.config[e]===void 0&&n.parent?qe(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?qe(n.parent,e,t):null}):n.config[e]}function Cc(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function H1(n){const e=[],{nodeExtensions:t,markExtensions:r}=Cc(n),i=[...t,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=qe(o,"addGlobalAttributes",a);if(!l)return;l().forEach(f=>{f.types.forEach(m=>{Object.entries(f.attributes).forEach(([y,d])=>{e.push({type:m,name:y,attribute:{...s,...d}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=qe(o,"addAttributes",a);if(!l)return;const u=l();Object.entries(u).forEach(([f,m])=>{const y={...s,...m};(m==null?void 0:m.isRequired)&&(m==null?void 0:m.default)===void 0&&delete y.default,e.push({type:o.name,name:f,attribute:y})})}),e}function hn(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function Cn(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}i==="class"?r[i]=[r[i],s].join(" "):i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function Sf(n,e){return e.filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>Cn(t,r),{})}function U1(n){return typeof n=="function"}function at(n,e=void 0,...t){return U1(n)?e?n.bind(e)(...t):n(...t):n}function cg(n={}){return Object.keys(n).length===0&&n.constructor===Object}function ug(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Rd(n,e){return n.style?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(t):ug(t.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function Bd(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&cg(t)?!1:t!=null))}function fg(n){var e;const t=H1(n),{nodeExtensions:r,markExtensions:i}=Cc(n),s=(e=r.find(l=>qe(l,"topNode")))===null||e===void 0?void 0:e.name,o=Object.fromEntries(r.map(l=>{const u=t.filter(S=>S.type===l.name),f={name:l.name,options:l.options,storage:l.storage},m=n.reduce((S,x)=>{const _=qe(x,"extendNodeSchema",f);return{...S,..._?_(l):{}}},{}),y=Bd({...m,content:at(qe(l,"content",f)),marks:at(qe(l,"marks",f)),group:at(qe(l,"group",f)),inline:at(qe(l,"inline",f)),atom:at(qe(l,"atom",f)),selectable:at(qe(l,"selectable",f)),draggable:at(qe(l,"draggable",f)),code:at(qe(l,"code",f)),defining:at(qe(l,"defining",f)),isolating:at(qe(l,"isolating",f)),attrs:Object.fromEntries(u.map(S=>{var x;return[S.name,{default:(x=S==null?void 0:S.attribute)===null||x===void 0?void 0:x.default}]}))}),d=at(qe(l,"parseHTML",f));d&&(y.parseDOM=d.map(S=>Rd(S,u)));const v=qe(l,"renderHTML",f);v&&(y.toDOM=S=>v({node:S,HTMLAttributes:Sf(S,u)}));const w=qe(l,"renderText",f);return w&&(y.toText=w),[l.name,y]})),a=Object.fromEntries(i.map(l=>{const u=t.filter(w=>w.type===l.name),f={name:l.name,options:l.options,storage:l.storage},m=n.reduce((w,S)=>{const x=qe(S,"extendMarkSchema",f);return{...w,...x?x(l):{}}},{}),y=Bd({...m,inclusive:at(qe(l,"inclusive",f)),excludes:at(qe(l,"excludes",f)),group:at(qe(l,"group",f)),spanning:at(qe(l,"spanning",f)),code:at(qe(l,"code",f)),attrs:Object.fromEntries(u.map(w=>{var S;return[w.name,{default:(S=w==null?void 0:w.attribute)===null||S===void 0?void 0:S.default}]}))}),d=at(qe(l,"parseHTML",f));d&&(y.parseDOM=d.map(w=>Rd(w,u)));const v=qe(l,"renderHTML",f);return v&&(y.toDOM=w=>v({mark:w,HTMLAttributes:Sf(w,u)})),[l.name,y]}));return new Cm({topNode:s,nodes:o,marks:a})}function Uu(n,e){return e.nodes[n]||e.marks[n]||null}function jd(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}const hg=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,u;const f=((u=(l=i.type.spec).toText)===null||u===void 0?void 0:u.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";t+=f.slice(0,Math.max(0,r-s))}),t};function Zf(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class _c{constructor(e){this.find=e.find,this.handler=e.handler}}const dg=(n,e)=>{if(Zf(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[];return r.push(t.text),r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Wu(n){var e;const{editor:t,from:r,to:i,text:s,rules:o,plugin:a}=n,{view:l}=t;if(l.composing)return!1;const u=l.state.doc.resolve(r);if(u.parent.type.spec.code||!!(!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(y=>y.type.spec.code)))return!1;let f=!1;const m=hg(u)+s;return o.forEach(y=>{if(f)return;const d=dg(m,y.find);if(!d)return;const v=l.state.tr,w=Ac({state:l.state,transaction:v}),S={from:r-(d[0].length-s.length),to:i},{commands:x,chain:_,can:B}=new Lc({editor:t,state:w});y.handler({state:w,range:S,match:d,commands:x,chain:_,can:B})===null||!v.steps.length||(v.setMeta(a,{transform:v,from:r,to:i,text:s}),l.dispatch(v),f=!0)}),f}function pg(n){const{editor:e,rules:t}=n,r=new er({state:{init(){return null},apply(i,s){const o=i.getMeta(r);return o||(i.selectionSet||i.docChanged?null:s)}},props:{handleTextInput(i,s,o,a){return Wu({editor:e,from:s,to:o,text:a,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Wu({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Wu({editor:e,from:o.pos,to:o.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function mg(n){return typeof n=="number"}class gg{constructor(e){this.find=e.find,this.handler=e.handler}}const yg=(n,e)=>{if(Zf(e))return[...n.matchAll(e)];const t=e(n);return t?t.map(r=>{const i=[];return i.push(r.text),i.index=r.index,i.input=n,i.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(r.replaceWith)),i}):[]};function bg(n){const{editor:e,state:t,from:r,to:i,rule:s}=n,{commands:o,chain:a,can:l}=new Lc({editor:e,state:t}),u=[];return t.doc.nodesBetween(r,i,(m,y)=>{if(!m.isTextblock||m.type.spec.code)return;const d=Math.max(r,y),v=Math.min(i,y+m.content.size),w=m.textBetween(d-y,v-y,void 0,"\uFFFC");yg(w,s.find).forEach(x=>{if(x.index===void 0)return;const _=d+x.index+1,B=_+x[0].length,$={from:t.tr.mapping.map(_),to:t.tr.mapping.map(B)},Q=s.handler({state:t,range:$,match:x,commands:o,chain:a,can:l});u.push(Q)})}),u.every(m=>m!==null)}function vg(n){const{editor:e,rules:t}=n;let r=null,i=!1,s=!1;return t.map(a=>new er({view(l){const u=f=>{var m;r=!((m=l.dom.parentElement)===null||m===void 0)&&m.contains(f.target)?l.dom.parentElement:null};return window.addEventListener("dragstart",u),{destroy(){window.removeEventListener("dragstart",u)}}},props:{handleDOMEvents:{drop:l=>(s=r===l.dom.parentElement,!1),paste:(l,u)=>{var f;const m=(f=u.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(l,u,f)=>{const m=l[0],y=m.getMeta("uiEvent")==="paste"&&!i,d=m.getMeta("uiEvent")==="drop"&&!s;if(!y&&!d)return;const v=u.doc.content.findDiffStart(f.doc.content),w=u.doc.content.findDiffEnd(f.doc.content);if(!mg(v)||!w||v===w.b)return;const S=f.tr,x=Ac({state:f,transaction:S});if(!(!bg({editor:e,state:x,from:Math.max(v-1,0),to:w.b-1,rule:a})||!S.steps.length))return S}}))}function wg(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return[...new Set(e)]}class ko{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=ko.resolve(e),this.schema=fg(this.extensions),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const s={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:Uu(r.name,this.schema)};r.type==="mark"&&((i=at(qe(r,"keepOnSplit",s)))!==null&&i!==void 0?i:!0)&&this.splittableMarks.push(r.name);const o=qe(r,"onBeforeCreate",s);o&&this.editor.on("beforeCreate",o);const a=qe(r,"onCreate",s);a&&this.editor.on("create",a);const l=qe(r,"onUpdate",s);l&&this.editor.on("update",l);const u=qe(r,"onSelectionUpdate",s);u&&this.editor.on("selectionUpdate",u);const f=qe(r,"onTransaction",s);f&&this.editor.on("transaction",f);const m=qe(r,"onFocus",s);m&&this.editor.on("focus",m);const y=qe(r,"onBlur",s);y&&this.editor.on("blur",y);const d=qe(r,"onDestroy",s);d&&this.editor.on("destroy",d)})}static resolve(e){const t=ko.sort(ko.flatten(e)),r=wg(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=qe(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=qe(r,"priority")||100,o=qe(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Uu(t.name,this.schema)},i=qe(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=ko.sort([...this.extensions].reverse()),r=[],i=[],s=t.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:Uu(o.name,this.schema)},l=[],u=qe(o,"addKeyboardShortcuts",a);let f={};if(o.type==="mark"&&o.config.exitable&&(f.ArrowRight=()=>xi.handleExit({editor:e,mark:o})),u){const w=Object.fromEntries(Object.entries(u()).map(([S,x])=>[S,()=>x({editor:e})]));f={...f,...w}}const m=q5(f);l.push(m);const y=qe(o,"addInputRules",a);jd(o,e.options.enableInputRules)&&y&&r.push(...y());const d=qe(o,"addPasteRules",a);jd(o,e.options.enablePasteRules)&&d&&i.push(...d());const v=qe(o,"addProseMirrorPlugins",a);if(v){const w=v();l.push(...w)}return l}).flat();return[pg({editor:e,rules:r}),...vg({editor:e,rules:i}),...s]}get attributes(){return H1(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Cc(this.extensions);return Object.fromEntries(t.filter(r=>!!qe(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:hn(r.name,this.schema)},o=qe(r,"addNodeView",s);if(!o)return[];const a=(l,u,f,m)=>{const y=Sf(l,i);return o()({editor:e,node:l,getPos:f,decorations:m,HTMLAttributes:y,extension:r})};return[r.name,a]}))}}function xg(n){return Object.prototype.toString.call(n).slice(8,-1)}function $u(n){return xg(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Mc(n,e){const t={...n};return $u(n)&&$u(e)&&Object.keys(e).forEach(r=>{$u(e[r])?r in n?t[r]=Mc(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}class Un{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=at(qe(this,"addOptions",{name:this.name}))),this.storage=at(qe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Un(e)}configure(e={}){const t=this.extend();return t.options=Mc(this.options,e),t.storage=at(qe(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Un(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=at(qe(t,"addOptions",{name:t.name})),t.storage=at(qe(t,"addStorage",{name:t.name,options:t.options})),t}}function W1(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(u,f,m,y)=>{var d;const v=o==null?void 0:o[u.type.name];v?(u.isBlock&&!l&&(a+=s,l=!0),m&&(a+=v({node:u,pos:f,parent:m,index:y,range:e}))):u.isText?(a+=(d=u==null?void 0:u.text)===null||d===void 0?void 0:d.slice(Math.max(r,f)-f,i-f),l=!1):u.isBlock&&!l&&(a+=s,l=!0)}),a}function $1(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const Sg=Un.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new er({key:new ki("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(f=>f.$from.pos)),a=Math.max(...s.map(f=>f.$to.pos)),l=$1(t);return W1(r,{from:o,to:a},{textSerializers:l})}}})]}}),Ng=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),kg=(n=!1)=>({commands:e})=>e.setContent("",n),Ag=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:u,mapping:f}=e,m=u.resolve(f.map(l)),y=u.resolve(f.map(l+a.nodeSize)),d=m.blockRange(y);if(!d)return;const v=Uo(d);if(a.type.isTextblock){const{defaultType:w}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(d.start,w)}(v||v===0)&&e.lift(d,v)})}),!0},Lg=n=>e=>n(e),Cg=()=>({state:n,dispatch:e})=>K5(n,e),_g=n=>({tr:e,state:t,dispatch:r})=>{const i=hn(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),u=s.after(o);e.delete(l,u).scrollIntoView()}return!0}return!1},Mg=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},Pg=()=>({state:n,dispatch:e})=>z5(n,e),Og=()=>({commands:n})=>n.keyboardShortcut("Enter"),Ig=()=>({state:n,dispatch:e})=>G5(n,e);function dc(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:Zf(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function Nf(n,e,t={}){return n.find(r=>r.type===e&&dc(r.attrs,t))}function Tg(n,e,t={}){return!!Nf(n,e,t)}function eh(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=Nf([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(Nf([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&Tg([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function ls(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const Eg=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=ls(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:u,to:f}=a;if(i){const m=eh(l,s,e);if(m&&m.from<=u&&m.to>=f){const y=ct.create(o,m.from,m.to);t.setSelection(y)}}return!0},Dg=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function J1(n){return n instanceof ct}function As(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function G1(n,e=null){if(!e)return null;const t=lt.atStart(n),r=lt.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?ct.create(n,As(0,i,s),As(n.content.size,i,s)):ct.create(n,As(e,i,s),As(e,i,s))}function th(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Fg=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{th()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!J1(t.state.selection))return o(),!0;const a=G1(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Rg=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),Bg=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e);function qd(n){const e=`<body>${n}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function pc(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)?xe.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),pc("",e,t)}if(typeof n=="string"){const r=Do.fromSchema(e);return t.slice?r.parseSlice(qd(n),t.parseOptions).content:r.parse(qd(n),t.parseOptions)}return pc("",e,t)}function jg(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof Ln||i instanceof fn))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,u,f)=>{o===0&&(o=f)}),n.setSelection(lt.near(n.doc.resolve(o),t))}const qg=n=>n.toString().startsWith("<"),zg=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=pc(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:n,u=!0,f=!0;if((qg(o)?o:[o]).forEach(y=>{y.check(),u=u?y.isText&&y.marks.length===0:!1,f=f?y.isBlock:!1}),a===l&&f){const{parent:y}=r.doc.resolve(a);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(a-=1,l+=1)}u?r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&jg(r,r.steps.length-1,-1)}return!0},Vg=()=>({state:n,dispatch:e})=>V5(n,e),Hg=()=>({state:n,dispatch:e})=>U5(n,e);function K1(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Ug(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))th()||K1()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const Wg=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=Ug(n).split(/-(?!$)/),o=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",u=>u(t,a))});return l==null||l.steps.forEach(u=>{const f=u.map(r.mapping);f&&i&&r.maybeStep(f)}),!0};function qa(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?hn(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(m,y)=>{if(m.isText)return;const d=Math.max(r,y),v=Math.min(i,y+m.nodeSize);a.push({node:m,from:d,to:v})});const l=i-r,u=a.filter(m=>o?o.name===m.node.type.name:!0).filter(m=>dc(m.node.attrs,t,{strict:!1}));return s?!!u.length:u.reduce((m,y)=>m+y.to-y.from,0)>=l}const $g=(n,e={})=>({state:t,dispatch:r})=>{const i=hn(n,t.schema);return qa(t,i,e)?$5(t,r):!1},Jg=()=>({state:n,dispatch:e})=>Y5(n,e),Gg=n=>({state:e,dispatch:t})=>{const r=hn(n,e.schema);return ig(r)(e,t)},Kg=()=>({state:n,dispatch:e})=>J5(n,e);function Pc(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function zd(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const Yg=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=Pc(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=hn(n,r.schema)),a==="mark"&&(o=ls(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(u,f)=>{s&&s===u.type&&t.setNodeMarkup(f,void 0,zd(u.attrs,e)),o&&u.marks.length&&u.marks.forEach(m=>{o===m.type&&t.addMark(f,f+u.nodeSize,o.create(zd(m.attrs,e)))})})}),!0):!1},Xg=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),Qg=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),Zg=()=>({state:n,dispatch:e})=>H5(n,e),ey=()=>({state:n,dispatch:e})=>W5(n,e),ty=()=>({state:n,dispatch:e})=>X5(n,e),ny=()=>({state:n,dispatch:e})=>eg(n,e),ry=()=>({state:n,dispatch:e})=>Z5(n,e);function Y1(n,e,t={}){return pc(n,e,{slice:!1,parseOptions:t})}const iy=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=Y1(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function sy(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function oy(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function nh(n){return e=>oy(e.$from,n)}function ay(n,e){const t=Kr.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}function ly(n,e){const t={from:0,to:n.content.size};return W1(n,t,e)}function X1(n,e){const t=ls(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function cy(n,e){const t=hn(e,n.schema),{from:r,to:i}=n.selection,s=[];n.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===t.name);return o?{...o.attrs}:{}}function uy(n,e){const t=Pc(typeof e=="string"?e:e.name,n.schema);return t==="node"?cy(n,e):t==="mark"?X1(n,e):{}}function Q1(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const s=t.resolve(n-1),o=eh(s,i.type);!o||r.push({mark:i,...o})}):t.nodesBetween(n,e,(i,s)=>{r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function kf(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?ls(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(m=>s?s.name===m.type.name:!0).find(m=>dc(m.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:m,$to:y})=>{const d=m.pos,v=y.pos;n.doc.nodesBetween(d,v,(w,S)=>{if(!w.isText&&!w.marks.length)return;const x=Math.max(d,S),_=Math.min(v,S+w.nodeSize),B=_-x;o+=B,a.push(...w.marks.map($=>({mark:$,from:x,to:_})))})}),o===0)return!1;const l=a.filter(m=>s?s.name===m.mark.type.name:!0).filter(m=>dc(m.mark.attrs,t,{strict:!1})).reduce((m,y)=>m+y.to-y.from,0),u=a.filter(m=>s?m.mark.type!==s&&m.mark.type.excludes(s):!0).reduce((m,y)=>m+y.to-y.from,0);return(l>0?l+u:l)>=o}function fy(n,e,t={}){if(!e)return qa(n,null,t)||kf(n,null,t);const r=Pc(e,n.schema);return r==="node"?qa(n,e,t):r==="mark"?kf(n,e,t):!1}function Vd(n,e){const{nodeExtensions:t}=Cc(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=at(qe(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function hy(n){var e;const t=(e=n.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=n.toJSON();return JSON.stringify(t)===JSON.stringify(r)}function dy(n,e,t){var r;const{selection:i}=e;let s=null;if(J1(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let u=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(f,m,y)=>{if(u)return!1;if(f.isInline){const d=!y||y.type.allowsMarkType(t),v=!!t.isInSet(f.marks)||!f.marks.some(w=>w.type.excludes(t));u=d&&v}return!u}),u})}const py=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=ls(n,r.schema);if(i)if(o){const u=X1(r,l);t.addStoredMark(l.create({...u,...e}))}else a.forEach(u=>{const f=u.$from.pos,m=u.$to.pos;r.doc.nodesBetween(f,m,(y,d)=>{const v=Math.max(d,f),w=Math.min(d+y.nodeSize,m);y.marks.find(x=>x.type===l)?y.marks.forEach(x=>{l===x.type&&t.addMark(v,w,l.create({...x.attrs,...e}))}):t.addMark(v,w,l.create(e))})});return dy(r,t,l)},my=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),gy=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=hn(n,t.schema);return s.isTextblock?i().command(({commands:o})=>Fd(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>Fd(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},yy=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=As(n,0,r.content.size),s=Xe.create(r,i);e.setSelection(s)}return!0},by=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=ct.atStart(r).from,a=ct.atEnd(r).to,l=As(i,o,a),u=As(s,o,a),f=ct.create(r,l,u);e.setSelection(f)}return!0},vy=n=>({state:e,dispatch:t})=>{const r=hn(n,e.schema);return ag(r)(e,t)};function Wl(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function Hd(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const wy=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,u=i.extensionManager.attributes,f=Wl(u,a.node().type.name,a.node().attrs);if(s instanceof Xe&&s.node.isBlock)return!a.parentOffset||!Co(o,a.pos)?!1:(r&&(n&&Hd(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const m=l.parentOffset===l.parent.content.size;s instanceof ct&&e.deleteSelection();const y=a.depth===0?void 0:sy(a.node(-1).contentMatchAt(a.indexAfter(-1)));let d=m&&y?[{type:y,attrs:f}]:void 0,v=Co(e.doc,e.mapping.map(a.pos),1,d);if(!d&&!v&&Co(e.doc,e.mapping.map(a.pos),1,y?[{type:y}]:void 0)&&(v=!0,d=y?[{type:y,attrs:f}]:void 0),v&&(e.split(e.mapping.map(a.pos),1,d),y&&!m&&!a.parentOffset&&a.parent.type!==y)){const w=e.mapping.map(a.before()),S=e.doc.resolve(w);a.node(-1).canReplaceWith(S.index(),S.index()+1,y)&&e.setNodeMarkup(e.mapping.map(a.before()),y)}n&&Hd(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},xy=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=hn(n,t.schema),{$from:a,$to:l}=t.selection,u=t.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(l))return!1;const f=a.node(-1);if(f.type!==o)return!1;const m=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let S=xe.empty;const x=a.index(-1)?1:a.index(-2)?2:3;for(let Y=a.depth-x;Y>=a.depth-3;Y-=1)S=xe.from(a.node(Y).copy(S));const _=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,B=Wl(m,a.node().type.name,a.node().attrs),$=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(B))||void 0;S=S.append(xe.from(o.createAndFill(null,$)||void 0));const Q=a.before(a.depth-(x-1));e.replace(Q,a.after(-_),new Re(S,4-x,0));let he=-1;e.doc.nodesBetween(Q,e.doc.content.size,(Y,E)=>{if(he>-1)return!1;Y.isTextblock&&Y.content.size===0&&(he=E+1)}),he>-1&&e.setSelection(ct.near(e.doc.resolve(he))),e.scrollIntoView()}return!0}const y=l.pos===a.end()?f.contentMatchAt(0).defaultType:null,d=Wl(m,f.type.name,f.attrs),v=Wl(m,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const w=y?[{type:o,attrs:d},{type:y,attrs:v}]:[{type:o,attrs:d}];return Co(e.doc,a.pos,2)?(r&&e.split(a.pos,2,w).scrollIntoView(),!0):!1},Ud=(n,e)=>{const t=nh(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Wo(n.doc,t.pos)&&n.join(t.pos),!0},Wd=(n,e)=>{const t=nh(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Wo(n.doc,r)&&n.join(r),!0},Sy=(n,e)=>({editor:t,tr:r,state:i,dispatch:s,chain:o,commands:a,can:l})=>{const{extensions:u}=t.extensionManager,f=hn(n,i.schema),m=hn(e,i.schema),{selection:y}=i,{$from:d,$to:v}=y,w=d.blockRange(v);if(!w)return!1;const S=nh(x=>Vd(x.type.name,u))(y);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===f)return a.liftListItem(m);if(Vd(S.node.type.name,u)&&f.validContent(S.node.content)&&s)return o().command(()=>(r.setNodeMarkup(S.pos,f),!0)).command(()=>Ud(r,f)).command(()=>Wd(r,f)).run()}return o().command(()=>l().wrapInList(f)?!0:a.clearNodes()).wrapInList(f).command(()=>Ud(r,f)).command(()=>Wd(r,f)).run()},Ny=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=ls(n,r.schema);return kf(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},ky=(n,e,t={})=>({state:r,commands:i})=>{const s=hn(n,r.schema),o=hn(e,r.schema);return qa(r,s,t)?i.setNode(o):i.setNode(s,t)},Ay=(n,e={})=>({state:t,commands:r})=>{const i=hn(n,t.schema);return qa(t,i,e)?r.lift(i):r.wrapIn(i,e)},Ly=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},Cy=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},_y=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=ls(n,r.schema),{$from:u,empty:f,ranges:m}=a;if(!i)return!0;if(f&&o){let{from:y,to:d}=a;const v=(s=u.marks().find(S=>S.type===l))===null||s===void 0?void 0:s.attrs,w=eh(u,l,v);w&&(y=w.from,d=w.to),t.removeMark(y,d,l)}else m.forEach(y=>{t.removeMark(y.$from.pos,y.$to.pos,l)});return t.removeStoredMark(l),!0},My=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=Pc(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=hn(n,r.schema)),a==="mark"&&(o=ls(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const u=l.$from.pos,f=l.$to.pos;r.doc.nodesBetween(u,f,(m,y)=>{s&&s===m.type&&t.setNodeMarkup(y,void 0,{...m.attrs,...e}),o&&m.marks.length&&m.marks.forEach(d=>{if(o===d.type){const v=Math.max(y,u),w=Math.min(y+m.nodeSize,f);t.addMark(v,w,o.create({...d.attrs,...e}))}})})}),!0):!1},Py=(n,e={})=>({state:t,dispatch:r})=>{const i=hn(n,t.schema);return tg(i,e)(t,r)},Oy=(n,e={})=>({state:t,dispatch:r})=>{const i=hn(n,t.schema);return ng(i,e)(t,r)};var Iy=Object.freeze({__proto__:null,blur:Ng,clearContent:kg,clearNodes:Ag,command:Lg,createParagraphNear:Cg,deleteNode:_g,deleteRange:Mg,deleteSelection:Pg,enter:Og,exitCode:Ig,extendMarkRange:Eg,first:Dg,focus:Fg,forEach:Rg,insertContent:Bg,insertContentAt:zg,joinBackward:Vg,joinForward:Hg,keyboardShortcut:Wg,lift:$g,liftEmptyBlock:Jg,liftListItem:Gg,newlineInCode:Kg,resetAttributes:Yg,scrollIntoView:Xg,selectAll:Qg,selectNodeBackward:Zg,selectNodeForward:ey,selectParentNode:ty,selectTextblockEnd:ny,selectTextblockStart:ry,setContent:iy,setMark:py,setMeta:my,setNode:gy,setNodeSelection:yy,setTextSelection:by,sinkListItem:vy,splitBlock:wy,splitListItem:xy,toggleList:Sy,toggleMark:Ny,toggleNode:ky,toggleWrap:Ay,undoInputRule:Ly,unsetAllMarks:Cy,unsetMark:_y,updateAttributes:My,wrapIn:Py,wrapInList:Oy});const Ty=Un.create({name:"commands",addCommands(){return{...Iy}}}),Ey=Un.create({name:"editable",addProseMirrorPlugins(){return[new er({key:new ki("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Dy=Un.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new er({key:new ki("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),Fy=Un.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:u}=a,{empty:f,$anchor:m}=l,{pos:y,parent:d}=m,v=lt.atStart(u).from===y;return!f||!v||!d.type.isTextblock||d.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return th()||K1()?s:i},addProseMirrorPlugins(){return[new er({key:new ki("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(v=>v.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=lt.atStart(e.doc).from,l=lt.atEnd(e.doc).to,u=s===a&&o===l,f=t.doc.textBetween(0,t.doc.content.size," "," ").length===0;if(i||!u||!f)return;const m=t.tr,y=Ac({state:t,transaction:m}),{commands:d}=new Lc({editor:this.editor,state:y});if(d.clearNodes(),!!m.steps.length)return m}})]}}),Ry=Un.create({name:"tabindex",addProseMirrorPlugins(){return[new er({key:new ki("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var By=Object.freeze({__proto__:null,ClipboardTextSerializer:Sg,Commands:Ty,Editable:Ey,FocusEvents:Dy,Keymap:Fy,Tabindex:Ry});const jy=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function qy(n,e){const t=document.querySelector("style[data-tiptap-style]");if(t!==null)return t;const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute("data-tiptap-style",""),r.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(r),r}class zy extends lg{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=qy(jy,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e){this.setOptions({editable:e}),this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=U1(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const t=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(t))});this.view.updateState(r)}createExtensionManager(){const t=[...this.options.enableCoreExtensions?Object.values(By):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new ko(t,this)}createCommandManager(){this.commandManager=new Lc({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=Y1(this.options.content,this.schema,this.options.parseOptions),t=G1(e,this.options.autofocus);this.view=new P5(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:xo.create({doc:e,selection:t||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return uy(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return fy(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return ay(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return ly(this.state.doc,{blockSeparator:t,textSerializers:{...r,...$1(this.schema)}})}get isEmpty(){return hy(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}}function Ds(n){return new _c({find:n.find,handler:({state:e,range:t,match:r})=>{const i=at(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];let l=t.to;if(o){const u=a.search(/\S/),f=t.from+a.indexOf(o),m=f+o.length;if(Q1(t.from,t.to,e.doc).filter(d=>d.mark.type.excluded.find(w=>w===n.type&&w!==d.mark.type)).filter(d=>d.to>f).length)return null;m<t.to&&s.delete(m,t.to),f>t.from&&s.delete(t.from+u,f),l=t.from+u+o.length,s.addMark(t.from+u,l,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}function Vy(n){return new _c({find:n.find,handler:({state:e,range:t,match:r})=>{const i=at(n.getAttributes,void 0,r)||{},{tr:s}=e,o=t.from;let a=t.to;if(r[1]){const l=r[0].lastIndexOf(r[1]);let u=o+l;u>a?u=a:a=u+r[1].length;const f=r[0][r[0].length-1];s.insertText(f,o+r[0].length-1),s.replaceWith(u,a,n.type.create(i))}else r[0]&&s.replaceWith(o,a,n.type.create(i))}})}function Af(n){return new _c({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),s=at(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,s)}})}function rh(n){return new _c({find:n.find,handler:({state:e,range:t,match:r})=>{const i=at(n.getAttributes,void 0,r)||{},s=e.tr.delete(t.from,t.to),a=s.doc.resolve(t.from).blockRange(),l=a&&zf(a,n.type,i);if(!l)return null;s.wrap(a,l);const u=s.doc.resolve(t.from-1).nodeBefore;u&&u.type===n.type&&Wo(s.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,u))&&s.join(t.from-1)}})}class xi{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=at(qe(this,"addOptions",{name:this.name}))),this.storage=at(qe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new xi(e)}configure(e={}){const t=this.extend();return t.options=Mc(this.options,e),t.storage=at(qe(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new xi(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=at(qe(t,"addOptions",{name:t.name})),t.storage=at(qe(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(u=>(u==null?void 0:u.type.name)===t.name))return!1;const l=o.find(u=>(u==null?void 0:u.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}class Wn{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=at(qe(this,"addOptions",{name:this.name}))),this.storage=at(qe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Wn(e)}configure(e={}){const t=this.extend();return t.options=Mc(this.options,e),t.storage=at(qe(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Wn(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=at(qe(t,"addOptions",{name:t.name})),t.storage=at(qe(t,"addStorage",{name:t.name,options:t.options})),t}}function Fs(n){return new gg({find:n.find,handler:({state:e,range:t,match:r})=>{const i=at(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];let l=t.to;if(o){const u=a.search(/\S/),f=t.from+a.indexOf(o),m=f+o.length;if(Q1(t.from,t.to,e.doc).filter(d=>d.mark.type.excluded.find(w=>w===n.type&&w!==d.mark.type)).filter(d=>d.to>f).length)return null;m<t.to&&s.delete(m,t.to),f>t.from&&s.delete(t.from+u,f),l=t.from+u+o.length,s.addMark(t.from+u,l,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}const Hy=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,Uy=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,Wy=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,$y=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,Z1=xi.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",Cn(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ds({find:Hy,type:this.type}),Ds({find:Wy,type:this.type})]},addPasteRules(){return[Fs({find:Uy,type:this.type}),Fs({find:$y,type:this.type})]}}),Jy=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))$/,Gy=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))/g,Ky=xi.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:n=>n.getAttribute("data-color")||n.style.backgroundColor,renderHTML:n=>n.color?{"data-color":n.color,style:`background-color: ${n.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:n}){return["mark",Cn(this.options.HTMLAttributes,n),0]},addCommands(){return{setHighlight:n=>({commands:e})=>e.setMark(this.name,n),toggleHighlight:n=>({commands:e})=>e.toggleMark(this.name,n),unsetHighlight:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Ds({find:Jy,type:this.type})]},addPasteRules(){return[Fs({find:Gy,type:this.type})]}}),Yy=/^\s*>\s$/,Xy=Wn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",Cn(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[rh({find:Yy,type:this.type})]}}),Qy=/^\s*([-+*])\s$/,Zy=Wn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Cn(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[rh({find:Qy,type:this.type})]}}),eb=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,tb=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,nb=xi.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Cn(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ds({find:eb,type:this.type})]},addPasteRules(){return[Fs({find:tb,type:this.type})]}}),rb=/^```([a-z]+)?[\s\n]$/,ib=/^~~~([a-z]+)?[\s\n]$/,sb=Wn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,s=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(t)).map(o=>o.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Cn(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:n.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:s}=t;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0||r.nodeAt(a)?!1:n.commands.exitCode()}}},addInputRules(){return[Af({find:rb,type:this.type,getAttributes:n=>({language:n[1]})}),Af({find:ib,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new er({key:new ki("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!t||!s)return!1;const{tr:o}=n.state;return o.replaceSelectionWith(this.type.create({language:s})),o.setSelection(ct.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.insertText(t.replace(/\r\n?/g,`
`)),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}}),ob=Wn.create({name:"doc",topNode:!0,content:"block+"});function ab(n={}){return new er({view(e){return new lb(e,n)}})}class lb{constructor(e,t){this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=t.width||1,this.color=t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(r=>{let i=s=>{this[r](s)};return e.dom.addEventListener(r,i),{name:r,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t;if(!e.parent.inlineContent){let o=e.nodeBefore,a=e.nodeAfter;if(o||a){let l=this.editorView.nodeDOM(this.cursorPos-(o?o.nodeSize:0)).getBoundingClientRect(),u=o?l.bottom:l.top;o&&a&&(u=(u+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:l.left,right:l.right,top:u-this.width/2,bottom:u+this.width/2}}}if(!t){let o=this.editorView.coordsAtPos(this.cursorPos);t={left:o.left-this.width/2,right:o.left+this.width/2,top:o.top,bottom:o.bottom}}let r=this.editorView.dom.offsetParent;this.element||(this.element=r.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);let i,s;if(!r||r==document.body&&getComputedStyle(r).position=="static")i=-pageXOffset,s=-pageYOffset;else{let o=r.getBoundingClientRect();i=o.left-r.scrollLeft,s=o.top-r.scrollTop}this.element.style.left=t.left-i+"px",this.element.style.top=t.top-s+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,t):i;if(t&&!s){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&(o=Zp(this.editorView.state.doc,o,this.editorView.dragging.slice),o==null))return this.setCursor(null);this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const cb=Un.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[ab(this.options)]}});class Ht extends lt{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Ht.valid(r)?new Ht(r):lt.near(r)}content(){return Re.empty}eq(e){return e instanceof Ht&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ht(e.resolve(t.pos))}getBookmark(){return new ih(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!ub(e)||!fb(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Ht.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(t>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=t;let l=e.doc.resolve(i);if(Ht.valid(l))return l}for(;;){let o=t>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Xe.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*t),r=!1;continue e}break}s=o,i+=t;let a=e.doc.resolve(i);if(Ht.valid(a))return a}return null}}}Ht.prototype.visible=!1;Ht.findFrom=Ht.findGapCursorFrom;lt.jsonID("gapcursor",Ht);class ih{constructor(e){this.pos=e}map(e){return new ih(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Ht.valid(t)?new Ht(t):lt.near(t)}}function ub(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function fb(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function hb(){return new er({props:{decorations:gb,createSelectionBetween(n,e,t){return e.pos==t.pos&&Ht.valid(t)?new Ht(t):null},handleClick:pb,handleKeyDown:db,handleDOMEvents:{beforeinput:mb}}})}const db=R1({ArrowLeft:Rl("horiz",-1),ArrowRight:Rl("horiz",1),ArrowUp:Rl("vert",-1),ArrowDown:Rl("vert",1)});function Rl(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof ct){if(!s.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let u=Ht.findGapCursorFrom(a,e,l);return u?(i&&i(r.tr.setSelection(new Ht(u))),!0):!1}}function pb(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Ht.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&Xe.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Ht(r))),!0)}function mb(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Ht))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=xe.empty;for(let o=r.length-1;o>=0;o--)i=xe.from(r[o].createAndFill(null,i));let s=n.state.tr.replace(t.pos,t.pos,new Re(i,0,0));return s.setSelection(ct.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function gb(n){if(!(n.selection instanceof Ht))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",rn.create(n.doc,[fr.widget(n.selection.head,e,{key:"gapcursor"})])}const yb=Un.create({name:"gapCursor",addProseMirrorPlugins(){return[hb()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=at(qe(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),bb=Wn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Cn(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:s}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:f})=>{if(f&&l&&o){const m=l.filter(y=>a.includes(y.type.name));u.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),vb=Wn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Cn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Af({find:new RegExp(`^(#{1,${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var mc=200,yn=function(){};yn.prototype.append=function(e){return e.length?(e=yn.from(e),!this.length&&e||e.length<mc&&this.leafAppend(e)||this.length<mc&&e.leafPrepend(this)||this.appendInner(e)):this};yn.prototype.prepend=function(e){return e.length?yn.from(e).append(this):this};yn.prototype.appendInner=function(e){return new wb(this,e)};yn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?yn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};yn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};yn.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};yn.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},t,r),i};yn.from=function(e){return e instanceof yn?e:e&&e.length?new e0(e):yn.empty};var e0=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=mc)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=mc)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(yn);yn.empty=new e0([]);var wb=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(yn),t0=yn;const xb=500;class Pr{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;t&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,u=[],f=[];return this.items.forEach((m,y)=>{if(!m.step){i||(i=this.remapping(r,y+1),s=i.maps.length),s--,f.push(m);return}if(i){f.push(new $r(m.map));let d=m.step.map(i.slice(s)),v;d&&o.maybeStep(d).doc&&(v=o.mapping.maps[o.mapping.maps.length-1],u.push(new $r(v,void 0,void 0,u.length+f.length))),s--,v&&i.appendMap(v,s)}else o.maybeStep(m.step);if(m.selection)return a=i?m.selection.map(i.slice(s)):m.selection,l=new Pr(this.items.slice(0,r).append(f.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,t,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let f=0;f<e.steps.length;f++){let m=e.steps[f].invert(e.docs[f]),y=new $r(e.mapping.maps[f],m,t),d;(d=l&&l.merge(y))&&(y=d,f?s.pop():a=a.slice(0,a.length-1)),s.push(y),t&&(o++,t=void 0),i||(l=y)}let u=o-r.depth;return u>Nb&&(a=Sb(a,u),o-=u),new Pr(a.append(s),o)}remapping(e,t){let r=new Lo;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,t),r}addMaps(e){return this.eventCount==0?this:new Pr(this.items.append(e.map(t=>new $r(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(y=>{y.selection&&a--},i);let l=t;this.items.forEach(y=>{let d=s.getMirror(--l);if(d==null)return;o=Math.min(o,d);let v=s.maps[d];if(y.step){let w=e.steps[d].invert(e.docs[d]),S=y.selection&&y.selection.map(s.slice(l+1,d));S&&a++,r.push(new $r(v,w,S))}else r.push(new $r(v))},i);let u=[];for(let y=t;y<o;y++)u.push(new $r(s.maps[y]));let f=this.items.slice(0,i).append(u).append(r),m=new Pr(f,a);return m.emptyItemCount()>xb&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(t.slice(r)),u=l&&l.getMap();if(r--,u&&t.appendMap(u,r),l){let f=o.selection&&o.selection.map(t.slice(r));f&&s++;let m=new $r(u.invert(),l,f),y,d=i.length-1;(y=i.length&&i[d].merge(m))?i[d]=y:i.push(m)}}else o.map&&r--},this.items.length,0),new Pr(t0.from(i.reverse()),s)}}Pr.empty=new Pr(t0.empty,0);function Sb(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class $r{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new $r(t.getMap().invert(),t,this.selection)}}}class Wi{constructor(e,t,r,i){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i}}const Nb=20;function kb(n,e,t,r){let i=t.getMeta(ts),s;if(i)return i.historyState;t.getMeta(Lb)&&(n=new Wi(n.done,n.undone,null,0));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(ts))return o.getMeta(ts).redo?new Wi(n.done.addTransform(t,void 0,r,$l(e)),n.undone,$d(t.mapping.maps[t.steps.length-1]),n.prevTime):new Wi(n.done,n.undone.addTransform(t,void 0,r,$l(e)),null,n.prevTime);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.prevTime==0||!o&&(n.prevTime<(t.time||0)-r.newGroupDelay||!Ab(t,n.prevRanges)),l=o?Ju(n.prevRanges,t.mapping):$d(t.mapping.maps[t.steps.length-1]);return new Wi(n.done.addTransform(t,a?e.selection.getBookmark():void 0,r,$l(e)),Pr.empty,l,t.time)}else return(s=t.getMeta("rebased"))?new Wi(n.done.rebased(t,s),n.undone.rebased(t,s),Ju(n.prevRanges,t.mapping),n.prevTime):new Wi(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Ju(n.prevRanges,t.mapping),n.prevTime)}function Ab(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(t=!0)}),t}function $d(n){let e=[];return n.forEach((t,r,i,s)=>e.push(i,s)),e}function Ju(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),s=e.map(n[r+1],-1);i<=s&&t.push(i,s)}return t}function n0(n,e,t,r){let i=$l(e),s=ts.get(e).spec.config,o=(r?n.undone:n.done).popEvent(e,i);if(!o)return;let a=o.selection.resolve(o.transform.doc),l=(r?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),s,i),u=new Wi(r?l:o.remaining,r?o.remaining:l,null,0);t(o.transform.setSelection(a).setMeta(ts,{redo:r,historyState:u}).scrollIntoView())}let Gu=!1,Jd=null;function $l(n){let e=n.plugins;if(Jd!=e){Gu=!1,Jd=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Gu=!0;break}}return Gu}const ts=new ki("history"),Lb=new ki("closeHistory");function Cb(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new er({key:ts,state:{init(){return new Wi(Pr.empty,Pr.empty,null,0)},apply(e,t,r){return kb(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?r0:r=="historyRedo"?i0:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}const r0=(n,e)=>{let t=ts.getState(n);return!t||t.done.eventCount==0?!1:(e&&n0(t,n,e,!1),!0)},i0=(n,e)=>{let t=ts.getState(n);return!t||t.undone.eventCount==0?!1:(e&&n0(t,n,e,!0),!0)},_b=Un.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>r0(n,e),redo:()=>({state:n,dispatch:e})=>i0(n,e)}},addProseMirrorPlugins(){return[Cb(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}}),Mb=Wn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Cn(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n})=>n().insertContent({type:this.name}).command(({tr:e,dispatch:t})=>{var r;if(t){const{$to:i}=e.selection,s=i.end();if(i.nodeAfter)e.setSelection(ct.create(e.doc,i.pos));else{const o=(r=i.parent.type.contentMatch.defaultType)===null||r===void 0?void 0:r.create();o&&(e.insert(s,o),e.setSelection(ct.create(e.doc,s)))}e.scrollIntoView()}return!0}).run()}},addInputRules(){return[Vy({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Pb=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,Ob=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,Ib=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,Tb=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,Eb=xi.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Cn(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ds({find:Pb,type:this.type}),Ds({find:Ib,type:this.type})]},addPasteRules(){return[Fs({find:Ob,type:this.type}),Fs({find:Tb,type:this.type})]}}),Db=Wn.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Cn(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Fb=/^(\d+)\.\s$/,Rb=Wn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Cn(this.options.HTMLAttributes,t),0]:["ol",Cn(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[rh({find:Fb,type:this.type,getAttributes:n=>({start:+n[1]}),joinPredicate:(n,e)=>e.childCount+e.attrs.start===+n[1]})]}}),Bb=Wn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Cn(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),jb=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,qb=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,zb=xi.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Cn(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ds({find:jb,type:this.type})]},addPasteRules(){return[Fs({find:qb,type:this.type})]}}),Vb=Wn.create({name:"text",group:"inline"}),Hb=Un.create({name:"starterKit",addExtensions(){var n,e,t,r,i,s,o,a,l,u,f,m,y,d,v,w,S,x;const _=[];return this.options.blockquote!==!1&&_.push(Xy.configure((n=this.options)===null||n===void 0?void 0:n.blockquote)),this.options.bold!==!1&&_.push(Z1.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&_.push(Zy.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&_.push(nb.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&_.push(sb.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&_.push(ob.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&_.push(cb.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&_.push(yb.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&_.push(bb.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&_.push(vb.configure((u=this.options)===null||u===void 0?void 0:u.heading)),this.options.history!==!1&&_.push(_b.configure((f=this.options)===null||f===void 0?void 0:f.history)),this.options.horizontalRule!==!1&&_.push(Mb.configure((m=this.options)===null||m===void 0?void 0:m.horizontalRule)),this.options.italic!==!1&&_.push(Eb.configure((y=this.options)===null||y===void 0?void 0:y.italic)),this.options.listItem!==!1&&_.push(Db.configure((d=this.options)===null||d===void 0?void 0:d.listItem)),this.options.orderedList!==!1&&_.push(Rb.configure((v=this.options)===null||v===void 0?void 0:v.orderedList)),this.options.paragraph!==!1&&_.push(Bb.configure((w=this.options)===null||w===void 0?void 0:w.paragraph)),this.options.strike!==!1&&_.push(zb.configure((S=this.options)===null||S===void 0?void 0:S.strike)),this.options.text!==!1&&_.push(Vb.configure((x=this.options)===null||x===void 0?void 0:x.text)),_}}),Ub=Un.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize"}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=n=>{const e=(n==null?void 0:n.node)||this.editor.state.doc;return((n==null?void 0:n.mode)||this.options.mode)==="textSize"?e.textBetween(0,e.content.size,void 0," ").length:e.nodeSize},this.storage.words=n=>{const e=(n==null?void 0:n.node)||this.editor.state.doc;return e.textBetween(0,e.content.size," "," ").split(" ").filter(i=>i!=="").length}},addProseMirrorPlugins(){return[new er({key:new ki("characterCount"),filterTransaction:(n,e)=>{const t=this.options.limit;if(!n.docChanged||t===0||t===null||t===void 0)return!0;const r=this.storage.characters({node:e.doc}),i=this.storage.characters({node:n.doc});if(i<=t||r>t&&i>t&&i<=r)return!0;if(r>t&&i>t&&i>r||!n.getMeta("paste"))return!1;const o=n.selection.$head.pos,a=i-t,l=o-a,u=o;return n.deleteRange(l,u),!(this.storage.characters({node:n.doc})>t)}})]}}),po=[];function cs(n,e=In){let t;const r=new Set;function i(a){if(ni(n,a)&&(n=a,t)){const l=!po.length;for(const u of r)u[1](),po.push(u,n);if(l){for(let u=0;u<po.length;u+=2)po[u][0](po[u+1]);po.length=0}}}function s(a){i(a(n))}function o(a,l=In){const u=[a,l];return r.add(u),r.size===1&&(t=e(i)||In),a(n),()=>{r.delete(u),r.size===0&&(t(),t=null)}}return{set:i,update:s,subscribe:o}}const Mn=cs(null),za=cs("editor"),Po=cs(localStorage.allNotes||"[]"),Va=cs(parseInt(localStorage.currentId)||0),Jl=cs(0),Gl=cs(0),Ea=cs("Note "+parseInt(localStorage.currentId||0)),Lf=cs(!1);Po.subscribe(n=>localStorage.allNotes=n);Va.subscribe(n=>localStorage.currentId=n);function Gd(n,e,t){const r=n.slice();return r[6]=e[t],r}function Kd(n){let e,t=n[6].title+"",r,i,s;function o(){return n[3](n[6])}return{c(){e=He("button"),r=on(t),Be(e,"class","noteButton svelte-4ljgq")},m(a,l){pt(a,e,l),Ie(e,r),i||(s=Ut(e,"click",o),i=!0)},p(a,l){n=a,l&1&&t!==(t=n[6].title+"")&&hr(r,t)},d(a){a&&ht(e),i=!1,s()}}}function Yd(n){let e,t=n[6]!=null&&Kd(n);return{c(){t&&t.c(),e=zo()},m(r,i){t&&t.m(r,i),pt(r,e,i)},p(r,i){r[6]!=null?t?t.p(r,i):(t=Kd(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(r){t&&t.d(r),r&&ht(e)}}}function Wb(n){let e,t,r,i,s,o,a=JSON.parse(n[0]),l=[];for(let u=0;u<a.length;u+=1)l[u]=Yd(Gd(n,a,u));return{c(){e=He("div"),t=He("button"),t.textContent="+ New Note",r=St(),i=He("div");for(let u=0;u<l.length;u+=1)l[u].c();Be(t,"class","newNoteButton svelte-4ljgq"),Be(i,"class","noteButtonContainer svelte-4ljgq"),Be(e,"id","storage-div"),Be(e,"class","svelte-4ljgq")},m(u,f){pt(u,e,f),Ie(e,t),Ie(e,r),Ie(e,i);for(let m=0;m<l.length;m+=1)l[m].m(i,null);s||(o=Ut(t,"click",n[2]),s=!0)},p(u,[f]){if(f&3){a=JSON.parse(u[0]);let m;for(m=0;m<a.length;m+=1){const y=Gd(u,a,m);l[m]?l[m].p(y,f):(l[m]=Yd(y),l[m].c(),l[m].m(i,null))}for(;m<l.length;m+=1)l[m].d(1);l.length=a.length}},i:In,o:In,d(u){u&&ht(e),bc(l,u),s=!1,o()}}}function $b(n,e,t){let r,i,s;ur(n,Mn,u=>t(4,r=u)),ur(n,Va,u=>t(5,i=u)),ur(n,Po,u=>t(0,s=u));let o=u=>{console.log(u),Mn.set(u),Ea.set(u.title)};return[s,o,()=>{let u=JSON.parse(s);u.push({id:i,title:"Note "+i,note:"",questions:[]}),Va.set(i+1),Mn.set(u.at(-1)),Ea.set(r.title),Po.set(JSON.stringify(u))},u=>o(u)]}class Jb extends Ni{constructor(e){super(),Si(this,e,$b,Wb,ni,{})}}function Xd(n){let e,t,r,i,s,o,a,l,u,f,m,y,d,v,w,S,x,_,B,$,Q,he=n[1].storage.characterCount.words()+"",Y,E,ue=n[1].storage.characterCount.words()===1?"word":"words",le,I,O;return{c(){e=He("button"),t=He("p"),t.textContent="H1",i=St(),s=He("button"),o=He("p"),o.textContent="H2",l=St(),u=He("button"),f=He("p"),f.textContent="B",y=St(),d=He("button"),v=He("p"),v.textContent="I",S=St(),x=He("button"),_=He("p"),_.textContent="h",$=St(),Q=He("p"),Y=on(he),E=St(),le=on(ue),Be(e,"class",r="format_button "+(n[1].isActive("heading",{level:1})?"is_button_active":"is_button_inactive")),Be(s,"class",a="format_button "+(n[1].isActive("heading",{level:2})?"is_button_active":"is_button_inactive")),ku(f,"font-weight","700"),Be(u,"class",m="format_button "+(n[1].isActive("bold")?"is_button_active":"is_button_inactive")),ku(v,"font-style","italic"),Be(d,"class",w="format_button "+(n[1].isActive("italic")?"is_button_active":"is_button_inactive")),ku(_,"font-style","italic"),Be(x,"class",B="format_button "+(n[1].isActive("highlight")?"is_button_active":"is_button_inactive")),Be(Q,"class","wordCount svelte-vobznv")},m(j,R){pt(j,e,R),Ie(e,t),pt(j,i,R),pt(j,s,R),Ie(s,o),pt(j,l,R),pt(j,u,R),Ie(u,f),pt(j,y,R),pt(j,d,R),Ie(d,v),pt(j,S,R),pt(j,x,R),Ie(x,_),pt(j,$,R),pt(j,Q,R),Ie(Q,Y),Ie(Q,E),Ie(Q,le),I||(O=[Ut(e,"click",function(){$i(n[1].chain().focus().toggleHeading({level:1}).run())&&n[1].chain().focus().toggleHeading({level:1}).run().apply(this,arguments)}),Ut(s,"click",function(){$i(n[1].chain().focus().toggleHeading({level:2}).run())&&n[1].chain().focus().toggleHeading({level:2}).run().apply(this,arguments)}),Ut(u,"click",function(){$i(n[1].chain().focus().toggleBold().run())&&n[1].chain().focus().toggleBold().run().apply(this,arguments)}),Ut(d,"click",function(){$i(n[1].chain().focus().toggleItalic().run())&&n[1].chain().focus().toggleItalic().run().apply(this,arguments)}),Ut(x,"click",function(){$i(n[1].chain().focus().toggleHighlight().run())&&n[1].chain().focus().toggleHighlight().run().apply(this,arguments)})],I=!0)},p(j,R){n=j,R&2&&r!==(r="format_button "+(n[1].isActive("heading",{level:1})?"is_button_active":"is_button_inactive"))&&Be(e,"class",r),R&2&&a!==(a="format_button "+(n[1].isActive("heading",{level:2})?"is_button_active":"is_button_inactive"))&&Be(s,"class",a),R&2&&m!==(m="format_button "+(n[1].isActive("bold")?"is_button_active":"is_button_inactive"))&&Be(u,"class",m),R&2&&w!==(w="format_button "+(n[1].isActive("italic")?"is_button_active":"is_button_inactive"))&&Be(d,"class",w),R&2&&B!==(B="format_button "+(n[1].isActive("highlight")?"is_button_active":"is_button_inactive"))&&Be(x,"class",B),R&2&&he!==(he=n[1].storage.characterCount.words()+"")&&hr(Y,he),R&2&&ue!==(ue=n[1].storage.characterCount.words()===1?"word":"words")&&hr(le,ue)},d(j){j&&ht(e),j&&ht(i),j&&ht(s),j&&ht(l),j&&ht(u),j&&ht(y),j&&ht(d),j&&ht(S),j&&ht(x),j&&ht($),j&&ht(Q),I=!1,ti(O)}}}function Gb(n){let e,t,r,i,s,o,a,l,u,f,m,y,d,v,w,S,x,_,B,$,Q,he,Y,E,ue,le,I,O;r=new Jb({});let j=n[1]&&Xd(n);return{c(){e=He("div"),t=He("div"),Qi(r.$$.fragment),i=St(),s=He("div"),o=He("div"),a=He("input"),l=St(),u=He("button"),f=on("\u{1F5D1}\uFE0F"),y=St(),d=He("button"),v=on("Take quiz"),S=St(),x=He("button"),_=on("Flash cards"),$=St(),Q=He("button"),Q.textContent="Save and Generate",he=St(),Y=He("div"),j&&j.c(),E=St(),ue=He("hr"),Be(a,"type","text"),Be(a,"class","title svelte-vobznv"),Be(u,"class",m="delete_button "+(n[2]==null?"hidden":"")+" svelte-vobznv"),Be(d,"class","topButton enterQuizButton svelte-vobznv"),d.disabled=w=n[2]==null||n[2].questions.length<=0,Be(x,"class","topButton enterFlashCardsButton svelte-vobznv"),x.disabled=B=n[2]==null||n[2].questions.length<=0,Be(Q,"class","topButton saveButton svelte-vobznv"),Be(o,"id","title-div"),Be(o,"class","svelte-vobznv"),Be(Y,"id","format-div"),Be(s,"id","editor-div"),Be(s,"class","svelte-vobznv"),Be(t,"id","editor-main"),Be(e,"id","main-view")},m(R,oe){pt(R,e,oe),Ie(e,t),bi(r,t,null),Ie(t,i),Ie(t,s),Ie(s,o),Ie(o,a),Vh(a,n[3]),Ie(o,l),Ie(o,u),Ie(u,f),Ie(o,y),Ie(o,d),Ie(d,v),Ie(o,S),Ie(o,x),Ie(x,_),Ie(o,$),Ie(o,Q),Ie(s,he),Ie(s,Y),j&&j.m(Y,null),Ie(s,E),Ie(s,ue),n[10](s),le=!0,I||(O=[Ut(a,"input",n[9]),Ut(u,"click",n[8]),Ut(d,"click",n[6]),Ut(x,"click",n[7]),Ut(Q,"click",function(){$i(n[4](n[1].getJSON()))&&n[4](n[1].getJSON()).apply(this,arguments)}),Ut(s,"drop",n[5])],I=!0)},p(R,[oe]){n=R,oe&8&&a.value!==n[3]&&Vh(a,n[3]),(!le||oe&4&&m!==(m="delete_button "+(n[2]==null?"hidden":"")+" svelte-vobznv"))&&Be(u,"class",m),(!le||oe&4&&w!==(w=n[2]==null||n[2].questions.length<=0))&&(d.disabled=w),(!le||oe&4&&B!==(B=n[2]==null||n[2].questions.length<=0))&&(x.disabled=B),n[1]?j?j.p(n,oe):(j=Xd(n),j.c(),j.m(Y,null)):j&&(j.d(1),j=null)},i(R){le||(It(r.$$.fragment,R),le=!0)},o(R){en(r.$$.fragment,R),le=!1},d(R){R&&ht(e),vi(r),j&&j.d(),n[10](null),I=!1,ti(O)}}}function Kb(n,e,t){let r,i,s,o;ur(n,Va,x=>t(11,r=x)),ur(n,Mn,x=>t(2,i=x)),ur(n,Po,x=>t(12,s=x)),ur(n,Ea,x=>t(3,o=x));let a,l;window.addEventListener("dragover",function(x){x=x||event,x.preventDefault()},!1),window.addEventListener("drop",function(x){x=x||event,x.preventDefault()},!1),lm(()=>{t(1,l=new zy({element:a,extensions:[Hb.configure({listItem:!1,bulletList:!1,orderedList:!1,codeBlock:!1,blockquote:!1}),Ub,Z1,Ky],content:"",autofocus:!0,editable:!0,disablePasteRules:!0,disableInputRules:!0,onTransaction:()=>{t(1,l)}}))}),jf(()=>{l&&l.destroy(),m()});let u=async x=>{console.log(x),Lf.set(!0);let _=x.content,B=[];_.forEach(Y=>{if(Y.type=="paragraph"){let E=Y.content;E!=null&&B.push(E[0].text)}});let Q=await(await fetch("http://34.95.16.60:5000/content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)})).json(),he=JSON.parse(s);i==null?(he.push({id:parseInt(r),title:o,note:"",questions:[]}),Va.set(parseInt(r+1)),Mn.set(he.at(-1)),xa(Mn,i.note=x,i),xa(Mn,i.questions=Q.questions,i)):(xa(Mn,i.note=x,i),xa(Mn,i.questions=Q.questions,i),xa(Mn,i.title=o,i),he[i.id]=i),Po.set(JSON.stringify(he)),Lf.set(!1)};async function f(x){let B=await x.dataTransfer.files[0].text();B=B.replaceAll(/\r?\n|\r/g,"<br>"),console.log(B),l.commands.setContent(B)}const m=Mn.subscribe(x=>{x!=null&&l.commands.setContent(x.note)});let y=()=>{Gl.set(0),za.set("quiz")},d=()=>{Jl.set(0),za.set("flashCards")},v=()=>{let x=JSON.parse(s);var _=x.map(B=>{if(B!=null)return B.id}).indexOf(i.id);_>=0&&x.splice(_,1),Po.set(JSON.stringify(x)),Mn.set(null),l.commands.setContent(""),Ea.set("Note "+r)};function w(){o=this.value,Ea.set(o)}function S(x){sf[x?"unshift":"push"](()=>{a=x,t(0,a)})}return[a,l,i,o,u,f,y,d,v,w,S]}class Yb extends Ni{constructor(e){super(),Si(this,e,Kb,Gb,ni,{})}}function Xb(n){let e,t,r,i,s,o,a,l,u,f,m,y;return{c(){e=He("div"),t=He("div"),r=He("p"),i=on(n[1]),o=St(),a=He("div"),l=He("p"),u=on(n[0]),Be(r,"id","answer"),Be(r,"class","svelte-cu0v6u"),Be(t,"class",s=lr(n[2]?"shown":"hidden")+" svelte-cu0v6u"),Be(l,"id","query"),Be(l,"class","svelte-cu0v6u"),Be(a,"class",f=lr(n[2]?"hidden":"shown")+" svelte-cu0v6u"),Be(e,"class","question-div svelte-cu0v6u")},m(d,v){pt(d,e,v),Ie(e,t),Ie(t,r),Ie(r,i),Ie(e,o),Ie(e,a),Ie(a,l),Ie(l,u),m||(y=Ut(e,"click",n[3]),m=!0)},p(d,[v]){v&2&&hr(i,d[1]),v&4&&s!==(s=lr(d[2]?"shown":"hidden")+" svelte-cu0v6u")&&Be(t,"class",s),v&1&&hr(u,d[0]),v&4&&f!==(f=lr(d[2]?"hidden":"shown")+" svelte-cu0v6u")&&Be(a,"class",f)},i:In,o:In,d(d){d&&ht(e),m=!1,y()}}}function Qb(n,e,t){let{query:r}=e,{answer:i}=e,s=!1,o=()=>{t(2,s=!s)};return n.$$set=a=>{"query"in a&&t(0,r=a.query),"answer"in a&&t(1,i=a.answer)},[r,i,s,o]}class Zb extends Ni{constructor(e){super(),Si(this,e,Qb,Xb,ni,{query:0,answer:1})}}function Qd(n,e,t){const r=n.slice();return r[5]=e[t],r[7]=t,r}function Zd(n){let e,t,r=n[0].length>n[1]&&ep(n);return{c(){r&&r.c(),e=zo()},m(i,s){r&&r.m(i,s),pt(i,e,s),t=!0},p(i,s){i[0].length>i[1]?r?(r.p(i,s),s&3&&It(r,1)):(r=ep(i),r.c(),It(r,1),r.m(e.parentNode,e)):r&&(Vo(),en(r,1,1,()=>{r=null}),Ho())},i(i){t||(It(r),t=!0)},o(i){en(r),t=!1},d(i){r&&r.d(i),i&&ht(e)}}}function ep(n){let e,t,r,i,s=n[1]+1+"",o,a,l=n[0].length+"",u,f,m,y,d,v,w=n[0],S=[];for(let _=0;_<w.length;_+=1)S[_]=tp(Qd(n,w,_));const x=_=>en(S[_],1,1,()=>{S[_]=null});return{c(){for(let _=0;_<S.length;_+=1)S[_].c();e=St(),t=He("div"),r=He("button"),r.textContent="<",i=St(),o=on(s),a=on(" / "),u=on(l),f=St(),m=He("button"),m.textContent=">",Be(t,"class","cards-view-bottom")},m(_,B){for(let $=0;$<S.length;$+=1)S[$].m(_,B);pt(_,e,B),pt(_,t,B),Ie(t,r),Ie(t,i),Ie(t,o),Ie(t,a),Ie(t,u),Ie(t,f),Ie(t,m),y=!0,d||(v=[Ut(r,"click",n[3]),Ut(m,"click",n[2])],d=!0)},p(_,B){if(B&3){w=_[0];let $;for($=0;$<w.length;$+=1){const Q=Qd(_,w,$);S[$]?(S[$].p(Q,B),It(S[$],1)):(S[$]=tp(Q),S[$].c(),It(S[$],1),S[$].m(e.parentNode,e))}for(Vo(),$=w.length;$<S.length;$+=1)x($);Ho()}(!y||B&2)&&s!==(s=_[1]+1+"")&&hr(o,s),(!y||B&1)&&l!==(l=_[0].length+"")&&hr(u,l)},i(_){if(!y){for(let B=0;B<w.length;B+=1)It(S[B]);y=!0}},o(_){S=S.filter(Boolean);for(let B=0;B<S.length;B+=1)en(S[B]);y=!1},d(_){bc(S,_),_&&ht(e),_&&ht(t),d=!1,ti(v)}}}function tp(n){let e,t,r,i;return t=new Zb({props:{query:n[5].query,answer:n[5].answer}}),{c(){e=He("div"),Qi(t.$$.fragment),Be(e,"style",r=n[7]===n[1]?"display: block":"display: none")},m(s,o){pt(s,e,o),bi(t,e,null),i=!0},p(s,o){const a={};o&1&&(a.query=s[5].query),o&1&&(a.answer=s[5].answer),t.$set(a),(!i||o&2&&r!==(r=s[7]===s[1]?"display: block":"display: none"))&&Be(e,"style",r)},i(s){i||(It(t.$$.fragment,s),i=!0)},o(s){en(t.$$.fragment,s),i=!1},d(s){s&&ht(e),vi(t)}}}function ev(n){let e=Array.isArray(n[0]),t,r,i=e&&Zd(n);return{c(){i&&i.c(),t=zo()},m(s,o){i&&i.m(s,o),pt(s,t,o),r=!0},p(s,[o]){o&1&&(e=Array.isArray(s[0])),e?i?(i.p(s,o),o&1&&It(i,1)):(i=Zd(s),i.c(),It(i,1),i.m(t.parentNode,t)):i&&(Vo(),en(i,1,1,()=>{i=null}),Ho())},i(s){r||(It(i),r=!0)},o(s){en(i),r=!1},d(s){i&&i.d(s),s&&ht(t)}}}function tv(n,e,t){let r;ur(n,Jl,l=>t(1,r=l));let i=null;const s=Mn.subscribe(l=>{l!=null&&t(0,i=l.questions)});function o(){r<i.length-1&&Jl.set(r+1)}function a(){r>0&&Jl.set(r-1)}return jf(()=>s()),[i,r,o,a]}class nv extends Ni{constructor(e){super(),Si(this,e,tv,ev,ni,{})}}const rv="modulepreload",iv=function(n){return"/"+n},np={},Cf=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=iv(s),s in np)return;np[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let f=i.length-1;f>=0;f--){const m=i[f];if(m.href===s&&(!o||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":rv,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((f,m)=>{u.addEventListener("load",f),u.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};function Lt(n){return Lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(n)}var Pn=Uint8Array,On=Uint16Array,Ha=Uint32Array,Oc=new Pn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ic=new Pn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_f=new Pn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s0=function(n,e){for(var t=new On(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new Ha(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},o0=s0(Oc,2),a0=o0[0],Mf=o0[1];a0[28]=258,Mf[258]=28;var l0=s0(Ic,0),sv=l0[0],rp=l0[1],Pf=new On(32768);for(var Dt=0;Dt<32768;++Dt){var Vi=(Dt&43690)>>>1|(Dt&21845)<<1;Vi=(Vi&52428)>>>2|(Vi&13107)<<2,Vi=(Vi&61680)>>>4|(Vi&3855)<<4,Pf[Dt]=((Vi&65280)>>>8|(Vi&255)<<8)>>>1}var Zr=function(n,e,t){for(var r=n.length,i=0,s=new On(e);i<r;++i)++s[n[i]-1];var o=new On(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new On(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],f=e-n[i],m=o[n[i]-1]++<<f,y=m|(1<<f)-1;m<=y;++m)a[Pf[m]>>>l]=u}else for(a=new On(r),i=0;i<r;++i)a[i]=Pf[o[n[i]-1]++]>>>15-n[i];return a},is=new Pn(288);for(var Dt=0;Dt<144;++Dt)is[Dt]=8;for(var Dt=144;Dt<256;++Dt)is[Dt]=9;for(var Dt=256;Dt<280;++Dt)is[Dt]=7;for(var Dt=280;Dt<288;++Dt)is[Dt]=8;var Ua=new Pn(32);for(var Dt=0;Dt<32;++Dt)Ua[Dt]=5;var ov=Zr(is,9,0),av=Zr(is,9,1),lv=Zr(Ua,5,0),cv=Zr(Ua,5,1),Ku=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},_r=function(n,e,t){var r=e/8>>0;return(n[r]|n[r+1]<<8)>>>(e&7)&t},Yu=function(n,e){var t=e/8>>0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>>(e&7)},sh=function(n){return(n/8>>0)+(n&7&&1)},c0=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof On?On:n instanceof Ha?Ha:Pn)(t-e);return r.set(n.subarray(e,t)),r},uv=function(n,e,t){var r=n.length,i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Pn(r*3));var o=function(K){var ne=e.length;if(K>ne){var re=new Pn(Math.max(ne*2,K));re.set(e),e=re}},a=t.f||0,l=t.p||0,u=t.b||0,f=t.l,m=t.d,y=t.m,d=t.n,v=r*8;do{if(!f){t.f=a=_r(n,l,1);var w=_r(n,l+1,3);if(l+=3,w)if(w==1)f=av,m=cv,y=9,d=5;else if(w==2){var B=_r(n,l,31)+257,$=_r(n,l+10,15)+4,Q=B+_r(n,l+5,31)+1;l+=14;for(var he=new Pn(Q),Y=new Pn(19),E=0;E<$;++E)Y[_f[E]]=_r(n,l+E*3,7);l+=$*3;var ue=Ku(Y),le=(1<<ue)-1;if(!s&&l+Q*(ue+7)>v)break;for(var I=Zr(Y,ue,1),E=0;E<Q;){var O=I[_r(n,l,le)];l+=O&15;var S=O>>>4;if(S<16)he[E++]=S;else{var j=0,R=0;for(S==16?(R=3+_r(n,l,3),l+=2,j=he[E-1]):S==17?(R=3+_r(n,l,7),l+=3):S==18&&(R=11+_r(n,l,127),l+=7);R--;)he[E++]=j}}var oe=he.subarray(0,B),ie=he.subarray(B);y=Ku(oe),d=Ku(ie),f=Zr(oe,y,1),m=Zr(ie,d,1)}else throw"invalid block type";else{var S=sh(l)+4,x=n[S-4]|n[S-3]<<8,_=S+x;if(_>r){if(s)throw"unexpected EOF";break}i&&o(u+x),e.set(n.subarray(S,_),u),t.b=u+=x,t.p=l=_*8;continue}if(l>v)throw"unexpected EOF"}i&&o(u+131072);for(var de=(1<<y)-1,te=(1<<d)-1,me=y+d+18;s||l+me<v;){var j=f[Yu(n,l)&de],pe=j>>>4;if(l+=j&15,l>v)throw"unexpected EOF";if(!j)throw"invalid length/literal";if(pe<256)e[u++]=pe;else if(pe==256){f=null;break}else{var Me=pe-254;if(pe>264){var E=pe-257,C=Oc[E];Me=_r(n,l,(1<<C)-1)+a0[E],l+=C}var F=m[Yu(n,l)&te],q=F>>>4;if(!F)throw"invalid distance";l+=F&15;var ie=sv[q];if(q>3){var C=Ic[q];ie+=Yu(n,l)&(1<<C)-1,l+=C}if(l>v)throw"unexpected EOF";i&&o(u+131072);for(var W=u+Me;u<W;u+=4)e[u]=e[u-ie],e[u+1]=e[u+1-ie],e[u+2]=e[u+2-ie],e[u+3]=e[u+3-ie];u=W}}t.l=f,t.p=l,t.b=u,f&&(a=1,t.m=y,t.d=m,t.n=d)}while(!a);return u==e.length?e:c0(e,0,u)},gi=function(n,e,t){t<<=e&7;var r=e/8>>0;n[r]|=t,n[r+1]|=t>>>8},Na=function(n,e,t){t<<=e&7;var r=e/8>>0;n[r]|=t,n[r+1]|=t>>>8,n[r+2]|=t>>>16},Xu=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return[new Pn(0),0];if(i==1){var o=new Pn(t[0].s+1);return o[t[0].s]=1,[o,1]}t.sort(function(Q,he){return Q.f-he.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],u=0,f=1,m=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};f!=i-1;)a=t[t[u].f<t[m].f?u++:m++],l=t[u!=f&&t[u].f<t[m].f?u++:m++],t[f++]={s:-1,f:a.f+l.f,l:a,r:l};for(var y=s[0].s,r=1;r<i;++r)s[r].s>y&&(y=s[r].s);var d=new On(y+1),v=Of(t[f-1],d,0);if(v>e){var r=0,w=0,S=v-e,x=1<<S;for(s.sort(function(he,Y){return d[Y.s]-d[he.s]||he.f-Y.f});r<i;++r){var _=s[r].s;if(d[_]>e)w+=x-(1<<v-d[_]),d[_]=e;else break}for(w>>>=S;w>0;){var B=s[r].s;d[B]<e?w-=1<<e-d[B]++-1:++r}for(;r>=0&&w;--r){var $=s[r].s;d[$]==e&&(--d[$],++w)}v=e}return[new Pn(d),v]},Of=function(n,e,t){return n.s==-1?Math.max(Of(n.l,e,t+1),Of(n.r,e,t+1)):e[n.s]=t},ip=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new On(++e),r=0,i=n[0],s=1,o=function(l){t[r++]=l},a=1;a<=e;++a)if(n[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[a]}return[t.subarray(0,r),e]},ka=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Kl=function(n,e,t){var r=t.length,i=sh(e+2);n[i]=r&255,n[i+1]=r>>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},sp=function(n,e,t,r,i,s,o,a,l,u,f){gi(e,f++,t),++i[256];for(var m=Xu(i,15),y=m[0],d=m[1],v=Xu(s,15),w=v[0],S=v[1],x=ip(y),_=x[0],B=x[1],$=ip(w),Q=$[0],he=$[1],Y=new On(19),E=0;E<_.length;++E)Y[_[E]&31]++;for(var E=0;E<Q.length;++E)Y[Q[E]&31]++;for(var ue=Xu(Y,7),le=ue[0],I=ue[1],O=19;O>4&&!le[_f[O-1]];--O);var j=u+5<<3,R=ka(i,is)+ka(s,Ua)+o,oe=ka(i,y)+ka(s,w)+o+14+3*O+ka(Y,le)+(2*Y[16]+3*Y[17]+7*Y[18]);if(j<=R&&j<=oe)return Kl(e,f,n.subarray(l,l+u));var ie,de,te,me;if(gi(e,f,1+(oe<R)),f+=2,oe<R){ie=Zr(y,d,0),de=y,te=Zr(w,S,0),me=w;var pe=Zr(le,I,0);gi(e,f,B-257),gi(e,f+5,he-1),gi(e,f+10,O-4),f+=14;for(var E=0;E<O;++E)gi(e,f+3*E,le[_f[E]]);f+=3*O;for(var Me=[_,Q],C=0;C<2;++C)for(var F=Me[C],E=0;E<F.length;++E){var q=F[E]&31;gi(e,f,pe[q]),f+=le[q],q>15&&(gi(e,f,F[E]>>>5&127),f+=F[E]>>>12)}}else ie=ov,de=is,te=lv,me=Ua;for(var E=0;E<a;++E)if(r[E]>255){var q=r[E]>>>18&31;Na(e,f,ie[q+257]),f+=de[q+257],q>7&&(gi(e,f,r[E]>>>23&31),f+=Oc[q]);var W=r[E]&31;Na(e,f,te[W]),f+=me[W],W>3&&(Na(e,f,r[E]>>>5&8191),f+=Ic[W])}else Na(e,f,ie[r[E]]),f+=de[r[E]];return Na(e,f,ie[256]),f+de[256]},fv=new Ha([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),hv=new Pn(0),dv=function(n,e,t,r,i,s){var o=n.length,a=new Pn(r+o+5*(1+Math.floor(o/7e3))+i),l=a.subarray(r,a.length-i),u=0;if(!e||o<8)for(var f=0;f<=o;f+=65535){var m=f+65535;m<o?u=Kl(l,u,n.subarray(f,m)):(l[f]=s,u=Kl(l,u,n.subarray(f,o)))}else{for(var y=fv[e-1],d=y>>>13,v=y&8191,w=(1<<t)-1,S=new On(32768),x=new On(w+1),_=Math.ceil(t/3),B=2*_,$=function(Ge){return(n[Ge]^n[Ge+1]<<_^n[Ge+2]<<B)&w},Q=new Ha(25e3),he=new On(288),Y=new On(32),E=0,ue=0,f=0,le=0,I=0,O=0;f<o;++f){var j=$(f),R=f&32767,oe=x[j];if(S[R]=oe,x[j]=R,I<=f){var ie=o-f;if((E>7e3||le>24576)&&ie>423){u=sp(n,l,0,Q,he,Y,ue,le,O,f-O,u),le=E=ue=0,O=f;for(var de=0;de<286;++de)he[de]=0;for(var de=0;de<30;++de)Y[de]=0}var te=2,me=0,pe=v,Me=R-oe&32767;if(ie>2&&j==$(f-Me))for(var C=Math.min(d,ie)-1,F=Math.min(32767,f),q=Math.min(258,ie);Me<=F&&--pe&&R!=oe;){if(n[f+te]==n[f+te-Me]){for(var W=0;W<q&&n[f+W]==n[f+W-Me];++W);if(W>te){if(te=W,me=Me,W>C)break;for(var K=Math.min(Me,W-2),ne=0,de=0;de<K;++de){var re=f-Me+de+32768&32767,se=S[re],ke=re-se+32768&32767;ke>ne&&(ne=ke,oe=re)}}}R=oe,oe=S[R],Me+=R-oe+32768&32767}if(me){Q[le++]=268435456|Mf[te]<<18|rp[me];var Ne=Mf[te]&31,Te=rp[me]&31;ue+=Oc[Ne]+Ic[Te],++he[257+Ne],++Y[Te],I=f+te,++E}else Q[le++]=n[f],++he[n[f]]}}u=sp(n,l,s,Q,he,Y,ue,le,O,f-O,u),s||(u=Kl(l,u,hv))}return c0(a,0,r+sh(u)+i)},pv=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length,o=0;o!=s;){for(var a=Math.min(o+5552,s);o<a;++o)r+=t[o],i+=r;r%=65521,i%=65521}n=r,e=i},d:function(){return(n>>>8<<16|(e&255)<<8|e>>>8)+((n&255)<<23)*2}}},mv=function(n,e,t,r,i){return dv(n,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+e.mem,t,r,!i)},gv=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},yv=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;n[0]=120,n[1]=r<<6|(r?32-2*r:1)},bv=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function If(n,e){e===void 0&&(e={});var t=pv();t.p(n);var r=mv(n,e,2,4);return yv(r,e),gv(r,r.length-4,t.d()),r}function vv(n,e){return uv((bv(n),n.subarray(2,-4)),e)}var Ke=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Qu(){Ke.console&&typeof Ke.console.log=="function"&&Ke.console.log.apply(Ke.console,arguments)}var Ot={log:Qu,warn:function(n){Ke.console&&(typeof Ke.console.warn=="function"?Ke.console.warn.apply(Ke.console,arguments):Qu.call(null,arguments))},error:function(n){Ke.console&&(typeof Ke.console.error=="function"?Ke.console.error.apply(Ke.console,arguments):Qu(n))}};function Zu(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){ws(r.response,e,t)},r.onerror=function(){Ot.error("could not download file")},r.send()}function op(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Bl(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Da,Tf,ws=Ke.saveAs||((typeof window>"u"?"undefined":Lt(window))!=="object"||window!==Ke?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Ke.URL||Ke.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?op(i.href)?Zu(n,e,t):Bl(i,i.target="_blank"):Bl(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Bl(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(op(n))Zu(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Bl(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Lt(s)!=="object"&&(Ot.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Zu(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(Ke.HTMLElement)||Ke.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Lt(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var f=a.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=f:location=f,r=null},a.readAsDataURL(n)}else{var l=Ke.URL||Ke.webkitURL,u=l.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function u0(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,o=i.exec(n);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function ef(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=xn(t,r,i,s,e[0],7,-680876936),s=xn(s,t,r,i,e[1],12,-389564586),i=xn(i,s,t,r,e[2],17,606105819),r=xn(r,i,s,t,e[3],22,-1044525330),t=xn(t,r,i,s,e[4],7,-176418897),s=xn(s,t,r,i,e[5],12,1200080426),i=xn(i,s,t,r,e[6],17,-1473231341),r=xn(r,i,s,t,e[7],22,-45705983),t=xn(t,r,i,s,e[8],7,1770035416),s=xn(s,t,r,i,e[9],12,-1958414417),i=xn(i,s,t,r,e[10],17,-42063),r=xn(r,i,s,t,e[11],22,-1990404162),t=xn(t,r,i,s,e[12],7,1804603682),s=xn(s,t,r,i,e[13],12,-40341101),i=xn(i,s,t,r,e[14],17,-1502002290),t=Sn(t,r=xn(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Sn(s,t,r,i,e[6],9,-1069501632),i=Sn(i,s,t,r,e[11],14,643717713),r=Sn(r,i,s,t,e[0],20,-373897302),t=Sn(t,r,i,s,e[5],5,-701558691),s=Sn(s,t,r,i,e[10],9,38016083),i=Sn(i,s,t,r,e[15],14,-660478335),r=Sn(r,i,s,t,e[4],20,-405537848),t=Sn(t,r,i,s,e[9],5,568446438),s=Sn(s,t,r,i,e[14],9,-1019803690),i=Sn(i,s,t,r,e[3],14,-187363961),r=Sn(r,i,s,t,e[8],20,1163531501),t=Sn(t,r,i,s,e[13],5,-1444681467),s=Sn(s,t,r,i,e[2],9,-51403784),i=Sn(i,s,t,r,e[7],14,1735328473),t=Nn(t,r=Sn(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Nn(s,t,r,i,e[8],11,-2022574463),i=Nn(i,s,t,r,e[11],16,1839030562),r=Nn(r,i,s,t,e[14],23,-35309556),t=Nn(t,r,i,s,e[1],4,-1530992060),s=Nn(s,t,r,i,e[4],11,1272893353),i=Nn(i,s,t,r,e[7],16,-155497632),r=Nn(r,i,s,t,e[10],23,-1094730640),t=Nn(t,r,i,s,e[13],4,681279174),s=Nn(s,t,r,i,e[0],11,-358537222),i=Nn(i,s,t,r,e[3],16,-722521979),r=Nn(r,i,s,t,e[6],23,76029189),t=Nn(t,r,i,s,e[9],4,-640364487),s=Nn(s,t,r,i,e[12],11,-421815835),i=Nn(i,s,t,r,e[15],16,530742520),t=kn(t,r=Nn(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=kn(s,t,r,i,e[7],10,1126891415),i=kn(i,s,t,r,e[14],15,-1416354905),r=kn(r,i,s,t,e[5],21,-57434055),t=kn(t,r,i,s,e[12],6,1700485571),s=kn(s,t,r,i,e[3],10,-1894986606),i=kn(i,s,t,r,e[10],15,-1051523),r=kn(r,i,s,t,e[1],21,-2054922799),t=kn(t,r,i,s,e[8],6,1873313359),s=kn(s,t,r,i,e[15],10,-30611744),i=kn(i,s,t,r,e[6],15,-1560198380),r=kn(r,i,s,t,e[13],21,1309151649),t=kn(t,r,i,s,e[4],6,-145523070),s=kn(s,t,r,i,e[11],10,-1120210379),i=kn(i,s,t,r,e[2],15,718787259),r=kn(r,i,s,t,e[9],21,-343485551),n[0]=Xi(t,n[0]),n[1]=Xi(r,n[1]),n[2]=Xi(i,n[2]),n[3]=Xi(s,n[3])}function Tc(n,e,t,r,i,s){return e=Xi(Xi(e,n),Xi(r,s)),Xi(e<<i|e>>>32-i,t)}function xn(n,e,t,r,i,s,o){return Tc(e&t|~e&r,n,e,i,s,o)}function Sn(n,e,t,r,i,s,o){return Tc(e&r|t&~r,n,e,i,s,o)}function Nn(n,e,t,r,i,s,o){return Tc(e^t^r,n,e,i,s,o)}function kn(n,e,t,r,i,s,o){return Tc(t^(e|~r),n,e,i,s,o)}function f0(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)ef(r,wv(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(ef(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,ef(r,i),r}function wv(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Da=Ke.atob.bind(Ke),Tf=Ke.btoa.bind(Ke);var ap="0123456789abcdef".split("");function xv(n){for(var e="",t=0;t<4;t++)e+=ap[n>>8*t+4&15]+ap[n>>8*t&15];return e}function Sv(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Ef(n){return f0(n).map(Sv).join("")}var Nv=function(n){for(var e=0;e<n.length;e++)n[e]=xv(n[e]);return n.join("")}(f0("hello"))!="5d41402abc4b2a76b9719d911017c592";function Xi(n,e){if(Nv){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Df(n,e){var t,r,i,s;if(n!==t){for(var o=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var f=a[l];u=(u+f+o.charCodeAt(l))%256,a[l]=a[u],a[u]=f}t=n,r=a}else a=r;var m=e.length,y=0,d=0,v="";for(l=0;l<m;l++)d=(d+(f=a[y=(y+1)%256]))%256,a[y]=a[d],a[d]=f,o=a[(a[y]+a[d])%256],v+=String.fromCharCode(e.charCodeAt(l)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var lp={print:4,modify:8,copy:16,"annot-forms":32};function vo(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(lp.perm!==void 0)throw new Error("Invalid permission: "+a);i+=lp[a]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var s=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=Ef(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Df(this.encryptionKey,this.padding)}function wo(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function cp(n){if(Lt(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var o=e[t][s];try{o[0].apply(n,r)}catch(a){Ke.console&&Ot.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function gc(n){if(!(this instanceof gc))return new gc(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function h0(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Ss(n,e,t,r,i){if(!(this instanceof Ss))return new Ss(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,h0.call(this,r,i)}function Ao(n,e,t,r,i){if(!(this instanceof Ao))return new Ao(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,h0.call(this,r,i)}function Je(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,u="S",f=null;Lt(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(f=n.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),u=n.defaultPathOperation||"S"),o=n.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var m=n.putOnlyUsedFonts||!1,y={},d={internal:{},__private__:{}};d.__private__.PubSub=cp;var v="1.3",w=d.__private__.getPdfVersion=function(){return v};d.__private__.setPdfVersion=function(p){v=p};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};d.__private__.getPageFormats=function(){return S};var x=d.__private__.getPageFormat=function(p){return S[p]};i=i||"a4";var _={COMPAT:"compat",ADVANCED:"advanced"},B=_.COMPAT;function $(){this.saveGraphicsState(),z(new $e(Oe,0,0,-Oe,0,_i()*Oe).toString()+" cm"),this.setFontSize(this.getFontSize()/Oe),u="n",B=_.ADVANCED}function Q(){this.restoreGraphicsState(),u="S",B=_.COMPAT}var he=d.__private__.combineFontStyleAndFontWeight=function(p,k){if(p=="bold"&&k=="normal"||p=="bold"&&k==400||p=="normal"&&k=="italic"||p=="bold"&&k=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return k&&(p=k==400||k==="normal"?p==="italic"?"italic":"normal":k!=700&&k!=="bold"||p!=="normal"?(k==700?"bold":k)+""+p:"bold"),p};d.advancedAPI=function(p){var k=B===_.COMPAT;return k&&$.call(this),typeof p!="function"||(p(this),k&&Q.call(this)),this},d.compatAPI=function(p){var k=B===_.ADVANCED;return k&&Q.call(this),typeof p!="function"||(p(this),k&&$.call(this)),this},d.isAdvancedAPI=function(){return B===_.ADVANCED};var Y,E=function(p){if(B!==_.ADVANCED)throw new Error(p+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ue=d.roundToPrecision=d.__private__.roundToPrecision=function(p,k){var D=e||k;if(isNaN(p)||isNaN(D))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return p.toFixed(D).replace(/0+$/,"")};Y=d.hpf=d.__private__.hpf=typeof l=="number"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return ue(p,l)}:l==="smart"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return ue(p,p>-1&&p<1?16:5)}:function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return ue(p,16)};var le=d.f2=d.__private__.f2=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f2");return ue(p,2)},I=d.__private__.f3=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f3");return ue(p,3)},O=d.scale=d.__private__.scale=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.scale");return B===_.COMPAT?p*Oe:B===_.ADVANCED?p:void 0},j=function(p){return B===_.COMPAT?_i()-p:B===_.ADVANCED?p:void 0},R=function(p){return O(j(p))};d.__private__.setPrecision=d.setPrecision=function(p){typeof parseInt(p,10)=="number"&&(e=parseInt(p,10))};var oe,ie="00000000000000000000000000000000",de=d.__private__.getFileId=function(){return ie},te=d.__private__.setFileId=function(p){return ie=p!==void 0&&/^[a-fA-F0-9]{32}$/.test(p)?p.toUpperCase():ie.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(vn=new vo(f.userPermissions,f.userPassword,f.ownerPassword,ie)),ie};d.setFileId=function(p){return te(p),this},d.getFileId=function(){return de()};var me=d.__private__.convertDateToPDFDate=function(p){var k=p.getTimezoneOffset(),D=k<0?"+":"-",V=Math.floor(Math.abs(k/60)),X=Math.abs(k%60),ce=[D,q(V),"'",q(X),"'"].join("");return["D:",p.getFullYear(),q(p.getMonth()+1),q(p.getDate()),q(p.getHours()),q(p.getMinutes()),q(p.getSeconds()),ce].join("")},pe=d.__private__.convertPDFDateToDate=function(p){var k=parseInt(p.substr(2,4),10),D=parseInt(p.substr(6,2),10)-1,V=parseInt(p.substr(8,2),10),X=parseInt(p.substr(10,2),10),ce=parseInt(p.substr(12,2),10),we=parseInt(p.substr(14,2),10);return new Date(k,D,V,X,ce,we,0)},Me=d.__private__.setCreationDate=function(p){var k;if(p===void 0&&(p=new Date),p instanceof Date)k=me(p);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(p))throw new Error("Invalid argument passed to jsPDF.setCreationDate");k=p}return oe=k},C=d.__private__.getCreationDate=function(p){var k=oe;return p==="jsDate"&&(k=pe(oe)),k};d.setCreationDate=function(p){return Me(p),this},d.getCreationDate=function(p){return C(p)};var F,q=d.__private__.padd2=function(p){return("0"+parseInt(p)).slice(-2)},W=d.__private__.padd2Hex=function(p){return("00"+(p=p.toString())).substr(p.length)},K=0,ne=[],re=[],se=0,ke=[],Ne=[],Te=!1,Fe=re,Ge=function(){K=0,se=0,re=[],ne=[],ke=[],si=Yt(),gr=Yt()};d.__private__.setCustomOutputDestination=function(p){Te=!0,Fe=p};var fe=function(p){Te||(Fe=p)};d.__private__.resetCustomOutputDestination=function(){Te=!1,Fe=re};var z=d.__private__.out=function(p){return p=p.toString(),se+=p.length+1,Fe.push(p),Fe},nt=d.__private__.write=function(p){return z(arguments.length===1?p.toString():Array.prototype.join.call(arguments," "))},ze=d.__private__.getArrayBuffer=function(p){for(var k=p.length,D=new ArrayBuffer(k),V=new Uint8Array(D);k--;)V[k]=p.charCodeAt(k);return D},Se=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];d.__private__.getStandardFonts=function(){return Se};var Ae=n.fontSize||16;d.__private__.setFontSize=d.setFontSize=function(p){return Ae=B===_.ADVANCED?p/Oe:p,this};var Pe,_e=d.__private__.getFontSize=d.getFontSize=function(){return B===_.COMPAT?Ae:Ae*Oe},Ve=n.R2L||!1;d.__private__.setR2L=d.setR2L=function(p){return Ve=p,this},d.__private__.getR2L=d.getR2L=function(){return Ve};var Ze,st=d.__private__.setZoomMode=function(p){var k=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(p))Pe=p;else if(isNaN(p)){if(k.indexOf(p)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+p+'" is not recognized.');Pe=p}else Pe=parseInt(p,10)};d.__private__.getZoomMode=function(){return Pe};var ut,gt=d.__private__.setPageMode=function(p){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(p)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+p+'" is not recognized.');Ze=p};d.__private__.getPageMode=function(){return Ze};var Ct=d.__private__.setLayoutMode=function(p){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(p)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+p+'" is not recognized.');ut=p};d.__private__.getLayoutMode=function(){return ut},d.__private__.setDisplayMode=d.setDisplayMode=function(p,k,D){return st(p),Ct(k),gt(D),this};var Ye={title:"",subject:"",author:"",keywords:"",creator:""};d.__private__.getDocumentProperty=function(p){if(Object.keys(Ye).indexOf(p)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ye[p]},d.__private__.getDocumentProperties=function(){return Ye},d.__private__.setDocumentProperties=d.setProperties=d.setDocumentProperties=function(p){for(var k in Ye)Ye.hasOwnProperty(k)&&p[k]&&(Ye[k]=p[k]);return this},d.__private__.setDocumentProperty=function(p,k){if(Object.keys(Ye).indexOf(p)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ye[p]=k};var ft,Oe,bn,bt,dr,Mt={},Ft={},Fr=[],wt={},us={},Bt={},pr={},ii=null,jt=0,et=[],xt=new cp(d),fs=n.hotfixes||[],dn={},Rr={},Br=[],$e=function p(k,D,V,X,ce,we){if(!(this instanceof p))return new p(k,D,V,X,ce,we);isNaN(k)&&(k=1),isNaN(D)&&(D=0),isNaN(V)&&(V=0),isNaN(X)&&(X=1),isNaN(ce)&&(ce=0),isNaN(we)&&(we=0),this._matrix=[k,D,V,X,ce,we]};Object.defineProperty($e.prototype,"sx",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty($e.prototype,"shy",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty($e.prototype,"shx",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty($e.prototype,"sy",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty($e.prototype,"tx",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty($e.prototype,"ty",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty($e.prototype,"a",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty($e.prototype,"b",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty($e.prototype,"c",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty($e.prototype,"d",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty($e.prototype,"e",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty($e.prototype,"f",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty($e.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty($e.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty($e.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty($e.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),$e.prototype.join=function(p){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Y).join(p)},$e.prototype.multiply=function(p){var k=p.sx*this.sx+p.shy*this.shx,D=p.sx*this.shy+p.shy*this.sy,V=p.shx*this.sx+p.sy*this.shx,X=p.shx*this.shy+p.sy*this.sy,ce=p.tx*this.sx+p.ty*this.shx+this.tx,we=p.tx*this.shy+p.ty*this.sy+this.ty;return new $e(k,D,V,X,ce,we)},$e.prototype.decompose=function(){var p=this.sx,k=this.shy,D=this.shx,V=this.sy,X=this.tx,ce=this.ty,we=Math.sqrt(p*p+k*k),Ee=(p/=we)*D+(k/=we)*V;D-=p*Ee,V-=k*Ee;var Ue=Math.sqrt(D*D+V*V);return Ee/=Ue,p*(V/=Ue)<k*(D/=Ue)&&(p=-p,k=-k,Ee=-Ee,we=-we),{scale:new $e(we,0,0,Ue,0,0),translate:new $e(1,0,0,1,X,ce),rotate:new $e(p,k,-k,p,0,0),skew:new $e(1,0,Ee,1,0,0)}},$e.prototype.toString=function(p){return this.join(" ")},$e.prototype.inversed=function(){var p=this.sx,k=this.shy,D=this.shx,V=this.sy,X=this.tx,ce=this.ty,we=1/(p*V-k*D),Ee=V*we,Ue=-k*we,rt=-D*we,ot=p*we;return new $e(Ee,Ue,rt,ot,-Ee*X-rt*ce,-Ue*X-ot*ce)},$e.prototype.applyToPoint=function(p){var k=p.x*this.sx+p.y*this.shx+this.tx,D=p.x*this.shy+p.y*this.sy+this.ty;return new Xs(k,D)},$e.prototype.applyToRectangle=function(p){var k=this.applyToPoint(p),D=this.applyToPoint(new Xs(p.x+p.w,p.y+p.h));return new na(k.x,k.y,D.x-k.x,D.y-k.y)},$e.prototype.clone=function(){var p=this.sx,k=this.shy,D=this.shx,V=this.sy,X=this.tx,ce=this.ty;return new $e(p,k,D,V,X,ce)},d.Matrix=$e;var mr=d.matrixMult=function(p,k){return k.multiply(p)},jr=new $e(1,0,0,1,0,0);d.unitMatrix=d.identityMatrix=jr;var Fn=function(p,k){if(!us[p]){var D=(k instanceof Ss?"Sh":"P")+(Object.keys(wt).length+1).toString(10);k.id=D,us[p]=D,wt[D]=k,xt.publish("addPattern",k)}};d.ShadingPattern=Ss,d.TilingPattern=Ao,d.addShadingPattern=function(p,k){return E("addShadingPattern()"),Fn(p,k),this},d.beginTilingPattern=function(p){E("beginTilingPattern()"),ul(p.boundingBox[0],p.boundingBox[1],p.boundingBox[2]-p.boundingBox[0],p.boundingBox[3]-p.boundingBox[1],p.matrix)},d.endTilingPattern=function(p,k){E("endTilingPattern()"),k.stream=Ne[F].join(`
`),Fn(p,k),xt.publish("endTilingPattern",k),Br.pop().restore()};var tn=d.__private__.newObject=function(){var p=Yt();return Gn(p,!0),p},Yt=d.__private__.newObjectDeferred=function(){return K++,ne[K]=function(){return se},K},Gn=function(p,k){return k=typeof k=="boolean"&&k,ne[p]=se,k&&z(p+" 0 obj"),p},Bs=d.__private__.newAdditionalObject=function(){var p={objId:Yt(),content:""};return ke.push(p),p},si=Yt(),gr=Yt(),yr=d.__private__.decodeColorString=function(p){var k=p.split(" ");if(k.length!==2||k[1]!=="g"&&k[1]!=="G")k.length===5&&(k[4]==="k"||k[4]==="K")&&(k=[(1-k[0])*(1-k[3]),(1-k[1])*(1-k[3]),(1-k[2])*(1-k[3]),"r"]);else{var D=parseFloat(k[0]);k=[D,D,D,"r"]}for(var V="#",X=0;X<3;X++)V+=("0"+Math.floor(255*parseFloat(k[X])).toString(16)).slice(-2);return V},br=d.__private__.encodeColorString=function(p){var k;typeof p=="string"&&(p={ch1:p});var D=p.ch1,V=p.ch2,X=p.ch3,ce=p.ch4,we=p.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof D=="string"&&D.charAt(0)!=="#"){var Ee=new u0(D);if(Ee.ok)D=Ee.toHex();else if(!/^\d*\.?\d*$/.test(D))throw new Error('Invalid color "'+D+'" passed to jsPDF.encodeColorString.')}if(typeof D=="string"&&/^#[0-9A-Fa-f]{3}$/.test(D)&&(D="#"+D[1]+D[1]+D[2]+D[2]+D[3]+D[3]),typeof D=="string"&&/^#[0-9A-Fa-f]{6}$/.test(D)){var Ue=parseInt(D.substr(1),16);D=Ue>>16&255,V=Ue>>8&255,X=255&Ue}if(V===void 0||ce===void 0&&D===V&&V===X)if(typeof D=="string")k=D+" "+we[0];else switch(p.precision){case 2:k=le(D/255)+" "+we[0];break;case 3:default:k=I(D/255)+" "+we[0]}else if(ce===void 0||Lt(ce)==="object"){if(ce&&!isNaN(ce.a)&&ce.a===0)return k=["1.","1.","1.",we[1]].join(" ");if(typeof D=="string")k=[D,V,X,we[1]].join(" ");else switch(p.precision){case 2:k=[le(D/255),le(V/255),le(X/255),we[1]].join(" ");break;default:case 3:k=[I(D/255),I(V/255),I(X/255),we[1]].join(" ")}}else if(typeof D=="string")k=[D,V,X,ce,we[2]].join(" ");else switch(p.precision){case 2:k=[le(D),le(V),le(X),le(ce),we[2]].join(" ");break;case 3:default:k=[I(D),I(V),I(X),I(ce),we[2]].join(" ")}return k},qr=d.__private__.getFilters=function(){return o},tr=d.__private__.putStream=function(p){var k=(p=p||{}).data||"",D=p.filters||qr(),V=p.alreadyAppliedFilters||[],X=p.addLength1||!1,ce=k.length,we=p.objectId,Ee=function(wn){return wn};if(f!==null&&we===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(Ee=vn.encryptor(we,0));var Ue={};D===!0&&(D=["FlateEncode"]);var rt=p.additionalKeyValues||[],ot=(Ue=Je.API.processDataByFilters!==void 0?Je.API.processDataByFilters(k,D):{data:k,reverseChain:[]}).reverseChain+(Array.isArray(V)?V.join(" "):V.toString());if(Ue.data.length!==0&&(rt.push({key:"Length",value:Ue.data.length}),X===!0&&rt.push({key:"Length1",value:ce})),ot.length!=0)if(ot.split("/").length-1==1)rt.push({key:"Filter",value:ot});else{rt.push({key:"Filter",value:"["+ot+"]"});for(var mt=0;mt<rt.length;mt+=1)if(rt[mt].key==="DecodeParms"){for(var Rt=[],qt=0;qt<Ue.reverseChain.split("/").length-1;qt+=1)Rt.push("null");Rt.push(rt[mt].value),rt[mt].value="["+Rt.join(" ")+"]"}}z("<<");for(var Xt=0;Xt<rt.length;Xt++)z("/"+rt[Xt].key+" "+rt[Xt].value);z(">>"),Ue.data.length!==0&&(z("stream"),z(Ee(Ue.data)),z("endstream"))},zr=d.__private__.putPage=function(p){var k=p.number,D=p.data,V=p.objId,X=p.contentsObjId;Gn(V,!0),z("<</Type /Page"),z("/Parent "+p.rootDictionaryObjId+" 0 R"),z("/Resources "+p.resourceDictionaryObjId+" 0 R"),z("/MediaBox ["+parseFloat(Y(p.mediaBox.bottomLeftX))+" "+parseFloat(Y(p.mediaBox.bottomLeftY))+" "+Y(p.mediaBox.topRightX)+" "+Y(p.mediaBox.topRightY)+"]"),p.cropBox!==null&&z("/CropBox ["+Y(p.cropBox.bottomLeftX)+" "+Y(p.cropBox.bottomLeftY)+" "+Y(p.cropBox.topRightX)+" "+Y(p.cropBox.topRightY)+"]"),p.bleedBox!==null&&z("/BleedBox ["+Y(p.bleedBox.bottomLeftX)+" "+Y(p.bleedBox.bottomLeftY)+" "+Y(p.bleedBox.topRightX)+" "+Y(p.bleedBox.topRightY)+"]"),p.trimBox!==null&&z("/TrimBox ["+Y(p.trimBox.bottomLeftX)+" "+Y(p.trimBox.bottomLeftY)+" "+Y(p.trimBox.topRightX)+" "+Y(p.trimBox.topRightY)+"]"),p.artBox!==null&&z("/ArtBox ["+Y(p.artBox.bottomLeftX)+" "+Y(p.artBox.bottomLeftY)+" "+Y(p.artBox.topRightX)+" "+Y(p.artBox.topRightY)+"]"),typeof p.userUnit=="number"&&p.userUnit!==1&&z("/UserUnit "+p.userUnit),xt.publish("putPage",{objId:V,pageContext:et[k],pageNumber:k,page:D}),z("/Contents "+X+" 0 R"),z(">>"),z("endobj");var ce=D.join(`
`);return B===_.ADVANCED&&(ce+=`
Q`),Gn(X,!0),tr({data:ce,filters:qr(),objectId:X}),z("endobj"),V},hs=d.__private__.putPages=function(){var p,k,D=[];for(p=1;p<=jt;p++)et[p].objId=Yt(),et[p].contentsObjId=Yt();for(p=1;p<=jt;p++)D.push(zr({number:p,data:Ne[p],objId:et[p].objId,contentsObjId:et[p].contentsObjId,mediaBox:et[p].mediaBox,cropBox:et[p].cropBox,bleedBox:et[p].bleedBox,trimBox:et[p].trimBox,artBox:et[p].artBox,userUnit:et[p].userUnit,rootDictionaryObjId:si,resourceDictionaryObjId:gr}));Gn(si,!0),z("<</Type /Pages");var V="/Kids [";for(k=0;k<jt;k++)V+=D[k]+" 0 R ";z(V+"]"),z("/Count "+jt),z(">>"),z("endobj"),xt.publish("postPutPages")},js=function(p){xt.publish("putFont",{font:p,out:z,newObject:tn,putStream:tr}),p.isAlreadyPutted!==!0&&(p.objectNumber=tn(),z("<<"),z("/Type /Font"),z("/BaseFont /"+wo(p.postScriptName)),z("/Subtype /Type1"),typeof p.encoding=="string"&&z("/Encoding /"+p.encoding),z("/FirstChar 32"),z("/LastChar 255"),z(">>"),z("endobj"))},qs=function(){for(var p in Mt)Mt.hasOwnProperty(p)&&(m===!1||m===!0&&y.hasOwnProperty(p))&&js(Mt[p])},zs=function(p){p.objectNumber=tn();var k=[];k.push({key:"Type",value:"/XObject"}),k.push({key:"Subtype",value:"/Form"}),k.push({key:"BBox",value:"["+[Y(p.x),Y(p.y),Y(p.x+p.width),Y(p.y+p.height)].join(" ")+"]"}),k.push({key:"Matrix",value:"["+p.matrix.toString()+"]"});var D=p.pages[1].join(`
`);tr({data:D,additionalKeyValues:k,objectId:p.objectNumber}),z("endobj")},Vs=function(){for(var p in dn)dn.hasOwnProperty(p)&&zs(dn[p])},$a=function(p,k){var D,V=[],X=1/(k-1);for(D=0;D<1;D+=X)V.push(D);if(V.push(1),p[0].offset!=0){var ce={offset:0,color:p[0].color};p.unshift(ce)}if(p[p.length-1].offset!=1){var we={offset:1,color:p[p.length-1].color};p.push(we)}for(var Ee="",Ue=0,rt=0;rt<V.length;rt++){for(D=V[rt];D>p[Ue+1].offset;)Ue++;var ot=p[Ue].offset,mt=(D-ot)/(p[Ue+1].offset-ot),Rt=p[Ue].color,qt=p[Ue+1].color;Ee+=W(Math.round((1-mt)*Rt[0]+mt*qt[0]).toString(16))+W(Math.round((1-mt)*Rt[1]+mt*qt[1]).toString(16))+W(Math.round((1-mt)*Rt[2]+mt*qt[2]).toString(16))}return Ee.trim()},Ec=function(p,k){k||(k=21);var D=tn(),V=$a(p.colors,k),X=[];X.push({key:"FunctionType",value:"0"}),X.push({key:"Domain",value:"[0.0 1.0]"}),X.push({key:"Size",value:"["+k+"]"}),X.push({key:"BitsPerSample",value:"8"}),X.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),X.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),tr({data:V,additionalKeyValues:X,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:D}),z("endobj"),p.objectNumber=tn(),z("<< /ShadingType "+p.type),z("/ColorSpace /DeviceRGB");var ce="/Coords ["+Y(parseFloat(p.coords[0]))+" "+Y(parseFloat(p.coords[1]))+" ";p.type===2?ce+=Y(parseFloat(p.coords[2]))+" "+Y(parseFloat(p.coords[3])):ce+=Y(parseFloat(p.coords[2]))+" "+Y(parseFloat(p.coords[3]))+" "+Y(parseFloat(p.coords[4]))+" "+Y(parseFloat(p.coords[5])),z(ce+="]"),p.matrix&&z("/Matrix ["+p.matrix.toString()+"]"),z("/Function "+D+" 0 R"),z("/Extend [true true]"),z(">>"),z("endobj")},Dc=function(p,k){var D=Yt(),V=tn();k.push({resourcesOid:D,objectOid:V}),p.objectNumber=V;var X=[];X.push({key:"Type",value:"/Pattern"}),X.push({key:"PatternType",value:"1"}),X.push({key:"PaintType",value:"1"}),X.push({key:"TilingType",value:"1"}),X.push({key:"BBox",value:"["+p.boundingBox.map(Y).join(" ")+"]"}),X.push({key:"XStep",value:Y(p.xStep)}),X.push({key:"YStep",value:Y(p.yStep)}),X.push({key:"Resources",value:D+" 0 R"}),p.matrix&&X.push({key:"Matrix",value:"["+p.matrix.toString()+"]"}),tr({data:p.stream,additionalKeyValues:X,objectId:p.objectNumber}),z("endobj")},Hs=function(p){var k;for(k in wt)wt.hasOwnProperty(k)&&(wt[k]instanceof Ss?Ec(wt[k]):wt[k]instanceof Ao&&Dc(wt[k],p))},Ja=function(p){for(var k in p.objectNumber=tn(),z("<<"),p)switch(k){case"opacity":z("/ca "+le(p[k]));break;case"stroke-opacity":z("/CA "+le(p[k]))}z(">>"),z("endobj")},Fc=function(){var p;for(p in Bt)Bt.hasOwnProperty(p)&&Ja(Bt[p])},$o=function(){for(var p in z("/XObject <<"),dn)dn.hasOwnProperty(p)&&dn[p].objectNumber>=0&&z("/"+p+" "+dn[p].objectNumber+" 0 R");xt.publish("putXobjectDict"),z(">>")},Rc=function(){vn.oid=tn(),z("<<"),z("/Filter /Standard"),z("/V "+vn.v),z("/R "+vn.r),z("/U <"+vn.toHexString(vn.U)+">"),z("/O <"+vn.toHexString(vn.O)+">"),z("/P "+vn.P),z(">>"),z("endobj")},Ga=function(){for(var p in z("/Font <<"),Mt)Mt.hasOwnProperty(p)&&(m===!1||m===!0&&y.hasOwnProperty(p))&&z("/"+p+" "+Mt[p].objectNumber+" 0 R");z(">>")},Bc=function(){if(Object.keys(wt).length>0){for(var p in z("/Shading <<"),wt)wt.hasOwnProperty(p)&&wt[p]instanceof Ss&&wt[p].objectNumber>=0&&z("/"+p+" "+wt[p].objectNumber+" 0 R");xt.publish("putShadingPatternDict"),z(">>")}},Us=function(p){if(Object.keys(wt).length>0){for(var k in z("/Pattern <<"),wt)wt.hasOwnProperty(k)&&wt[k]instanceof d.TilingPattern&&wt[k].objectNumber>=0&&wt[k].objectNumber<p&&z("/"+k+" "+wt[k].objectNumber+" 0 R");xt.publish("putTilingPatternDict"),z(">>")}},jc=function(){if(Object.keys(Bt).length>0){var p;for(p in z("/ExtGState <<"),Bt)Bt.hasOwnProperty(p)&&Bt[p].objectNumber>=0&&z("/"+p+" "+Bt[p].objectNumber+" 0 R");xt.publish("putGStateDict"),z(">>")}},Wt=function(p){Gn(p.resourcesOid,!0),z("<<"),z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ga(),Bc(),Us(p.objectOid),jc(),$o(),z(">>"),z("endobj")},Ka=function(){var p=[];qs(),Fc(),Vs(),Hs(p),xt.publish("putResources"),p.forEach(Wt),Wt({resourcesOid:gr,objectOid:Number.MAX_SAFE_INTEGER}),xt.publish("postPutResources")},Ya=function(){xt.publish("putAdditionalObjects");for(var p=0;p<ke.length;p++){var k=ke[p];Gn(k.objId,!0),z(k.content),z("endobj")}xt.publish("postPutAdditionalObjects")},Xa=function(p){Ft[p.fontName]=Ft[p.fontName]||{},Ft[p.fontName][p.fontStyle]=p.id},Jo=function(p,k,D,V,X){var ce={id:"F"+(Object.keys(Mt).length+1).toString(10),postScriptName:p,fontName:k,fontStyle:D,encoding:V,isStandardFont:X||!1,metadata:{}};return xt.publish("addFont",{font:ce,instance:this}),Mt[ce.id]=ce,Xa(ce),ce.id},qc=function(p){for(var k=0,D=Se.length;k<D;k++){var V=Jo.call(this,p[k][0],p[k][1],p[k][2],Se[k][3],!0);m===!1&&(y[V]=!0);var X=p[k][0].split("-");Xa({id:V,fontName:X[0],fontStyle:X[1]||""})}xt.publish("addFonts",{fonts:Mt,dictionary:Ft})},vr=function(p){return p.foo=function(){try{return p.apply(this,arguments)}catch(V){var k=V.stack||"";~k.indexOf(" at ")&&(k=k.split(" at ")[1]);var D="Error in function "+k.split(`
`)[0].split("<")[0]+": "+V.message;if(!Ke.console)throw new Error(D);Ke.console.error(D,V),Ke.alert&&alert(D)}},p.foo.bar=p,p.foo},Ws=function(p,k){var D,V,X,ce,we,Ee,Ue,rt,ot;if(X=(k=k||{}).sourceEncoding||"Unicode",we=k.outputEncoding,(k.autoencode||we)&&Mt[ft].metadata&&Mt[ft].metadata[X]&&Mt[ft].metadata[X].encoding&&(ce=Mt[ft].metadata[X].encoding,!we&&Mt[ft].encoding&&(we=Mt[ft].encoding),!we&&ce.codePages&&(we=ce.codePages[0]),typeof we=="string"&&(we=ce[we]),we)){for(Ue=!1,Ee=[],D=0,V=p.length;D<V;D++)(rt=we[p.charCodeAt(D)])?Ee.push(String.fromCharCode(rt)):Ee.push(p[D]),Ee[D].charCodeAt(0)>>8&&(Ue=!0);p=Ee.join("")}for(D=p.length;Ue===void 0&&D!==0;)p.charCodeAt(D-1)>>8&&(Ue=!0),D--;if(!Ue)return p;for(Ee=k.noBOM?[]:[254,255],D=0,V=p.length;D<V;D++){if((ot=(rt=p.charCodeAt(D))>>8)>>8)throw new Error("Character at position "+D+" of string '"+p+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ee.push(ot),Ee.push(rt-(ot<<8))}return String.fromCharCode.apply(void 0,Ee)},Rn=d.__private__.pdfEscape=d.pdfEscape=function(p,k){return Ws(p,k).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Go=d.__private__.beginPage=function(p){Ne[++jt]=[],et[jt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(p[0]),topRightY:Number(p[1])}},Za(jt),fe(Ne[F])},Qa=function(p,k){var D,V,X;switch(t=k||t,typeof p=="string"&&(D=x(p.toLowerCase()),Array.isArray(D)&&(V=D[0],X=D[1])),Array.isArray(p)&&(V=p[0]*Oe,X=p[1]*Oe),isNaN(V)&&(V=i[0],X=i[1]),(V>14400||X>14400)&&(Ot.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),V=Math.min(14400,V),X=Math.min(14400,X)),i=[V,X],t.substr(0,1)){case"l":X>V&&(i=[X,V]);break;case"p":V>X&&(i=[X,V])}Go(i),sl(Qo),z(wr),ea!==0&&z(ea+" J"),ta!==0&&z(ta+" j"),xt.publish("addPage",{pageNumber:jt})},zc=function(p){p>0&&p<=jt&&(Ne.splice(p,1),et.splice(p,1),jt--,F>jt&&(F=jt),this.setPage(F))},Za=function(p){p>0&&p<=jt&&(F=p)},Vc=d.__private__.getNumberOfPages=d.getNumberOfPages=function(){return Ne.length-1},el=function(p,k,D){var V,X=void 0;return D=D||{},p=p!==void 0?p:Mt[ft].fontName,k=k!==void 0?k:Mt[ft].fontStyle,V=p.toLowerCase(),Ft[V]!==void 0&&Ft[V][k]!==void 0?X=Ft[V][k]:Ft[p]!==void 0&&Ft[p][k]!==void 0?X=Ft[p][k]:D.disableWarning===!1&&Ot.warn("Unable to look up font label for font '"+p+"', '"+k+"'. Refer to getFontList() for available fonts."),X||D.noFallback||(X=Ft.times[k])==null&&(X=Ft.times.normal),X},Hc=d.__private__.putInfo=function(){var p=tn(),k=function(V){return V};for(var D in f!==null&&(k=vn.encryptor(p,0)),z("<<"),z("/Producer ("+Rn(k("jsPDF "+Je.version))+")"),Ye)Ye.hasOwnProperty(D)&&Ye[D]&&z("/"+D.substr(0,1).toUpperCase()+D.substr(1)+" ("+Rn(k(Ye[D]))+")");z("/CreationDate ("+Rn(k(oe))+")"),z(">>"),z("endobj")},Ko=d.__private__.putCatalog=function(p){var k=(p=p||{}).rootDictionaryObjId||si;switch(tn(),z("<<"),z("/Type /Catalog"),z("/Pages "+k+" 0 R"),Pe||(Pe="fullwidth"),Pe){case"fullwidth":z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":z("/OpenAction [3 0 R /Fit]");break;case"original":z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var D=""+Pe;D.substr(D.length-1)==="%"&&(Pe=parseInt(Pe)/100),typeof Pe=="number"&&z("/OpenAction [3 0 R /XYZ null null "+le(Pe)+"]")}switch(ut||(ut="continuous"),ut){case"continuous":z("/PageLayout /OneColumn");break;case"single":z("/PageLayout /SinglePage");break;case"two":case"twoleft":z("/PageLayout /TwoColumnLeft");break;case"tworight":z("/PageLayout /TwoColumnRight")}Ze&&z("/PageMode /"+Ze),xt.publish("putCatalog"),z(">>"),z("endobj")},Uc=d.__private__.putTrailer=function(){z("trailer"),z("<<"),z("/Size "+(K+1)),z("/Root "+K+" 0 R"),z("/Info "+(K-1)+" 0 R"),f!==null&&z("/Encrypt "+vn.oid+" 0 R"),z("/ID [ <"+ie+"> <"+ie+"> ]"),z(">>")},Wc=d.__private__.putHeader=function(){z("%PDF-"+v),z("%\xBA\xDF\xAC\xE0")},$c=d.__private__.putXRef=function(){var p="0000000000";z("xref"),z("0 "+(K+1)),z("0000000000 65535 f ");for(var k=1;k<=K;k++)typeof ne[k]=="function"?z((p+ne[k]()).slice(-10)+" 00000 n "):ne[k]!==void 0?z((p+ne[k]).slice(-10)+" 00000 n "):z("0000000000 00000 n ")},oi=d.__private__.buildDocument=function(){Ge(),fe(re),xt.publish("buildDocument"),Wc(),hs(),Ya(),Ka(),f!==null&&Rc(),Hc(),Ko();var p=se;return $c(),Uc(),z("startxref"),z(""+p),z("%%EOF"),fe(Ne[F]),re.join(`
`)},$s=d.__private__.getBlob=function(p){return new Blob([ze(p)],{type:"application/pdf"})},Js=d.output=d.__private__.output=vr(function(p,k){switch(typeof(k=k||{})=="string"?k={filename:k}:k.filename=k.filename||"generated.pdf",p){case void 0:return oi();case"save":d.save(k.filename);break;case"arraybuffer":return ze(oi());case"blob":return $s(oi());case"bloburi":case"bloburl":if(Ke.URL!==void 0&&typeof Ke.URL.createObjectURL=="function")return Ke.URL&&Ke.URL.createObjectURL($s(oi()))||void 0;Ot.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var D="",V=oi();try{D=Tf(V)}catch{D=Tf(unescape(encodeURIComponent(V)))}return"data:application/pdf;filename="+k.filename+";base64,"+D;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ke)==="[object Window]"){var X="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ce=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';k.pdfObjectUrl&&(X=k.pdfObjectUrl,ce="");var we='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+X+'"'+ce+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(k)+");<\/script></body></html>",Ee=Ke.open();return Ee!==null&&Ee.document.write(we),Ee}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ke)==="[object Window]"){var Ue='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(k.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+k.filename+'" width="500px" height="400px" /></body></html>',rt=Ke.open();if(rt!==null){rt.document.write(Ue);var ot=this;rt.document.documentElement.querySelector("#pdfViewer").onload=function(){rt.document.title=k.filename,rt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ot.output("bloburl"))}}return rt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ke)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",k)+'"></iframe></body></html>',Rt=Ke.open();if(Rt!==null&&(Rt.document.write(mt),Rt.document.title=k.filename),Rt||typeof safari>"u")return Rt;break;case"datauri":case"dataurl":return Ke.document.location.href=this.output("datauristring",k);default:return null}}),tl=function(p){return Array.isArray(fs)===!0&&fs.indexOf(p)>-1};switch(r){case"pt":Oe=1;break;case"mm":Oe=72/25.4;break;case"cm":Oe=72/2.54;break;case"in":Oe=72;break;case"px":Oe=tl("px_scaling")==1?.75:96/72;break;case"pc":case"em":Oe=12;break;case"ex":Oe=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Oe=r}var vn=null;Me(),te();var Jc=function(p){return f!==null?vn.encryptor(p,0):function(k){return k}},nl=d.__private__.getPageInfo=d.getPageInfo=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:et[p].objId,pageNumber:p,pageContext:et[p]}},Qe=d.__private__.getPageInfoByObjId=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var k in et)if(et[k].objId===p)break;return nl(k)},Gc=d.__private__.getCurrentPageInfo=d.getCurrentPageInfo=function(){return{objId:et[F].objId,pageNumber:F,pageContext:et[F]}};d.addPage=function(){return Qa.apply(this,arguments),this},d.setPage=function(){return Za.apply(this,arguments),fe.call(this,Ne[F]),this},d.insertPage=function(p){return this.addPage(),this.movePage(F,p),this},d.movePage=function(p,k){var D,V;if(p>k){D=Ne[p],V=et[p];for(var X=p;X>k;X--)Ne[X]=Ne[X-1],et[X]=et[X-1];Ne[k]=D,et[k]=V,this.setPage(k)}else if(p<k){D=Ne[p],V=et[p];for(var ce=p;ce<k;ce++)Ne[ce]=Ne[ce+1],et[ce]=et[ce+1];Ne[k]=D,et[k]=V,this.setPage(k)}return this},d.deletePage=function(){return zc.apply(this,arguments),this},d.__private__.text=d.text=function(p,k,D,V,X){var ce,we,Ee,Ue,rt,ot,mt,Rt,qt,Xt=(V=V||{}).scope||this;if(typeof p=="number"&&typeof k=="number"&&(typeof D=="string"||Array.isArray(D))){var wn=D;D=k,k=p,p=wn}if(arguments[3]instanceof $e?(E("The transform parameter of text() with a Matrix value"),qt=X):(Ee=arguments[4],Ue=arguments[5],Lt(mt=arguments[3])==="object"&&mt!==null||(typeof Ee=="string"&&(Ue=Ee,Ee=null),typeof mt=="string"&&(Ue=mt,mt=null),typeof mt=="number"&&(Ee=mt,mt=null),V={flags:mt,angle:Ee,align:Ue})),isNaN(k)||isNaN(D)||p==null)throw new Error("Invalid arguments passed to jsPDF.text");if(p.length===0)return Xt;var an="",xr=!1,Kn=typeof V.lineHeightFactor=="number"?V.lineHeightFactor:ps,li=Xt.internal.scaleFactor;function fl(Tt){return Tt=Tt.split("	").join(Array(V.TabLen||9).join(" ")),Rn(Tt,mt)}function oa(Tt){for(var Et,$t=Tt.concat(),nn=[],hi=$t.length;hi--;)typeof(Et=$t.shift())=="string"?nn.push(Et):Array.isArray(Tt)&&(Et.length===1||Et[1]===void 0&&Et[2]===void 0)?nn.push(Et[0]):nn.push([Et[0],Et[1],Et[2]]);return nn}function aa(Tt,Et){var $t;if(typeof Tt=="string")$t=Et(Tt)[0];else if(Array.isArray(Tt)){for(var nn,hi,Ti=Tt.concat(),ao=[],dl=Ti.length;dl--;)typeof(nn=Ti.shift())=="string"?ao.push(Et(nn)[0]):Array.isArray(nn)&&typeof nn[0]=="string"&&(hi=Et(nn[0],nn[1],nn[2]),ao.push([hi[0],hi[1],hi[2]]));$t=ao}return $t}var Zs=!1,la=!0;if(typeof p=="string")Zs=!0;else if(Array.isArray(p)){var ca=p.concat();we=[];for(var eo,Bn=ca.length;Bn--;)(typeof(eo=ca.shift())!="string"||Array.isArray(eo)&&typeof eo[0]!="string")&&(la=!1);Zs=la}if(Zs===!1)throw new Error('Type of text must be string or Array. "'+p+'" is not recognized.');typeof p=="string"&&(p=p.match(/[\r?\n]/)?p.split(/\r\n|\r|\n/g):[p]);var to=Ae/Xt.internal.scaleFactor,no=to*(Kn-1);switch(V.baseline){case"bottom":D-=no;break;case"top":D+=to-no;break;case"hanging":D+=to-2*no;break;case"middle":D+=to/2-no}if((ot=V.maxWidth||0)>0&&(typeof p=="string"?p=Xt.splitTextToSize(p,ot):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(Tt,Et){return Tt.concat(Xt.splitTextToSize(Et,ot))},[]))),ce={text:p,x:k,y:D,options:V,mutex:{pdfEscape:Rn,activeFontKey:ft,fonts:Mt,activeFontSize:Ae}},xt.publish("preProcessText",ce),p=ce.text,Ee=(V=ce.options).angle,!(qt instanceof $e)&&Ee&&typeof Ee=="number"){Ee*=Math.PI/180,V.rotationDirection===0&&(Ee=-Ee),B===_.ADVANCED&&(Ee=-Ee);var ro=Math.cos(Ee),ua=Math.sin(Ee);qt=new $e(ro,ua,-ua,ro,0,0)}else Ee&&Ee instanceof $e&&(qt=Ee);B!==_.ADVANCED||qt||(qt=jr),(rt=V.charSpace||Ys)!==void 0&&(an+=Y(O(rt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Rt=V.horizontalScale)!==void 0&&(an+=Y(100*Rt)+` Tz
`),V.lang;var jn=-1,iu=V.renderingMode!==void 0?V.renderingMode:V.stroke,fa=Xt.internal.getCurrentPageInfo().pageContext;switch(iu){case 0:case!1:case"fill":jn=0;break;case 1:case!0:case"stroke":jn=1;break;case 2:case"fillThenStroke":jn=2;break;case 3:case"invisible":jn=3;break;case 4:case"fillAndAddForClipping":jn=4;break;case 5:case"strokeAndAddPathForClipping":jn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":jn=6;break;case 7:case"addToPathForClipping":jn=7}var hl=fa.usedRenderingMode!==void 0?fa.usedRenderingMode:-1;jn!==-1?an+=jn+` Tr
`:hl!==-1&&(an+=`0 Tr
`),jn!==-1&&(fa.usedRenderingMode=jn),Ue=V.align||"left";var Sr,ha=Ae*Kn,su=Xt.internal.pageSize.getWidth(),ou=Mt[ft];rt=V.charSpace||Ys,ot=V.maxWidth||0,mt=Object.assign({autoencode:!0,noBOM:!0},V.flags);var Mi=[];if(Object.prototype.toString.call(p)==="[object Array]"){var nr;we=oa(p),Ue!=="left"&&(Sr=we.map(function(Tt){return Xt.getStringUnitWidth(Tt,{font:ou,charSpace:rt,fontSize:Ae,doKerning:!1})*Ae/li}));var Nr,Pi=0;if(Ue==="right"){k-=Sr[0],p=[],Bn=we.length;for(var Hr=0;Hr<Bn;Hr++)Hr===0?(Nr=ai(k),nr=Li(D)):(Nr=O(Pi-Sr[Hr]),nr=-ha),p.push([we[Hr],Nr,nr]),Pi=Sr[Hr]}else if(Ue==="center"){k-=Sr[0]/2,p=[],Bn=we.length;for(var ci=0;ci<Bn;ci++)ci===0?(Nr=ai(k),nr=Li(D)):(Nr=O((Pi-Sr[ci])/2),nr=-ha),p.push([we[ci],Nr,nr]),Pi=Sr[ci]}else if(Ue==="left"){p=[],Bn=we.length;for(var io=0;io<Bn;io++)p.push(we[io])}else{if(Ue!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');p=[],Bn=we.length,ot=ot!==0?ot:su;for(var kr=0;kr<Bn;kr++)nr=kr===0?Li(D):-ha,Nr=kr===0?ai(k):0,kr<Bn-1?Mi.push(Y(O((ot-Sr[kr])/(we[kr].split(" ").length-1)))):Mi.push(0),p.push([we[kr],Nr,nr])}}var so=typeof V.R2L=="boolean"?V.R2L:Ve;so===!0&&(p=aa(p,function(Tt,Et,$t){return[Tt.split("").reverse().join(""),Et,$t]})),ce={text:p,x:k,y:D,options:V,mutex:{pdfEscape:Rn,activeFontKey:ft,fonts:Mt,activeFontSize:Ae}},xt.publish("postProcessText",ce),p=ce.text,xr=ce.mutex.isHex||!1;var da=Mt[ft].encoding;da!=="WinAnsiEncoding"&&da!=="StandardEncoding"||(p=aa(p,function(Tt,Et,$t){return[fl(Tt),Et,$t]})),we=oa(p),p=[];for(var Oi,Ar,ui,ys=0,oo=1,bs=Array.isArray(we[0])?oo:ys,Ii="",pa=function(Tt,Et,$t){var nn="";return $t instanceof $e?($t=typeof V.angle=="number"?mr($t,new $e(1,0,0,1,Tt,Et)):mr(new $e(1,0,0,1,Tt,Et),$t),B===_.ADVANCED&&($t=mr(new $e(1,0,0,-1,0,0),$t)),nn=$t.join(" ")+` Tm
`):nn=Y(Tt)+" "+Y(Et)+` Td
`,nn},rr=0;rr<we.length;rr++){switch(Ii="",bs){case oo:ui=(xr?"<":"(")+we[rr][0]+(xr?">":")"),Oi=parseFloat(we[rr][1]),Ar=parseFloat(we[rr][2]);break;case ys:ui=(xr?"<":"(")+we[rr]+(xr?">":")"),Oi=ai(k),Ar=Li(D)}Mi!==void 0&&Mi[rr]!==void 0&&(Ii=Mi[rr]+` Tw
`),rr===0?p.push(Ii+pa(Oi,Ar,qt)+ui):bs===ys?p.push(Ii+ui):bs===oo&&p.push(Ii+pa(Oi,Ar,qt)+ui)}p=bs===ys?p.join(` Tj
T* `):p.join(` Tj
`),p+=` Tj
`;var fi=`BT
/`;return fi+=ft+" "+Ae+` Tf
`,fi+=Y(Ae*Kn)+` TL
`,fi+=ms+`
`,fi+=an,fi+=p,z(fi+="ET"),y[ft]=!0,Xt};var Kc=d.__private__.clip=d.clip=function(p){return z(p==="evenodd"?"W*":"W"),this};d.clipEvenOdd=function(){return Kc("evenodd")},d.__private__.discardPath=d.discardPath=function(){return z("n"),this};var Vr=d.__private__.isValidStyle=function(p){var k=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(p)!==-1&&(k=!0),k};d.__private__.setDefaultPathOperation=d.setDefaultPathOperation=function(p){return Vr(p)&&(u=p),this};var rl=d.__private__.getStyle=d.getStyle=function(p){var k=u;switch(p){case"D":case"S":k="S";break;case"F":k="f";break;case"FD":case"DF":k="B";break;case"f":case"f*":case"B":case"B*":k=p}return k},il=d.close=function(){return z("h"),this};d.stroke=function(){return z("S"),this},d.fill=function(p){return Gs("f",p),this},d.fillEvenOdd=function(p){return Gs("f*",p),this},d.fillStroke=function(p){return Gs("B",p),this},d.fillStrokeEvenOdd=function(p){return Gs("B*",p),this};var Gs=function(p,k){Lt(k)==="object"?Xc(k,p):z(p)},Yo=function(p){p===null||B===_.ADVANCED&&p===void 0||(p=rl(p),z(p))};function Yc(p,k,D,V,X){var ce=new Ao(k||this.boundingBox,D||this.xStep,V||this.yStep,this.gState,X||this.matrix);ce.stream=this.stream;var we=p+"$$"+this.cloneIndex+++"$$";return Fn(we,ce),ce}var Xc=function(p,k){var D=us[p.key],V=wt[D];if(V instanceof Ss)z("q"),z(Qc(k)),V.gState&&d.setGState(V.gState),z(p.matrix.toString()+" cm"),z("/"+D+" sh"),z("Q");else if(V instanceof Ao){var X=new $e(1,0,0,-1,0,_i());p.matrix&&(X=X.multiply(p.matrix||jr),D=Yc.call(V,p.key,p.boundingBox,p.xStep,p.yStep,X).id),z("q"),z("/Pattern cs"),z("/"+D+" scn"),V.gState&&d.setGState(V.gState),z(k),z("Q")}},Qc=function(p){switch(p){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Xo=d.moveTo=function(p,k){return z(Y(O(p))+" "+Y(R(k))+" m"),this},ds=d.lineTo=function(p,k){return z(Y(O(p))+" "+Y(R(k))+" l"),this},Ai=d.curveTo=function(p,k,D,V,X,ce){return z([Y(O(p)),Y(R(k)),Y(O(D)),Y(R(V)),Y(O(X)),Y(R(ce)),"c"].join(" ")),this};d.__private__.line=d.line=function(p,k,D,V,X){if(isNaN(p)||isNaN(k)||isNaN(D)||isNaN(V)||!Vr(X))throw new Error("Invalid arguments passed to jsPDF.line");return B===_.COMPAT?this.lines([[D-p,V-k]],p,k,[1,1],X||"S"):this.lines([[D-p,V-k]],p,k,[1,1]).stroke()},d.__private__.lines=d.lines=function(p,k,D,V,X,ce){var we,Ee,Ue,rt,ot,mt,Rt,qt,Xt,wn,an,xr;if(typeof p=="number"&&(xr=D,D=k,k=p,p=xr),V=V||[1,1],ce=ce||!1,isNaN(k)||isNaN(D)||!Array.isArray(p)||!Array.isArray(V)||!Vr(X)||typeof ce!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Xo(k,D),we=V[0],Ee=V[1],rt=p.length,wn=k,an=D,Ue=0;Ue<rt;Ue++)(ot=p[Ue]).length===2?(wn=ot[0]*we+wn,an=ot[1]*Ee+an,ds(wn,an)):(mt=ot[0]*we+wn,Rt=ot[1]*Ee+an,qt=ot[2]*we+wn,Xt=ot[3]*Ee+an,wn=ot[4]*we+wn,an=ot[5]*Ee+an,Ai(mt,Rt,qt,Xt,wn,an));return ce&&il(),Yo(X),this},d.path=function(p){for(var k=0;k<p.length;k++){var D=p[k],V=D.c;switch(D.op){case"m":Xo(V[0],V[1]);break;case"l":ds(V[0],V[1]);break;case"c":Ai.apply(this,V);break;case"h":il()}}return this},d.__private__.rect=d.rect=function(p,k,D,V,X){if(isNaN(p)||isNaN(k)||isNaN(D)||isNaN(V)||!Vr(X))throw new Error("Invalid arguments passed to jsPDF.rect");return B===_.COMPAT&&(V=-V),z([Y(O(p)),Y(R(k)),Y(O(D)),Y(O(V)),"re"].join(" ")),Yo(X),this},d.__private__.triangle=d.triangle=function(p,k,D,V,X,ce,we){if(isNaN(p)||isNaN(k)||isNaN(D)||isNaN(V)||isNaN(X)||isNaN(ce)||!Vr(we))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[D-p,V-k],[X-D,ce-V],[p-X,k-ce]],p,k,[1,1],we,!0),this},d.__private__.roundedRect=d.roundedRect=function(p,k,D,V,X,ce,we){if(isNaN(p)||isNaN(k)||isNaN(D)||isNaN(V)||isNaN(X)||isNaN(ce)||!Vr(we))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ee=4/3*(Math.SQRT2-1);return X=Math.min(X,.5*D),ce=Math.min(ce,.5*V),this.lines([[D-2*X,0],[X*Ee,0,X,ce-ce*Ee,X,ce],[0,V-2*ce],[0,ce*Ee,-X*Ee,ce,-X,ce],[2*X-D,0],[-X*Ee,0,-X,-ce*Ee,-X,-ce],[0,2*ce-V],[0,-ce*Ee,X*Ee,-ce,X,-ce]],p+X,k,[1,1],we,!0),this},d.__private__.ellipse=d.ellipse=function(p,k,D,V,X){if(isNaN(p)||isNaN(k)||isNaN(D)||isNaN(V)||!Vr(X))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ce=4/3*(Math.SQRT2-1)*D,we=4/3*(Math.SQRT2-1)*V;return Xo(p+D,k),Ai(p+D,k-we,p+ce,k-V,p,k-V),Ai(p-ce,k-V,p-D,k-we,p-D,k),Ai(p-D,k+we,p-ce,k+V,p,k+V),Ai(p+ce,k+V,p+D,k+we,p+D,k),Yo(X),this},d.__private__.circle=d.circle=function(p,k,D,V){if(isNaN(p)||isNaN(k)||isNaN(D)||!Vr(V))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(p,k,D,D,V)},d.setFont=function(p,k,D){return D&&(k=he(k,D)),ft=el(p,k,{disableWarning:!1}),this};var Zc=d.__private__.getFont=d.getFont=function(){return Mt[el.apply(d,arguments)]};d.__private__.getFontList=d.getFontList=function(){var p,k,D={};for(p in Ft)if(Ft.hasOwnProperty(p))for(k in D[p]=[],Ft[p])Ft[p].hasOwnProperty(k)&&D[p].push(k);return D},d.addFont=function(p,k,D,V,X){var ce=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ce.indexOf(arguments[3])!==-1?X=arguments[3]:arguments[3]&&ce.indexOf(arguments[3])==-1&&(D=he(D,V)),X=X||"Identity-H",Jo.call(this,p,k,D,X)};var ps,Qo=n.lineWidth||.200025,Ks=d.__private__.getLineWidth=d.getLineWidth=function(){return Qo},sl=d.__private__.setLineWidth=d.setLineWidth=function(p){return Qo=p,z(Y(O(p))+" w"),this};d.__private__.setLineDash=Je.API.setLineDash=Je.API.setLineDashPattern=function(p,k){if(p=p||[],k=k||0,isNaN(k)||!Array.isArray(p))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return p=p.map(function(D){return Y(O(D))}).join(" "),k=Y(O(k)),z("["+p+"] "+k+" d"),this};var ol=d.__private__.getLineHeight=d.getLineHeight=function(){return Ae*ps};d.__private__.getLineHeight=d.getLineHeight=function(){return Ae*ps};var al=d.__private__.setLineHeightFactor=d.setLineHeightFactor=function(p){return typeof(p=p||1.15)=="number"&&(ps=p),this},ll=d.__private__.getLineHeightFactor=d.getLineHeightFactor=function(){return ps};al(n.lineHeight);var ai=d.__private__.getHorizontalCoordinate=function(p){return O(p)},Li=d.__private__.getVerticalCoordinate=function(p){return B===_.ADVANCED?p:et[F].mediaBox.topRightY-et[F].mediaBox.bottomLeftY-O(p)},eu=d.__private__.getHorizontalCoordinateString=d.getHorizontalCoordinateString=function(p){return Y(ai(p))},Ci=d.__private__.getVerticalCoordinateString=d.getVerticalCoordinateString=function(p){return Y(Li(p))},wr=n.strokeColor||"0 G";d.__private__.getStrokeColor=d.getDrawColor=function(){return yr(wr)},d.__private__.setStrokeColor=d.setDrawColor=function(p,k,D,V){return wr=br({ch1:p,ch2:k,ch3:D,ch4:V,pdfColorType:"draw",precision:2}),z(wr),this};var Zo=n.fillColor||"0 g";d.__private__.getFillColor=d.getFillColor=function(){return yr(Zo)},d.__private__.setFillColor=d.setFillColor=function(p,k,D,V){return Zo=br({ch1:p,ch2:k,ch3:D,ch4:V,pdfColorType:"fill",precision:2}),z(Zo),this};var ms=n.textColor||"0 g",tu=d.__private__.getTextColor=d.getTextColor=function(){return yr(ms)};d.__private__.setTextColor=d.setTextColor=function(p,k,D,V){return ms=br({ch1:p,ch2:k,ch3:D,ch4:V,pdfColorType:"text",precision:3}),this};var Ys=n.charSpace,nu=d.__private__.getCharSpace=d.getCharSpace=function(){return parseFloat(Ys||0)};d.__private__.setCharSpace=d.setCharSpace=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ys=p,this};var ea=0;d.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},d.__private__.setLineCap=d.setLineCap=function(p){var k=d.CapJoinStyles[p];if(k===void 0)throw new Error("Line cap style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ea=k,z(k+" J"),this};var ta=0;d.__private__.setLineJoin=d.setLineJoin=function(p){var k=d.CapJoinStyles[p];if(k===void 0)throw new Error("Line join style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ta=k,z(k+" j"),this},d.__private__.setLineMiterLimit=d.__private__.setMiterLimit=d.setLineMiterLimit=d.setMiterLimit=function(p){if(p=p||0,isNaN(p))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return z(Y(O(p))+" M"),this},d.GState=gc,d.setGState=function(p){(p=typeof p=="string"?Bt[pr[p]]:cl(null,p)).equals(ii)||(z("/"+p.id+" gs"),ii=p)};var cl=function(p,k){if(!p||!pr[p]){var D=!1;for(var V in Bt)if(Bt.hasOwnProperty(V)&&Bt[V].equals(k)){D=!0;break}if(D)k=Bt[V];else{var X="GS"+(Object.keys(Bt).length+1).toString(10);Bt[X]=k,k.id=X}return p&&(pr[p]=k.id),xt.publish("addGState",k),k}};d.addGState=function(p,k){return cl(p,k),this},d.saveGraphicsState=function(){return z("q"),Fr.push({key:ft,size:Ae,color:ms}),this},d.restoreGraphicsState=function(){z("Q");var p=Fr.pop();return ft=p.key,Ae=p.size,ms=p.color,ii=null,this},d.setCurrentTransformationMatrix=function(p){return z(p.toString()+" cm"),this},d.comment=function(p){return z("#"+p),this};var Xs=function(p,k){var D=p||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return D},set:function(ce){isNaN(ce)||(D=parseFloat(ce))}});var V=k||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return V},set:function(ce){isNaN(ce)||(V=parseFloat(ce))}});var X="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return X},set:function(ce){X=ce.toString()}}),this},na=function(p,k,D,V){Xs.call(this,p,k),this.type="rect";var X=D||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return X},set:function(we){isNaN(we)||(X=parseFloat(we))}});var ce=V||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ce},set:function(we){isNaN(we)||(ce=parseFloat(we))}}),this},ra=function(){this.page=jt,this.currentPage=F,this.pages=Ne.slice(0),this.pagesContext=et.slice(0),this.x=bn,this.y=bt,this.matrix=dr,this.width=gs(F),this.height=_i(F),this.outputDestination=Fe,this.id="",this.objectNumber=-1};ra.prototype.restore=function(){jt=this.page,F=this.currentPage,et=this.pagesContext,Ne=this.pages,bn=this.x,bt=this.y,dr=this.matrix,ia(F,this.width),sa(F,this.height),Fe=this.outputDestination};var ul=function(p,k,D,V,X){Br.push(new ra),jt=F=0,Ne=[],bn=p,bt=k,dr=X,Go([D,V])},ru=function(p){if(Rr[p])Br.pop().restore();else{var k=new ra,D="Xo"+(Object.keys(dn).length+1).toString(10);k.id=D,Rr[p]=D,dn[D]=k,xt.publish("addFormObject",k),Br.pop().restore()}};for(var Qs in d.beginFormObject=function(p,k,D,V,X){return ul(p,k,D,V,X),this},d.endFormObject=function(p){return ru(p),this},d.doFormObject=function(p,k){var D=dn[Rr[p]];return z("q"),z(k.toString()+" cm"),z("/"+D.id+" Do"),z("Q"),this},d.getFormObject=function(p){var k=dn[Rr[p]];return{x:k.x,y:k.y,width:k.width,height:k.height,matrix:k.matrix}},d.save=function(p,k){return p=p||"generated.pdf",(k=k||{}).returnPromise=k.returnPromise||!1,k.returnPromise===!1?(ws($s(oi()),p),typeof ws.unload=="function"&&Ke.setTimeout&&setTimeout(ws.unload,911),this):new Promise(function(D,V){try{var X=ws($s(oi()),p);typeof ws.unload=="function"&&Ke.setTimeout&&setTimeout(ws.unload,911),D(X)}catch(ce){V(ce.message)}})},Je.API)Je.API.hasOwnProperty(Qs)&&(Qs==="events"&&Je.API.events.length?function(p,k){var D,V,X;for(X=k.length-1;X!==-1;X--)D=k[X][0],V=k[X][1],p.subscribe.apply(p,[D].concat(typeof V=="function"?[V]:V))}(xt,Je.API.events):d[Qs]=Je.API[Qs]);var gs=d.getPageWidth=function(p){return(et[p=p||F].mediaBox.topRightX-et[p].mediaBox.bottomLeftX)/Oe},ia=d.setPageWidth=function(p,k){et[p].mediaBox.topRightX=k*Oe+et[p].mediaBox.bottomLeftX},_i=d.getPageHeight=function(p){return(et[p=p||F].mediaBox.topRightY-et[p].mediaBox.bottomLeftY)/Oe},sa=d.setPageHeight=function(p,k){et[p].mediaBox.topRightY=k*Oe+et[p].mediaBox.bottomLeftY};return d.internal={pdfEscape:Rn,getStyle:rl,getFont:Zc,getFontSize:_e,getCharSpace:nu,getTextColor:tu,getLineHeight:ol,getLineHeightFactor:ll,getLineWidth:Ks,write:nt,getHorizontalCoordinate:ai,getVerticalCoordinate:Li,getCoordinateString:eu,getVerticalCoordinateString:Ci,collections:{},newObject:tn,newAdditionalObject:Bs,newObjectDeferred:Yt,newObjectDeferredBegin:Gn,getFilters:qr,putStream:tr,events:xt,scaleFactor:Oe,pageSize:{getWidth:function(){return gs(F)},setWidth:function(p){ia(F,p)},getHeight:function(){return _i(F)},setHeight:function(p){sa(F,p)}},encryptionOptions:f,encryption:vn,getEncryptor:Jc,output:Js,getNumberOfPages:Vc,pages:Ne,out:z,f2:le,f3:I,getPageInfo:nl,getPageInfoByObjId:Qe,getCurrentPageInfo:Gc,getPDFVersion:w,Point:Xs,Rectangle:na,Matrix:$e,hasHotfix:tl},Object.defineProperty(d.internal.pageSize,"width",{get:function(){return gs(F)},set:function(p){ia(F,p)},enumerable:!0,configurable:!0}),Object.defineProperty(d.internal.pageSize,"height",{get:function(){return _i(F)},set:function(p){sa(F,p)},enumerable:!0,configurable:!0}),qc.call(d,Se),ft="F1",Qa(i,t),xt.publish("initialized"),d}vo.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},vo.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},vo.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},vo.prototype.processOwnerPassword=function(n,e){return Df(Ef(e).substr(0,5),n)},vo.prototype.encryptor=function(n,e){var t=Ef(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Df(t,r)}},gc.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Lt(n)!==Lt(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Je.API={events:[]},Je.version="2.5.1";var Vt=Je.API,oh=1,Rs=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},mo=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},tt=function(n){return n.toFixed(2)},Hi=function(n){return n.toFixed(5)};Vt.__acroform__={};var Jn=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},up=function(n){return n*oh},Wr=function(n){var e=new p0,t=je.internal.getHeight(n)||0,r=je.internal.getWidth(n)||0;return e.BBox=[0,0,Number(tt(r)),Number(tt(t))],e},kv=Vt.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},Av=Vt.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},Lv=Vt.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<e)==0?0:1},Jt=Vt.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Lv(n,e-1)},Gt=Vt.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return kv(n,e-1)},Kt=Vt.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Av(n,e-1)},Cv=Vt.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],o=n[2],a=n[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=t(i+o)||0,l.upperRight_Y=r(s)||0,[Number(tt(l.lowerLeft_X)),Number(tt(l.lowerLeft_Y)),Number(tt(l.upperRight_X)),Number(tt(l.upperRight_Y))]},_v=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=Ff(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+tt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Wr(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},Ff=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(I){return I.split(`
`)}):i.map(function(I){return[I]});var s=t,o=je.internal.getHeight(n)||0;o=o<0?-o:o;var a=je.internal.getWidth(n)||0;a=a<0?-a:a;var l=function(I,O,j){if(I+1<i.length){var R=O+" "+i[I+1][0];return jl(R,n,j).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var u,f,m=jl("3",n,s).height,y=n.multiline?o-s:(o-m)/2,d=y+=2,v=0,w=0,S=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+jl(e,n,s=12).width+", FieldWidth:"+a+`
`;break}for(var x="",_=0,B=0;B<i.length;B++)if(i.hasOwnProperty(B)){var $=!1;if(i[B].length!==1&&S!==i[B].length-1){if((m+2)*(_+2)+2>o)continue e;x+=i[B][S],$=!0,w=B,B--}else{x=(x+=i[B][S]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var Q=parseInt(B),he=l(Q,x,s),Y=B>=i.length-1;if(he&&!Y){x+=" ",S=0;continue}if(he||Y){if(Y)w=Q;else if(n.multiline&&(m+2)*(_+2)+2>o)continue e}else{if(!n.multiline||(m+2)*(_+2)+2>o)continue e;w=Q}}for(var E="",ue=v;ue<=w;ue++){var le=i[ue];if(n.multiline){if(ue===w){E+=le[S]+" ",S=(S+1)%le.length;continue}if(ue===v){E+=le[le.length-1]+" ";continue}}E+=le[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,f=jl(E,n,s).width,n.textAlign){case"right":u=a-f-2;break;case"center":u=(a-f)/2;break;case"left":default:u=2}e+=tt(u)+" "+tt(d)+` Td
`,e+="("+Rs(E)+`) Tj
`,e+=-tt(u)+` 0 Td
`,d=-(s+2),f=0,v=$?w:w+1,_++,x=""}break}return r.text=e,r.fontSize=s,r},jl=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},Mv={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Pv=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Ov=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),Lt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},Iv=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Er.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(Mv)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");oh=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new m0,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&Pv(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],u=a.Rect;if(a.Rect&&(a.Rect=Cv(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=je.createDefaultAppearanceStream(a),Lt(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var f=_v(a);l.push({key:"AP",value:"<</N "+f+">>"}),i.internal.acroformPlugin.xForms.push(f)}if(a.appearanceStreamContent){var m="";for(var y in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(y)){var d=a.appearanceStreamContent[y];if(m+="/"+y+" ",m+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var o in d)if(d.hasOwnProperty(o)){var v=d[o];typeof v=="function"&&(v=v.call(i,a)),m+="/"+o+" "+v+" ",i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v)}}else typeof(v=d)=="function"&&(v=v.call(i,a)),m+="/"+o+" "+v,i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v);m+=">>"}l.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&Ov(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},d0=Vt.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),Lt(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+Rs(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},tf=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+Rs(r(n))+")"},Xr=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Xr.prototype.toString=function(){return this.objId+" 0 R"},Xr.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Xr.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:d0(i,this.objId,this.scope)}):i instanceof Xr?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var p0=function(){Xr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Jn(p0,Xr);var m0=function(){Xr.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Rs(t(n))+")"}},set:function(t){n=t}})};Jn(m0,Xr);var Er=function n(){Xr.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(e,3))},set:function(x){Boolean(x)===!0?this.F=Gt(e,3):this.F=Kt(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');t=x}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(x){r=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(x){r[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(x){r[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(x){r[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(x){r[3]=x}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof yc)return;s="FieldObject"+n.FieldNum++}var x=function(_){return _};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+Rs(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(x){a=x}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/oh:u},set:function(x){u=x}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(x){f=x}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof yc||this instanceof Ps))return tf(m,this.objId,this.scope)},set:function(x){x=x.toString(),m=x}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof un?y:tf(y,this.objId,this.scope)},set:function(x){x=x.toString(),y=this instanceof un?x:x.substr(0,1)==="("?mo(x.substr(1,x.length-2)):mo(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof un?mo(y.substr(1,y.length-1)):y},set:function(x){x=x.toString(),y=this instanceof un?"/"+x:x}});var d=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(d)return d},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof un?d:tf(d,this.objId,this.scope)},set:function(x){x=x.toString(),d=this instanceof un?x:x.substr(0,1)==="("?mo(x.substr(1,x.length-2)):mo(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof un?mo(d.substr(1,d.length-1)):d},set:function(x){x=x.toString(),d=this instanceof un?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(x){x=Boolean(x),w=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(x){v=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,1))},set:function(x){Boolean(x)===!0?this.Ff=Gt(this.Ff,1):this.Ff=Kt(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,2))},set:function(x){Boolean(x)===!0?this.Ff=Gt(this.Ff,2):this.Ff=Kt(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,3))},set:function(x){Boolean(x)===!0?this.Ff=Gt(this.Ff,3):this.Ff=Kt(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');S=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(S){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};Jn(Er,Xr);var Oo=function(){Er.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return d0(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,u=[];l=o.exec(s);)u.push(l[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,18))},set:function(t){Boolean(t)===!0?this.Ff=Gt(this.Ff,18):this.Ff=Kt(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,19))},set:function(t){this.combo===!0&&(Boolean(t)===!0?this.Ff=Gt(this.Ff,19):this.Ff=Kt(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,20))},set:function(t){Boolean(t)===!0?(this.Ff=Gt(this.Ff,20),e.sort()):this.Ff=Kt(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,22))},set:function(t){Boolean(t)===!0?this.Ff=Gt(this.Ff,22):this.Ff=Kt(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,23))},set:function(t){Boolean(t)===!0?this.Ff=Gt(this.Ff,23):this.Ff=Kt(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,27))},set:function(t){Boolean(t)===!0?this.Ff=Gt(this.Ff,27):this.Ff=Kt(this.Ff,27)}}),this.hasAppearanceStream=!1};Jn(Oo,Er);var Io=function(){Oo.call(this),this.fontName="helvetica",this.combo=!1};Jn(Io,Oo);var To=function(){Io.call(this),this.combo=!0};Jn(To,Io);var Yl=function(){To.call(this),this.edit=!0};Jn(Yl,To);var un=function(){Er.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,15))},set:function(t){Boolean(t)===!0?this.Ff=Gt(this.Ff,15):this.Ff=Kt(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,16))},set:function(t){Boolean(t)===!0?this.Ff=Gt(this.Ff,16):this.Ff=Kt(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,17))},set:function(t){Boolean(t)===!0?this.Ff=Gt(this.Ff,17):this.Ff=Kt(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,26))},set:function(t){Boolean(t)===!0?this.Ff=Gt(this.Ff,26):this.Ff=Kt(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Rs(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Lt(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Jn(un,Er);var Xl=function(){un.call(this),this.pushButton=!0};Jn(Xl,un);var Eo=function(){un.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Jn(Eo,un);var yc=function(){var n,e;Er.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Rs(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Lt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=je.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Jn(yc,Er),Eo.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Eo.prototype.createOption=function(n){var e=new yc;return e.Parent=this,e.optionName=n,this.Kids.push(e),Tv.call(this.scope,e),e};var Ql=function(){un.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=je.CheckBox.createAppearanceStream()};Jn(Ql,un);var Ps=function(){Er.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,13))},set:function(e){Boolean(e)===!0?this.Ff=Gt(this.Ff,13):this.Ff=Kt(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,21))},set:function(e){Boolean(e)===!0?this.Ff=Gt(this.Ff,21):this.Ff=Kt(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,23))},set:function(e){Boolean(e)===!0?this.Ff=Gt(this.Ff,23):this.Ff=Kt(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,24))},set:function(e){Boolean(e)===!0?this.Ff=Gt(this.Ff,24):this.Ff=Kt(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,25))},set:function(e){Boolean(e)===!0?this.Ff=Gt(this.Ff,25):this.Ff=Kt(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,26))},set:function(e){Boolean(e)===!0?this.Ff=Gt(this.Ff,26):this.Ff=Kt(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Jn(Ps,Er);var Zl=function(){Ps.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Jt(this.Ff,14))},set:function(n){Boolean(n)===!0?this.Ff=Gt(this.Ff,14):this.Ff=Kt(this.Ff,14)}}),this.password=!0};Jn(Zl,Ps);var je={CheckBox:{createAppearanceStream:function(){return{N:{On:je.CheckBox.YesNormal},D:{On:je.CheckBox.YesPushDown,Off:je.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Wr(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=Ff(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+tt(je.internal.getWidth(n))+" "+tt(je.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+tt(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Wr(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=je.internal.getHeight(n),o=je.internal.getWidth(n),a=Ff(n,n.caption);return i.push("1 g"),i.push("0 0 "+tt(o)+" "+tt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+tt(o-1)+" "+tt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+tt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Wr(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+tt(je.internal.getWidth(n))+" "+tt(je.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:je.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=je.RadioButton.Circle.YesNormal,e.D[n]=je.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Wr(n);e.scope=n.scope;var t=[],r=je.internal.getWidth(n)<=je.internal.getHeight(n)?je.internal.getWidth(n)/4:je.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=je.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Hi(je.internal.getWidth(n)/2)+" "+Hi(je.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Wr(n);e.scope=n.scope;var t=[],r=je.internal.getWidth(n)<=je.internal.getHeight(n)?je.internal.getWidth(n)/4:je.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*je.internal.Bezier_C).toFixed(5)),o=Number((r*je.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Hi(je.internal.getWidth(n)/2)+" "+Hi(je.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Hi(je.internal.getWidth(n)/2)+" "+Hi(je.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Wr(n);e.scope=n.scope;var t=[],r=je.internal.getWidth(n)<=je.internal.getHeight(n)?je.internal.getWidth(n)/4:je.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*je.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Hi(je.internal.getWidth(n)/2)+" "+Hi(je.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:je.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=je.RadioButton.Cross.YesNormal,e.D[n]=je.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Wr(n);e.scope=n.scope;var t=[],r=je.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+tt(je.internal.getWidth(n)-2)+" "+tt(je.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(tt(r.x1.x)+" "+tt(r.x1.y)+" m"),t.push(tt(r.x2.x)+" "+tt(r.x2.y)+" l"),t.push(tt(r.x4.x)+" "+tt(r.x4.y)+" m"),t.push(tt(r.x3.x)+" "+tt(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Wr(n);e.scope=n.scope;var t=je.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+tt(je.internal.getWidth(n))+" "+tt(je.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+tt(je.internal.getWidth(n)-2)+" "+tt(je.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(tt(t.x1.x)+" "+tt(t.x1.y)+" m"),r.push(tt(t.x2.x)+" "+tt(t.x2.y)+" l"),r.push(tt(t.x4.x)+" "+tt(t.x4.y)+" m"),r.push(tt(t.x3.x)+" "+tt(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Wr(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+tt(je.internal.getWidth(n))+" "+tt(je.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};je.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=je.internal.getWidth(n),t=je.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},je.internal.getWidth=function(n){var e=0;return Lt(n)==="object"&&(e=up(n.Rect[2])),e},je.internal.getHeight=function(n){var e=0;return Lt(n)==="object"&&(e=up(n.Rect[3])),e};var Tv=Vt.addField=function(n){if(Iv(this,n),!(n instanceof Er))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Vt.AcroFormChoiceField=Oo,Vt.AcroFormListBox=Io,Vt.AcroFormComboBox=To,Vt.AcroFormEditBox=Yl,Vt.AcroFormButton=un,Vt.AcroFormPushButton=Xl,Vt.AcroFormRadioButton=Eo,Vt.AcroFormCheckBox=Ql,Vt.AcroFormTextField=Ps,Vt.AcroFormPasswordField=Zl,Vt.AcroFormAppearance=je,Vt.AcroForm={ChoiceField:Oo,ListBox:Io,ComboBox:To,EditBox:Yl,Button:un,PushButton:Xl,RadioButton:Eo,CheckBox:Ql,TextField:Ps,PasswordField:Zl,Appearance:je},Je.AcroForm={ChoiceField:Oo,ListBox:Io,ComboBox:To,EditBox:Yl,Button:un,PushButton:Xl,RadioButton:Eo,CheckBox:Ql,TextField:Ps,PasswordField:Zl,Appearance:je};Je.AcroForm;function g0(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(I,O){var j,R,oe,ie,de,te=e;if((O=O||e)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(he(I))for(de in t)for(oe=t[de],j=0;j<oe.length;j+=1){for(ie=!0,R=0;R<oe[j].length;R+=1)if(oe[j][R]!==void 0&&oe[j][R]!==I[R]){ie=!1;break}if(ie===!0){te=de;break}}else for(de in t)for(oe=t[de],j=0;j<oe.length;j+=1){for(ie=!0,R=0;R<oe[j].length;R+=1)if(oe[j][R]!==void 0&&oe[j][R]!==I.charCodeAt(R)){ie=!1;break}if(ie===!0){te=de;break}}return te===e&&O!==e&&(te=O),te},i=function I(O){for(var j=this.internal.write,R=this.internal.putStream,oe=(0,this.internal.getFilters)();oe.indexOf("FlateEncode")!==-1;)oe.splice(oe.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var ie=[];if(ie.push({key:"Type",value:"/XObject"}),ie.push({key:"Subtype",value:"/Image"}),ie.push({key:"Width",value:O.width}),ie.push({key:"Height",value:O.height}),O.colorSpace===S.INDEXED?ie.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(ie.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===S.DEVICE_CMYK&&ie.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ie.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&ie.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var de="",te=0,me=O.transparency.length;te<me;te++)de+=O.transparency[te]+" "+O.transparency[te]+" ";ie.push({key:"Mask",value:"["+de+"]"})}O.sMask!==void 0&&ie.push({key:"SMask",value:O.objectId+1+" 0 R"});var pe=O.filter!==void 0?["/"+O.filter]:void 0;if(R({data:O.data,additionalKeyValues:ie,alreadyAppliedFilters:pe,objectId:O.objectId}),j("endobj"),"sMask"in O&&O.sMask!==void 0){var Me="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,C={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:Me,data:O.sMask};"filter"in O&&(C.filter=O.filter),I.call(this,C)}if(O.colorSpace===S.INDEXED){var F=this.internal.newObject();R({data:E(new Uint8Array(O.palette)),objectId:F}),j("endobj")}},s=function(){var I=this.internal.collections.addImage_images;for(var O in I)i.call(this,I[O])},o=function(){var I,O=this.internal.collections.addImage_images,j=this.internal.write;for(var R in O)j("/I"+(I=O[R]).index,I.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var I=this.internal.collections.addImage_images;return a.call(this),I},u=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(I){return typeof n["process"+I.toUpperCase()]=="function"},m=function(I){return Lt(I)==="object"&&I.nodeType===1},y=function(I,O){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var j=""+I.getAttribute("src");if(j.indexOf("data:image/")===0)return Da(unescape(j).split("base64,").pop());var R=n.loadFile(j,!0);if(R!==void 0)return R}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var oe;switch(O){case"PNG":oe="image/png";break;case"WEBP":oe="image/webp";break;case"JPEG":case"JPG":default:oe="image/jpeg"}return Da(I.toDataURL(oe,1).split("base64,").pop())}},d=function(I){var O=this.internal.collections.addImage_images;if(O){for(var j in O)if(I===O[j].alias)return O[j]}},v=function(I,O,j){return I||O||(I=-96,O=-96),I<0&&(I=-1*j.width*72/I/this.internal.scaleFactor),O<0&&(O=-1*j.height*72/O/this.internal.scaleFactor),I===0&&(I=O*j.width/j.height),O===0&&(O=I*j.height/j.width),[I,O]},w=function(I,O,j,R,oe,ie){var de=v.call(this,j,R,oe),te=this.internal.getCoordinateString,me=this.internal.getVerticalCoordinateString,pe=l.call(this);if(j=de[0],R=de[1],pe[oe.index]=oe,ie){ie*=Math.PI/180;var Me=Math.cos(ie),C=Math.sin(ie),F=function(W){return W.toFixed(4)},q=[F(Me),F(C),F(-1*C),F(Me),0,0,"cm"]}this.internal.write("q"),ie?(this.internal.write([1,"0","0",1,te(I),me(O+R),"cm"].join(" ")),this.internal.write(q.join(" ")),this.internal.write([te(j),"0","0",te(R),"0","0","cm"].join(" "))):this.internal.write([te(j),"0","0",te(R),te(I),me(O+R),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+oe.index+" Do"),this.internal.write("Q")},S=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},_=n.__addimage__.sHashCode=function(I){var O,j,R=0;if(typeof I=="string")for(j=I.length,O=0;O<j;O++)R=(R<<5)-R+I.charCodeAt(O),R|=0;else if(he(I))for(j=I.byteLength/2,O=0;O<j;O++)R=(R<<5)-R+I[O],R|=0;return R},B=n.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var O=!0;return I.length===0&&(O=!1),I.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(O=!1),O},$=n.__addimage__.extractImageFromDataUrl=function(I){var O=(I=I||"").split("base64,"),j=null;if(O.length===2){var R=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(O[0]);Array.isArray(R)&&(j={mimeType:R[1],charset:R[2],data:O[1]})}return j},Q=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(I){return Q()&&I instanceof ArrayBuffer};var he=n.__addimage__.isArrayBufferView=function(I){return Q()&&typeof Uint32Array<"u"&&(I instanceof Int8Array||I instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array)},Y=n.__addimage__.binaryStringToUint8Array=function(I){for(var O=I.length,j=new Uint8Array(O),R=0;R<O;R++)j[R]=I.charCodeAt(R);return j},E=n.__addimage__.arrayBufferToBinaryString=function(I){for(var O="",j=he(I)?I:new Uint8Array(I),R=0;R<j.length;R+=8192)O+=String.fromCharCode.apply(null,j.subarray(R,R+8192));return O};n.addImage=function(){var I,O,j,R,oe,ie,de,te,me;if(typeof arguments[1]=="number"?(O=e,j=arguments[1],R=arguments[2],oe=arguments[3],ie=arguments[4],de=arguments[5],te=arguments[6],me=arguments[7]):(O=arguments[1],j=arguments[2],R=arguments[3],oe=arguments[4],ie=arguments[5],de=arguments[6],te=arguments[7],me=arguments[8]),Lt(I=arguments[0])==="object"&&!m(I)&&"imageData"in I){var pe=I;I=pe.imageData,O=pe.format||O||e,j=pe.x||j||0,R=pe.y||R||0,oe=pe.w||pe.width||oe,ie=pe.h||pe.height||ie,de=pe.alias||de,te=pe.compression||te,me=pe.rotation||pe.angle||me}var Me=this.internal.getFilters();if(te===void 0&&Me.indexOf("FlateEncode")!==-1&&(te="SLOW"),isNaN(j)||isNaN(R))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var C=ue.call(this,I,O,de,te);return w.call(this,j,R,oe,ie,C,me),this};var ue=function(I,O,j,R){var oe,ie,de;if(typeof I=="string"&&r(I)===e){I=unescape(I);var te=le(I,!1);(te!==""||(te=n.loadFile(I,!0))!==void 0)&&(I=te)}if(m(I)&&(I=y(I,O)),O=r(I,O),!f(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((de=j)==null||de.length===0)&&(j=function(me){return typeof me=="string"||he(me)?_(me):he(me.data)?_(me.data):null}(I)),(oe=d.call(this,j))||(Q()&&(I instanceof Uint8Array||O==="RGBA"||(ie=I,I=Y(I))),oe=this["process"+O.toUpperCase()](I,u.call(this),j,function(me){return me&&typeof me=="string"&&(me=me.toUpperCase()),me in n.image_compression?me:x.NONE}(R),ie)),!oe)throw new Error("An unknown error occurred whilst processing the image.");return oe},le=n.__addimage__.convertBase64ToBinaryString=function(I,O){var j;O=typeof O!="boolean"||O;var R,oe="";if(typeof I=="string"){R=(j=$(I))!==null?j.data:I;try{oe=Da(R)}catch(ie){if(O)throw B(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ie.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return oe};n.getImageProperties=function(I){var O,j,R="";if(m(I)&&(I=y(I)),typeof I=="string"&&r(I)===e&&((R=le(I,!1))===""&&(R=n.loadFile(I)||""),I=R),j=r(I),!f(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(!Q()||I instanceof Uint8Array||(I=Y(I)),!(O=this["process"+j.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=j,O}})(Je.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Je.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,f=!1,m=0;m<u.length&&!f;m++)switch((r=u[m]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var y=0;y<u.length;y++){r=u[y];var d=this.internal.pdfEscape,v=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(w.objId),_=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+d(x(r.contents))+")",s+=" /Popup "+S.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+d(x(_))+") >>",w.content=s;var B=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+B,r.open&&(s+=" /Open true"),s+=" >>",S.content=s,this.internal.write(w.objId,"0 R",S.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var $=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+d(v(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+$+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var Q=this.annotations._nameMap[r.options.name];r.options.pageNumber=Q.page,r.options.top=Q.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+d(v(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var he=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+he+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(t),y:u(r),w:l(t+i),h:u(r+s)},options:o,type:"link"})},n.textWithLink=function(t,r,i,s){var o,a,l=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var f=this.splitTextToSize(t,a).length;o=Math.ceil(u*f)}else a=l,o=u;return this.text(t,r,i,s),i+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-u,a,o,s),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Je.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},a=n.__arabicParser__.isArabicEndLetter=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(w){return o(w)&&i.indexOf(w.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length>=3};var f=n.__arabicParser__.arabicLetterHasMedialForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length==4},m=n.__arabicParser__.resolveLigatures=function(w){var S=0,x=t,_="",B=0;for(S=0;S<w.length;S+=1)x[w.charCodeAt(S)]!==void 0?(B++,typeof(x=x[w.charCodeAt(S)])=="number"&&(_+=String.fromCharCode(x),x=t,B=0),S===w.length-1&&(x=t,_+=w.charAt(S-(B-1)),S-=B-1,B=0)):(x=t,_+=w.charAt(S-B),S-=B,B=0);return _};n.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&r[w.charCodeAt(0)]!==void 0};var y=n.__arabicParser__.getCorrectForm=function(w,S,x){return o(w)?s(w)===!1?-1:!u(w)||!o(S)&&!o(x)||!o(x)&&a(S)||a(w)&&!o(S)||a(w)&&l(S)||a(w)&&a(S)?0:f(w)&&o(S)&&!a(S)&&o(x)&&u(x)?3:a(w)||!o(x)?1:2:-1},d=function(w){var S=0,x=0,_=0,B="",$="",Q="",he=(w=w||"").split("\\s+"),Y=[];for(S=0;S<he.length;S+=1){for(Y.push(""),x=0;x<he[S].length;x+=1)B=he[S][x],$=he[S][x-1],Q=he[S][x+1],o(B)?(_=y(B,$,Q),Y[S]+=_!==-1?String.fromCharCode(e[B.charCodeAt(0)][_]):B):Y[S]+=B;Y[S]=m(Y[S])}return Y.join(" ")},v=n.__arabicParser__.processArabic=n.processArabic=function(){var w,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(S)){var _=0;for(x=[],_=0;_<S.length;_+=1)Array.isArray(S[_])?x.push([d(S[_][0]),S[_][1],S[_][2]]):x.push([d(S[_])]);w=x}else w=d(S);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};n.events.push(["preProcessText",v])}(Je.API),Je.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Je.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(w){y=w}});var d=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(w){v=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,u){r.call(this);var f=(u=u||{}).fontSize||this.getFontSize(),m=u.font||this.getFont(),y=u.scaleFactor||this.internal.scaleFactor,d=0,v=0,w=0,S=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var x=u.maxWidth;x>0?typeof l=="string"?l=this.splitTextToSize(l,x):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(B,$){return B.concat(S.splitTextToSize($,x))},[])):l=Array.isArray(l)?l:[l];for(var _=0;_<l.length;_++)d<(w=this.getStringUnitWidth(l[_],{font:m})*f)&&(d=w);return d!==0&&(v=l.length),{w:d/=y,h:Math.max((v*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/y,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,m=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,d=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=m.top,d&&y&&(this.printHeaderRow(l.lineNumber,!0),l.y+=y[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-f,l.y+f,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+f,{align:"center",baseline:"top",maxWidth:l.width-f-f}):this.text(l.text,l.x+f,l.y+f,{align:"left",baseline:"top",maxWidth:l.width-f-f})),this.internal.__cell__.lastCell=l,this};n.table=function(l,u,f,m,y){if(r.call(this),!f)throw new Error("No data for PDF table.");var d,v,w,S,x=[],_=[],B=[],$={},Q={},he=[],Y=[],E=(y=y||{}).autoSize||!1,ue=y.printHeaders!==!1,le=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,I=y.margins||Object.assign({width:this.getPageWidth()},e),O=typeof y.padding=="number"?y.padding:3,j=y.headerBackgroundColor||"#c8c8c8",R=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=ue,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=le,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=j,this.internal.__cell__.headerTextColor=R,this.setFontSize(le),m==null)_=x=Object.keys(f[0]),B=x.map(function(){return"left"});else if(Array.isArray(m)&&Lt(m[0])==="object")for(x=m.map(function(pe){return pe.name}),_=m.map(function(pe){return pe.prompt||pe.name||""}),B=m.map(function(pe){return pe.align||"left"}),d=0;d<m.length;d+=1)Q[m[d].name]=m[d].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(_=x=m,B=x.map(function(){return"left"}));if(E||Array.isArray(m)&&typeof m[0]=="string")for(d=0;d<x.length;d+=1){for($[S=x[d]]=f.map(function(pe){return pe[S]}),this.setFont(void 0,"bold"),he.push(this.getTextDimensions(_[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=$[S],this.setFont(void 0,"normal"),w=0;w<v.length;w+=1)he.push(this.getTextDimensions(v[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Q[S]=Math.max.apply(null,he)+O+O,he=[]}if(ue){var oe={};for(d=0;d<x.length;d+=1)oe[x[d]]={},oe[x[d]].text=_[d],oe[x[d]].align=B[d];var ie=a.call(this,oe,Q);Y=x.map(function(pe){return new s(l,u,Q[pe],ie,oe[pe].text,void 0,oe[pe].align)}),this.setTableHeaderRow(Y),this.printHeaderRow(1,!1)}var de=m.reduce(function(pe,Me){return pe[Me.name]=Me.align,pe},{});for(d=0;d<f.length;d+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:d,data:f[d]},this);var te=a.call(this,f[d],Q);for(w=0;w<x.length;w+=1){var me=f[d][x[w]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:d,col:w,data:me},this),o.call(this,new s(l,u,Q[x[w]],te,me,d+2,de[x[w]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var f=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(l).map(function(d){var v=l[d];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,u[d]-f-f)},this).map(function(d){return this.getLineHeightFactor()*d.length*m/y+f+f},this).reduce(function(d,v){return Math.max(d,v)},0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],d=0;d<this.internal.__cell__.tableHeaderRow.length;d+=1){f=this.internal.__cell__.tableHeaderRow[d].clone(),u&&(f.y=this.internal.__cell__.margins.top||0,y.push(f)),f.lineNumber=l;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(v)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),t=!1}}(Je.API);var y0={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},b0=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Rf=g0(b0),v0=[100,200,300,400,500,600,700,800,900],Ev=g0(v0);function Bf(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return y0[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(s){return typeof Rf[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function fp(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var Dv={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},hp={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function dp(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Fv(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},Dv,t.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=Bf(e[a])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){o=n[s.family];break}if(!(o=o||n[r]))throw new Error("Could not find a font-family for the rule '"+dp(s)+"' and default family '"+r+"'.");if(o=function(l,u){if(u[l])return u[l];var f=Rf[l],m=f<=Rf.normal?-1:1,y=fp(u,b0,f,m);if(!y)throw new Error("Could not find a matching font-stretch value for "+l);return y}(s.stretch,o),o=function(l,u){if(u[l])return u[l];for(var f=y0[l],m=0;m<f.length;++m)if(u[f[m]])return u[f[m]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var f=Ev[l],m=fp(u,v0,f,l<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+l);return m}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+dp(s)+"'.");return o}function pp(n){return n.trimLeft()}function Rv(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Bv(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var ql,mp,gp,nf=["times"];(function(n){var e,t,r,i,s,o,a,l,u,f=function(C){return C=C||{},this.isStrokeTransparent=C.isStrokeTransparent||!1,this.strokeOpacity=C.strokeOpacity||1,this.strokeStyle=C.strokeStyle||"#000000",this.fillStyle=C.fillStyle||"#000000",this.isFillTransparent=C.isFillTransparent||!1,this.fillOpacity=C.fillOpacity||1,this.font=C.font||"10px sans-serif",this.textBaseline=C.textBaseline||"alphabetic",this.textAlign=C.textAlign||"left",this.lineWidth=C.lineWidth||1,this.lineJoin=C.lineJoin||"miter",this.lineCap=C.lineCap||"butt",this.path=C.path||[],this.transform=C.transform!==void 0?C.transform.clone():new l,this.globalCompositeOperation=C.globalCompositeOperation||"normal",this.globalAlpha=C.globalAlpha||1,this.clip_path=C.clip_path||[],this.currentPoint=C.currentPoint||new o,this.miterLimit=C.miterLimit||10,this.lastPoint=C.lastPoint||new o,this.lineDashOffset=C.lineDashOffset||0,this.lineDash=C.lineDash||[],this.margin=C.margin||[0,0,0,0],this.prevPageLastElemOffset=C.prevPageLastElemOffset||0,this.ignoreClearRect=typeof C.ignoreClearRect!="boolean"||C.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new m(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new f}]);var m=function(C){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=C;Object.defineProperty(this,"pdf",{get:function(){return F}});var q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return q},set:function(fe){q=Boolean(fe)}});var W=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return W},set:function(fe){W=Boolean(fe)}});var K=0;Object.defineProperty(this,"posX",{get:function(){return K},set:function(fe){isNaN(fe)||(K=fe)}});var ne=0;Object.defineProperty(this,"posY",{get:function(){return ne},set:function(fe){isNaN(fe)||(ne=fe)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(fe){var z;typeof fe=="number"?z=[fe,fe,fe,fe]:((z=new Array(4))[0]=fe[0],z[1]=fe.length>=2?fe[1]:z[0],z[2]=fe.length>=3?fe[2]:z[0],z[3]=fe.length>=4?fe[3]:z[1]),u.margin=z}});var re=!1;Object.defineProperty(this,"autoPaging",{get:function(){return re},set:function(fe){re=fe}});var se=0;Object.defineProperty(this,"lastBreak",{get:function(){return se},set:function(fe){se=fe}});var ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ke},set:function(fe){ke=fe}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(fe){fe instanceof f&&(u=fe)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(fe){u.path=fe}});var Ne=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ne},set:function(fe){Ne=fe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(fe){var z;z=y(fe),this.ctx.fillStyle=z.style,this.ctx.isFillTransparent=z.a===0,this.ctx.fillOpacity=z.a,this.pdf.setFillColor(z.r,z.g,z.b,{a:z.a}),this.pdf.setTextColor(z.r,z.g,z.b,{a:z.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(fe){var z=y(fe);this.ctx.strokeStyle=z.style,this.ctx.isStrokeTransparent=z.a===0,this.ctx.strokeOpacity=z.a,z.a===0?this.pdf.setDrawColor(255,255,255):(z.a,this.pdf.setDrawColor(z.r,z.g,z.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(fe){["butt","round","square"].indexOf(fe)!==-1&&(this.ctx.lineCap=fe,this.pdf.setLineCap(fe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(fe){isNaN(fe)||(this.ctx.lineWidth=fe,this.pdf.setLineWidth(fe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(fe){["bevel","round","miter"].indexOf(fe)!==-1&&(this.ctx.lineJoin=fe,this.pdf.setLineJoin(fe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(fe){isNaN(fe)||(this.ctx.miterLimit=fe,this.pdf.setMiterLimit(fe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(fe){this.ctx.textBaseline=fe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(fe){["right","end","center","left","start"].indexOf(fe)!==-1&&(this.ctx.textAlign=fe)}});var Te=null;function Fe(fe,z){if(Te===null){var nt=function(ze){var Se=[];return Object.keys(ze).forEach(function(Ae){ze[Ae].forEach(function(Pe){var _e=null;switch(Pe){case"bold":_e={family:Ae,weight:"bold"};break;case"italic":_e={family:Ae,style:"italic"};break;case"bolditalic":_e={family:Ae,weight:"bold",style:"italic"};break;case"":case"normal":_e={family:Ae}}_e!==null&&(_e.ref={name:Ae,style:Pe},Se.push(_e))})}),Se}(fe.getFontList());Te=function(ze){for(var Se={},Ae=0;Ae<ze.length;++Ae){var Pe=Bf(ze[Ae]),_e=Pe.family,Ve=Pe.stretch,Ze=Pe.style,st=Pe.weight;Se[_e]=Se[_e]||{},Se[_e][Ve]=Se[_e][Ve]||{},Se[_e][Ve][Ze]=Se[_e][Ve][Ze]||{},Se[_e][Ve][Ze][st]=Pe}return Se}(nt.concat(z))}return Te}var Ge=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ge},set:function(fe){Te=null,Ge=fe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(fe){var z;if(this.ctx.font=fe,(z=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(fe))!==null){var nt=z[1],ze=(z[2],z[3]),Se=z[4],Ae=(z[5],z[6]),Pe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Se)[2];Se=Math.floor(Pe==="px"?parseFloat(Se)*this.pdf.internal.scaleFactor:Pe==="em"?parseFloat(Se)*this.pdf.getFontSize():parseFloat(Se)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Se);var _e=function(Ye){var ft,Oe,bn=[],bt=Ye.trim();if(bt==="")return nf;if(bt in hp)return[hp[bt]];for(;bt!=="";){switch(Oe=null,ft=(bt=pp(bt)).charAt(0)){case'"':case"'":Oe=Rv(bt.substring(1),ft);break;default:Oe=Bv(bt)}if(Oe===null||(bn.push(Oe[0]),(bt=pp(Oe[1]))!==""&&bt.charAt(0)!==","))return nf;bt=bt.replace(/^,/,"")}return bn}(Ae);if(this.fontFaces){var Ve=Fv(Fe(this.pdf,this.fontFaces),_e.map(function(Ye){return{family:Ye,stretch:"normal",weight:ze,style:nt}}));this.pdf.setFont(Ve.ref.name,Ve.ref.style)}else{var Ze="";(ze==="bold"||parseInt(ze,10)>=700||nt==="bold")&&(Ze="bold"),nt==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var st="",ut={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},gt=0;gt<_e.length;gt++){if(this.pdf.internal.getFont(_e[gt],Ze,{noFallback:!0,disableWarning:!0})!==void 0){st=_e[gt];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(_e[gt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)st=_e[gt],Ze="bold";else if(this.pdf.internal.getFont(_e[gt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){st=_e[gt],Ze="normal";break}}if(st===""){for(var Ct=0;Ct<_e.length;Ct++)if(ut[_e[Ct]]){st=ut[_e[Ct]];break}}st=st===""?"Times":st,this.pdf.setFont(st,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(fe){this.ctx.globalCompositeOperation=fe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(fe){this.ctx.globalAlpha=fe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(fe){this.ctx.lineDashOffset=fe,Me.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(fe){this.ctx.lineDash=fe,Me.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(fe){this.ctx.ignoreClearRect=Boolean(fe)}})};m.prototype.setLineDash=function(C){this.lineDash=C},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){$.call(this,"fill",!1)},m.prototype.stroke=function(){$.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(C,F){if(isNaN(C)||isNaN(F))throw Ot.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var q=this.ctx.transform.applyToPoint(new o(C,F));this.path.push({type:"mt",x:q.x,y:q.y}),this.ctx.lastPoint=new o(C,F)},m.prototype.closePath=function(){var C=new o(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&Lt(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){C=new o(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(C.x,C.y)},m.prototype.lineTo=function(C,F){if(isNaN(C)||isNaN(F))throw Ot.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var q=this.ctx.transform.applyToPoint(new o(C,F));this.path.push({type:"lt",x:q.x,y:q.y}),this.ctx.lastPoint=new o(q.x,q.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),$.call(this,null,!0)},m.prototype.quadraticCurveTo=function(C,F,q,W){if(isNaN(q)||isNaN(W)||isNaN(C)||isNaN(F))throw Ot.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var K=this.ctx.transform.applyToPoint(new o(q,W)),ne=this.ctx.transform.applyToPoint(new o(C,F));this.path.push({type:"qct",x1:ne.x,y1:ne.y,x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},m.prototype.bezierCurveTo=function(C,F,q,W,K,ne){if(isNaN(K)||isNaN(ne)||isNaN(C)||isNaN(F)||isNaN(q)||isNaN(W))throw Ot.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var re=this.ctx.transform.applyToPoint(new o(K,ne)),se=this.ctx.transform.applyToPoint(new o(C,F)),ke=this.ctx.transform.applyToPoint(new o(q,W));this.path.push({type:"bct",x1:se.x,y1:se.y,x2:ke.x,y2:ke.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},m.prototype.arc=function(C,F,q,W,K,ne){if(isNaN(C)||isNaN(F)||isNaN(q)||isNaN(W)||isNaN(K))throw Ot.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ne=Boolean(ne),!this.ctx.transform.isIdentity){var re=this.ctx.transform.applyToPoint(new o(C,F));C=re.x,F=re.y;var se=this.ctx.transform.applyToPoint(new o(0,q)),ke=this.ctx.transform.applyToPoint(new o(0,0));q=Math.sqrt(Math.pow(se.x-ke.x,2)+Math.pow(se.y-ke.y,2))}Math.abs(K-W)>=2*Math.PI&&(W=0,K=2*Math.PI),this.path.push({type:"arc",x:C,y:F,radius:q,startAngle:W,endAngle:K,counterclockwise:ne})},m.prototype.arcTo=function(C,F,q,W,K){throw new Error("arcTo not implemented.")},m.prototype.rect=function(C,F,q,W){if(isNaN(C)||isNaN(F)||isNaN(q)||isNaN(W))throw Ot.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(C,F),this.lineTo(C+q,F),this.lineTo(C+q,F+W),this.lineTo(C,F+W),this.lineTo(C,F),this.lineTo(C+q,F),this.lineTo(C,F)},m.prototype.fillRect=function(C,F,q,W){if(isNaN(C)||isNaN(F)||isNaN(q)||isNaN(W))throw Ot.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!d.call(this)){var K={};this.lineCap!=="butt"&&(K.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(K.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(C,F,q,W),this.fill(),K.hasOwnProperty("lineCap")&&(this.lineCap=K.lineCap),K.hasOwnProperty("lineJoin")&&(this.lineJoin=K.lineJoin)}},m.prototype.strokeRect=function(C,F,q,W){if(isNaN(C)||isNaN(F)||isNaN(q)||isNaN(W))throw Ot.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(C,F,q,W),this.stroke())},m.prototype.clearRect=function(C,F,q,W){if(isNaN(C)||isNaN(F)||isNaN(q)||isNaN(W))throw Ot.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(C,F,q,W))},m.prototype.save=function(C){C=typeof C!="boolean"||C;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),C){this.ctx.fontSize=this.pdf.internal.getFontSize();var W=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=W}},m.prototype.restore=function(C){C=typeof C!="boolean"||C;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("Q");this.pdf.setPage(F),C&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(C){var F,q,W,K;if(C.isCanvasGradient===!0&&(C=C.getColor()),!C)return{r:0,g:0,b:0,a:0,style:C};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(C))F=0,q=0,W=0,K=0;else{var ne=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(C);if(ne!==null)F=parseInt(ne[1]),q=parseInt(ne[2]),W=parseInt(ne[3]),K=1;else if((ne=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(C))!==null)F=parseInt(ne[1]),q=parseInt(ne[2]),W=parseInt(ne[3]),K=parseFloat(ne[4]);else{if(K=1,typeof C=="string"&&C.charAt(0)!=="#"){var re=new u0(C);C=re.ok?re.toHex():"#000000"}C.length===4?(F=C.substring(1,2),F+=F,q=C.substring(2,3),q+=q,W=C.substring(3,4),W+=W):(F=C.substring(1,3),q=C.substring(3,5),W=C.substring(5,7)),F=parseInt(F,16),q=parseInt(q,16),W=parseInt(W,16)}}return{r:F,g:q,b:W,a:K,style:C}},d=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(C,F,q,W){if(isNaN(F)||isNaN(q)||typeof C!="string")throw Ot.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(W=isNaN(W)?void 0:W,!d.call(this)){var K=te(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;O.call(this,{text:C,x:F,y:q,scale:ne,angle:K,align:this.textAlign,maxWidth:W})}},m.prototype.strokeText=function(C,F,q,W){if(isNaN(F)||isNaN(q)||typeof C!="string")throw Ot.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){W=isNaN(W)?void 0:W;var K=te(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;O.call(this,{text:C,x:F,y:q,scale:ne,renderingMode:"stroke",angle:K,align:this.textAlign,maxWidth:W})}},m.prototype.measureText=function(C){if(typeof C!="string")throw Ot.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,q=this.pdf.internal.scaleFactor,W=F.internal.getFontSize(),K=F.getStringUnitWidth(C)*W/F.internal.scaleFactor,ne=function(re){var se=(re=re||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return se}}),this};return new ne({width:K*=Math.round(96*q/72*1e4)/1e4})},m.prototype.scale=function(C,F){if(isNaN(C)||isNaN(F))throw Ot.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var q=new l(C,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(q)},m.prototype.rotate=function(C){if(isNaN(C))throw Ot.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new l(Math.cos(C),Math.sin(C),-Math.sin(C),Math.cos(C),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},m.prototype.translate=function(C,F){if(isNaN(C)||isNaN(F))throw Ot.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var q=new l(1,0,0,1,C,F);this.ctx.transform=this.ctx.transform.multiply(q)},m.prototype.transform=function(C,F,q,W,K,ne){if(isNaN(C)||isNaN(F)||isNaN(q)||isNaN(W)||isNaN(K)||isNaN(ne))throw Ot.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var re=new l(C,F,q,W,K,ne);this.ctx.transform=this.ctx.transform.multiply(re)},m.prototype.setTransform=function(C,F,q,W,K,ne){C=isNaN(C)?1:C,F=isNaN(F)?0:F,q=isNaN(q)?0:q,W=isNaN(W)?1:W,K=isNaN(K)?0:K,ne=isNaN(ne)?0:ne,this.ctx.transform=new l(C,F,q,W,K,ne)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(C,F,q,W,K,ne,re,se,ke){var Ne=this.pdf.getImageProperties(C),Te=1,Fe=1,Ge=1,fe=1;W!==void 0&&se!==void 0&&(Ge=se/W,fe=ke/K,Te=Ne.width/W*se/W,Fe=Ne.height/K*ke/K),ne===void 0&&(ne=F,re=q,F=0,q=0),W!==void 0&&se===void 0&&(se=W,ke=K),W===void 0&&se===void 0&&(se=Ne.width,ke=Ne.height);for(var z,nt=this.ctx.transform.decompose(),ze=te(nt.rotate.shx),Se=new l,Ae=(Se=(Se=(Se=Se.multiply(nt.translate)).multiply(nt.skew)).multiply(nt.scale)).applyToRectangle(new a(ne-F*Ge,re-q*fe,W*Te,K*Fe)),Pe=S.call(this,Ae),_e=[],Ve=0;Ve<Pe.length;Ve+=1)_e.indexOf(Pe[Ve])===-1&&_e.push(Pe[Ve]);if(B(_e),this.autoPaging)for(var Ze=_e[0],st=_e[_e.length-1],ut=Ze;ut<st+1;ut++){this.pdf.setPage(ut);var gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ct=ut===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Oe=ut===1?0:Ye+(ut-2)*ft;if(this.ctx.clip_path.length!==0){var bn=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(z,this.posX+this.margin[3],-Oe+Ct+this.ctx.prevPageLastElemOffset),Q.call(this,"fill",!0),this.path=bn}var bt=JSON.parse(JSON.stringify(Ae));bt=_([bt],this.posX+this.margin[3],-Oe+Ct+this.ctx.prevPageLastElemOffset)[0];var dr=(ut>Ze||ut<st)&&w.call(this);dr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gt,ft,null).clip().discardPath()),this.pdf.addImage(C,"JPEG",bt.x,bt.y,bt.w,bt.h,null,null,ze),dr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(C,"JPEG",Ae.x,Ae.y,Ae.w,Ae.h,null,null,ze)};var S=function(C,F,q){var W=[];F=F||this.pdf.internal.pageSize.width,q=q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var K=this.posY+this.ctx.prevPageLastElemOffset;switch(C.type){default:case"mt":case"lt":W.push(Math.floor((C.y+K)/q)+1);break;case"arc":W.push(Math.floor((C.y+K-C.radius)/q)+1),W.push(Math.floor((C.y+K+C.radius)/q)+1);break;case"qct":var ne=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x,C.y);W.push(Math.floor((ne.y+K)/q)+1),W.push(Math.floor((ne.y+ne.h+K)/q)+1);break;case"bct":var re=pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x2,C.y2,C.x,C.y);W.push(Math.floor((re.y+K)/q)+1),W.push(Math.floor((re.y+re.h+K)/q)+1);break;case"rect":W.push(Math.floor((C.y+K)/q)+1),W.push(Math.floor((C.y+C.h+K)/q)+1)}for(var se=0;se<W.length;se+=1)for(;this.pdf.internal.getNumberOfPages()<W[se];)x.call(this);return W},x=function(){var C=this.fillStyle,F=this.strokeStyle,q=this.font,W=this.lineCap,K=this.lineWidth,ne=this.lineJoin;this.pdf.addPage(),this.fillStyle=C,this.strokeStyle=F,this.font=q,this.lineCap=W,this.lineWidth=K,this.lineJoin=ne},_=function(C,F,q){for(var W=0;W<C.length;W++)switch(C[W].type){case"bct":C[W].x2+=F,C[W].y2+=q;case"qct":C[W].x1+=F,C[W].y1+=q;case"mt":case"lt":case"arc":default:C[W].x+=F,C[W].y+=q}return C},B=function(C){return C.sort(function(F,q){return F-q})},$=function(C,F){for(var q,W,K=this.fillStyle,ne=this.strokeStyle,re=this.lineCap,se=this.lineWidth,ke=Math.abs(se*this.ctx.transform.scaleX),Ne=this.lineJoin,Te=JSON.parse(JSON.stringify(this.path)),Fe=JSON.parse(JSON.stringify(this.path)),Ge=[],fe=0;fe<Fe.length;fe++)if(Fe[fe].x!==void 0)for(var z=S.call(this,Fe[fe]),nt=0;nt<z.length;nt+=1)Ge.indexOf(z[nt])===-1&&Ge.push(z[nt]);for(var ze=0;ze<Ge.length;ze++)for(;this.pdf.internal.getNumberOfPages()<Ge[ze];)x.call(this);if(B(Ge),this.autoPaging)for(var Se=Ge[0],Ae=Ge[Ge.length-1],Pe=Se;Pe<Ae+1;Pe++){this.pdf.setPage(Pe),this.fillStyle=K,this.strokeStyle=ne,this.lineCap=re,this.lineWidth=ke,this.lineJoin=Ne;var _e=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ve=Pe===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],st=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ut=Pe===1?0:Ze+(Pe-2)*st;if(this.ctx.clip_path.length!==0){var gt=this.path;q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(q,this.posX+this.margin[3],-ut+Ve+this.ctx.prevPageLastElemOffset),Q.call(this,C,!0),this.path=gt}if(W=JSON.parse(JSON.stringify(Te)),this.path=_(W,this.posX+this.margin[3],-ut+Ve+this.ctx.prevPageLastElemOffset),F===!1||Pe===0){var Ct=(Pe>Se||Pe<Ae)&&w.call(this);Ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_e,st,null).clip().discardPath()),Q.call(this,C,F),Ct&&this.pdf.restoreGraphicsState()}this.lineWidth=se}else this.lineWidth=ke,Q.call(this,C,F),this.lineWidth=se;this.path=Te},Q=function(C,F){if((C!=="stroke"||F||!v.call(this))&&(C==="stroke"||F||!d.call(this))){for(var q,W,K=[],ne=this.path,re=0;re<ne.length;re++){var se=ne[re];switch(se.type){case"begin":K.push({begin:!0});break;case"close":K.push({close:!0});break;case"mt":K.push({start:se,deltas:[],abs:[]});break;case"lt":var ke=K.length;if(ne[re-1]&&!isNaN(ne[re-1].x)&&(q=[se.x-ne[re-1].x,se.y-ne[re-1].y],ke>0)){for(;ke>=0;ke--)if(K[ke-1].close!==!0&&K[ke-1].begin!==!0){K[ke-1].deltas.push(q),K[ke-1].abs.push(se);break}}break;case"bct":q=[se.x1-ne[re-1].x,se.y1-ne[re-1].y,se.x2-ne[re-1].x,se.y2-ne[re-1].y,se.x-ne[re-1].x,se.y-ne[re-1].y],K[K.length-1].deltas.push(q);break;case"qct":var Ne=ne[re-1].x+2/3*(se.x1-ne[re-1].x),Te=ne[re-1].y+2/3*(se.y1-ne[re-1].y),Fe=se.x+2/3*(se.x1-se.x),Ge=se.y+2/3*(se.y1-se.y),fe=se.x,z=se.y;q=[Ne-ne[re-1].x,Te-ne[re-1].y,Fe-ne[re-1].x,Ge-ne[re-1].y,fe-ne[re-1].x,z-ne[re-1].y],K[K.length-1].deltas.push(q);break;case"arc":K.push({deltas:[],abs:[],arc:!0}),Array.isArray(K[K.length-1].abs)&&K[K.length-1].abs.push(se)}}W=F?null:C==="stroke"?"stroke":"fill";for(var nt=!1,ze=0;ze<K.length;ze++)if(K[ze].arc)for(var Se=K[ze].abs,Ae=0;Ae<Se.length;Ae++){var Pe=Se[Ae];Pe.type==="arc"?E.call(this,Pe.x,Pe.y,Pe.radius,Pe.startAngle,Pe.endAngle,Pe.counterclockwise,void 0,F,!nt):j.call(this,Pe.x,Pe.y),nt=!0}else if(K[ze].close===!0)this.pdf.internal.out("h"),nt=!1;else if(K[ze].begin!==!0){var _e=K[ze].start.x,Ve=K[ze].start.y;R.call(this,K[ze].deltas,_e,Ve),nt=!0}W&&ue.call(this,W),F&&le.call(this)}},he=function(C){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,q=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return C-q;case"top":return C+F-q;case"hanging":return C+F-2*q;case"middle":return C+F/2-q;case"ideographic":return C;case"alphabetic":default:return C}},Y=function(C){return C+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var C=function(){};return C.colorStops=[],C.addColorStop=function(F,q){this.colorStops.push([F,q])},C.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},C.isCanvasGradient=!0,C},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(C,F,q,W,K,ne,re,se,ke){for(var Ne=ie.call(this,q,W,K,ne),Te=0;Te<Ne.length;Te++){var Fe=Ne[Te];Te===0&&(ke?I.call(this,Fe.x1+C,Fe.y1+F):j.call(this,Fe.x1+C,Fe.y1+F)),oe.call(this,C,F,Fe.x2,Fe.y2,Fe.x3,Fe.y3,Fe.x4,Fe.y4)}se?le.call(this):ue.call(this,re)},ue=function(C){switch(C){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},le=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(C,F){this.pdf.internal.out(t(C)+" "+r(F)+" m")},O=function(C){var F;switch(C.align){case"right":case"end":F="right";break;case"center":F="center";break;case"left":case"start":default:F="left"}var q=this.pdf.getTextDimensions(C.text),W=he.call(this,C.y),K=Y.call(this,W)-q.h,ne=this.ctx.transform.applyToPoint(new o(C.x,W)),re=this.ctx.transform.decompose(),se=new l;se=(se=(se=se.multiply(re.translate)).multiply(re.skew)).multiply(re.scale);for(var ke,Ne,Te,Fe=this.ctx.transform.applyToRectangle(new a(C.x,W,q.w,q.h)),Ge=se.applyToRectangle(new a(C.x,K,q.w,q.h)),fe=S.call(this,Ge),z=[],nt=0;nt<fe.length;nt+=1)z.indexOf(fe[nt])===-1&&z.push(fe[nt]);if(B(z),this.autoPaging)for(var ze=z[0],Se=z[z.length-1],Ae=ze;Ae<Se+1;Ae++){this.pdf.setPage(Ae);var Pe=Ae===1?this.posY+this.margin[0]:this.margin[0],_e=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ve=this.pdf.internal.pageSize.height-this.margin[2],Ze=Ve-this.margin[0],st=this.pdf.internal.pageSize.width-this.margin[1],ut=st-this.margin[3],gt=Ae===1?0:_e+(Ae-2)*Ze;if(this.ctx.clip_path.length!==0){var Ct=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(ke,this.posX+this.margin[3],-1*gt+Pe),Q.call(this,"fill",!0),this.path=Ct}var Ye=_([JSON.parse(JSON.stringify(Ge))],this.posX+this.margin[3],-gt+Pe+this.ctx.prevPageLastElemOffset)[0];C.scale>=.01&&(Ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ne*C.scale),Te=this.lineWidth,this.lineWidth=Te*C.scale);var ft=this.autoPaging!=="text";if(ft||Ye.y+Ye.h<=Ve){if(ft||Ye.y>=Pe&&Ye.x<=st){var Oe=ft?C.text:this.pdf.splitTextToSize(C.text,C.maxWidth||st-Ye.x)[0],bn=_([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-gt+Pe+this.ctx.prevPageLastElemOffset)[0],bt=ft&&(Ae>ze||Ae<Se)&&w.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Ze,null).clip().discardPath()),this.pdf.text(Oe,bn.x,bn.y,{angle:C.angle,align:F,renderingMode:C.renderingMode}),bt&&this.pdf.restoreGraphicsState()}}else Ye.y<Ve&&(this.ctx.prevPageLastElemOffset+=Ve-Ye.y);C.scale>=.01&&(this.pdf.setFontSize(Ne),this.lineWidth=Te)}else C.scale>=.01&&(Ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ne*C.scale),Te=this.lineWidth,this.lineWidth=Te*C.scale),this.pdf.text(C.text,ne.x+this.posX,ne.y+this.posY,{angle:C.angle,align:F,renderingMode:C.renderingMode,maxWidth:C.maxWidth}),C.scale>=.01&&(this.pdf.setFontSize(Ne),this.lineWidth=Te)},j=function(C,F,q,W){q=q||0,W=W||0,this.pdf.internal.out(t(C+q)+" "+r(F+W)+" l")},R=function(C,F,q){return this.pdf.lines(C,F,q,null,null)},oe=function(C,F,q,W,K,ne,re,se){this.pdf.internal.out([e(i(q+C)),e(s(W+F)),e(i(K+C)),e(s(ne+F)),e(i(re+C)),e(s(se+F)),"c"].join(" "))},ie=function(C,F,q,W){for(var K=2*Math.PI,ne=Math.PI/2;F>q;)F-=K;var re=Math.abs(q-F);re<K&&W&&(re=K-re);for(var se=[],ke=W?-1:1,Ne=F;re>1e-5;){var Te=Ne+ke*Math.min(re,ne);se.push(de.call(this,C,Ne,Te)),re-=Math.abs(Te-Ne),Ne=Te}return se},de=function(C,F,q){var W=(q-F)/2,K=C*Math.cos(W),ne=C*Math.sin(W),re=K,se=-ne,ke=re*re+se*se,Ne=ke+re*K+se*ne,Te=4/3*(Math.sqrt(2*ke*Ne)-Ne)/(re*ne-se*K),Fe=re-Te*se,Ge=se+Te*re,fe=Fe,z=-Ge,nt=W+F,ze=Math.cos(nt),Se=Math.sin(nt);return{x1:C*Math.cos(F),y1:C*Math.sin(F),x2:Fe*ze-Ge*Se,y2:Fe*Se+Ge*ze,x3:fe*ze-z*Se,y3:fe*Se+z*ze,x4:C*Math.cos(q),y4:C*Math.sin(q)}},te=function(C){return 180*C/Math.PI},me=function(C,F,q,W,K,ne){var re=C+.5*(q-C),se=F+.5*(W-F),ke=K+.5*(q-K),Ne=ne+.5*(W-ne),Te=Math.min(C,K,re,ke),Fe=Math.max(C,K,re,ke),Ge=Math.min(F,ne,se,Ne),fe=Math.max(F,ne,se,Ne);return new a(Te,Ge,Fe-Te,fe-Ge)},pe=function(C,F,q,W,K,ne,re,se){var ke,Ne,Te,Fe,Ge,fe,z,nt,ze,Se,Ae,Pe,_e,Ve,Ze=q-C,st=W-F,ut=K-q,gt=ne-W,Ct=re-K,Ye=se-ne;for(Ne=0;Ne<41;Ne++)ze=(z=(Te=C+(ke=Ne/40)*Ze)+ke*((Ge=q+ke*ut)-Te))+ke*(Ge+ke*(K+ke*Ct-Ge)-z),Se=(nt=(Fe=F+ke*st)+ke*((fe=W+ke*gt)-Fe))+ke*(fe+ke*(ne+ke*Ye-fe)-nt),Ne==0?(Ae=ze,Pe=Se,_e=ze,Ve=Se):(Ae=Math.min(Ae,ze),Pe=Math.min(Pe,Se),_e=Math.max(_e,ze),Ve=Math.max(Ve,Se));return new a(Math.round(Ae),Math.round(Pe),Math.round(_e-Ae),Math.round(Ve-Pe))},Me=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var C,F,q=(C=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:C,lineDashOffset:F}));this.prevLineDash!==q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=q)}}})(Je.API),function(n){var e=function(s){var o,a,l,u,f,m,y,d,v,w;for(/[^\x00-\xFF]/.test(s),a=[],l=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(f=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(m=(f=((f=((f=((f=(f-(w=f%85))/85)-(v=f%85))/85)-(d=f%85))/85)-(y=f%85))/85)%85,a.push(m+33,y+33,d+33,v+33,w+33)):a.push(122);return function(S,x){for(var _=x;_>0;_--)S.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},t=function(s){var o,a,l,u,f,m=String,y="length",d=255,v="charCodeAt",w="slice",S="replace";for(s[w](-2),s=s[w](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),l=[],u=0,f=(s+=o="uuuuu"[w](s[y]%5||5))[y];f>u;u+=5)a=52200625*(s[v](u)-33)+614125*(s[v](u+1)-33)+7225*(s[v](u+2)-33)+85*(s[v](u+3)-33)+(s[v](u+4)-33),l.push(d&a>>24,d&a>>16,d&a>>8,d&a);return function(x,_){for(var B=_;B>0;B--)x.pop()}(l,o[y]),m.fromCharCode.apply(m,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=If(o)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,o){var a=0,l=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(Je.API),function(n){n.loadFile=function(e,t,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,u,f){var m=new XMLHttpRequest,y=0,d=function(v){var w=v.length,S=[],x=String.fromCharCode;for(y=0;y<w;y+=1)S.push(x(255&v.charCodeAt(y)));return S.join("")};if(m.open("GET",l,!u),m.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(m.onload=function(){m.status===200?f(d(this.responseText)):f(void 0)}),m.send(null),u&&m.status===200)return d(m.responseText)}(i,s,o)}catch{}return a}(e,t,r)},n.loadImageFile=n.loadFile}(Je.API),function(n){function e(){return(Ke.html2canvas?Promise.resolve(Ke.html2canvas):Cf(()=>import("./html2canvas.esm.0eae2bf4.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(Ke.DOMPurify?Promise.resolve(Ke.DOMPurify):Cf(()=>import("./purify.es.b8146866.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Lt(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var u in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[u]=a.style[u];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(u,f){for(var m=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),y=u.firstChild;y;y=y.nextSibling)f!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||m.appendChild(l(y,f));return u.nodeType===1&&(u.nodeName==="CANVAS"?(m.width=u.width,m.height=u.height,m.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(m.value=u.value),m.addEventListener("load",function(){m.scrollTop=u.scrollTop,m.scrollLeft=u.scrollLeft},!0)),m}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,u=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var y=0;y<u.length;++y){var d=u[y],v=d.src.find(function(w){return w.format==="truetype"});v&&l.addFont(v.url,d.ref.name,d.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,l.context2d.save(!0),a(this.prop.container,m)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(o=o||Je.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,u){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,u){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(u,f){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(m){return l.updateProgress(null,u),m}).then(u,f).then(function(m){return l.updateProgress(1),m})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),f=l.call(u,o,a);return s.convert(f,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Je.getPageSize=function(o,a,l){if(Lt(o)==="object"){var u=o;o=u.orientation,a=u.unit||a,l=u.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var f,m=(""+l).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+a}var d,v=0,w=0;if(y.hasOwnProperty(m))v=y[m][1]/f,w=y[m][0]/f;else try{v=l[1],w=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",w>v&&(d=w,w=v,v=d);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>w&&(d=w,w=v,v=d)}return{width:w,height:v,unit:a,k:f,orientation:o}},n.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Bf):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(Je.API),Je.API.addJS=function(n){return gp=n,this.internal.events.subscribe("postPutResources",function(){ql=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ql+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),mp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+gp+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ql!==void 0&&mp!==void 0&&this.internal.out("/Names <</JavaScript "+ql+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,f=[];for(s=0;s<u;s++){var m=t.internal.newObject();f.push(m);var y=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var d=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<f.length;s++)t.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+d+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Je.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,o,a){var l,u=this.decode.DCT_DECODE,f=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(m){for(var y,d=256*m.charCodeAt(4)+m.charCodeAt(5),v=m.length,w={width:0,height:0,numcomponents:1},S=4;S<v;S+=2){if(S+=d,e.indexOf(m.charCodeAt(S+1))!==-1){y=256*m.charCodeAt(S+5)+m.charCodeAt(S+6),w={width:256*m.charCodeAt(S+7)+m.charCodeAt(S+8),height:y,numcomponents:m.charCodeAt(S+9)};break}d=256*m.charCodeAt(S+2)+m.charCodeAt(S+3)}return w}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}f={data:t,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return f}}(Je.API);var go,zl,yp,bp,vp,jv=function(){var n,e,t;function r(s){var o,a,l,u,f,m,y,d,v,w,S,x,_,B;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(o=this.readUInt32(),v=function(){var $,Q;for(Q=[],$=0;$<4;++$)Q.push(String.fromCharCode(this.data[this.pos++]));return Q}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),u=this.readUInt16()||100,m.delay=1e3*f/u,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,o-=4),s=(m!=null?m.data:void 0)||this.imgData,x=0;0<=o?x<o:x>o;0<=o?++x:--x)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((w=l-this.transparency.indexed.length)>0)for(_=0;0<=w?_<w:_>w;0<=w?++_:--_)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":y=(S=this.read(o)).indexOf(0),d=String.fromCharCode.apply(String,S.slice(0,y)),this.text[d]=String.fromCharCode.apply(String,S.slice(y+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(B=this.colorType)===4||B===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function f(m,y,d,v){var w,S,x,_,B,$,Q,he,Y,E,ue,le,I,O,j,R,oe,ie,de,te,me,pe=Math.ceil((u.width-m)/d),Me=Math.ceil((u.height-y)/v),C=u.width==pe&&u.height==Me;for(O=o*pe,le=C?a:new Uint8Array(O*Me),$=s.length,I=0,S=0;I<Me&&l<$;){switch(s[l++]){case 0:for(_=oe=0;oe<O;_=oe+=1)le[S++]=s[l++];break;case 1:for(_=ie=0;ie<O;_=ie+=1)w=s[l++],B=_<o?0:le[S-o],le[S++]=(w+B)%256;break;case 2:for(_=de=0;de<O;_=de+=1)w=s[l++],x=(_-_%o)/o,j=I&&le[(I-1)*O+x*o+_%o],le[S++]=(j+w)%256;break;case 3:for(_=te=0;te<O;_=te+=1)w=s[l++],x=(_-_%o)/o,B=_<o?0:le[S-o],j=I&&le[(I-1)*O+x*o+_%o],le[S++]=(w+Math.floor((B+j)/2))%256;break;case 4:for(_=me=0;me<O;_=me+=1)w=s[l++],x=(_-_%o)/o,B=_<o?0:le[S-o],I===0?j=R=0:(j=le[(I-1)*O+x*o+_%o],R=x&&le[(I-1)*O+(x-1)*o+_%o]),Q=B+j-R,he=Math.abs(Q-B),E=Math.abs(Q-j),ue=Math.abs(Q-R),Y=he<=E&&he<=ue?B:E<=ue?j:R,le[S++]=(w+Y)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!C){var F=((y+I*v)*u.width+m)*o,q=I*O;for(_=0;_<pe;_+=1){for(var W=0;W<o;W+=1)a[F++]=le[q++];F+=(d-1)*o}}I++}}return s=vv(s),u.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,u,f,m,y,d;for(a=this.palette,f=this.transparency.indexed||[],u=new Uint8Array((f.length||0)+a.length),l=0,s=0,o=m=0,y=a.length;m<y;o=m+=3)u[l++]=a[o],u[l++]=a[o+1],u[l++]=a[o+2],u[l++]=(d=f[s++])!=null?d:255;return u},r.prototype.copyToImageData=function(s,o){var a,l,u,f,m,y,d,v,w,S,x;if(l=this.colors,w=null,a=this.hasAlphaChannel,this.palette.length&&(w=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),l=4,a=!0),v=(u=s.data||s).length,m=w||o,f=y=0,l===1)for(;f<v;)d=w?4*o[f/4]:y,S=m[d++],u[f++]=S,u[f++]=S,u[f++]=S,u[f++]=a?m[d++]:255,y=d;else for(;f<v;)d=w?4*o[f/4]:y,u[f++]=m[d++],u[f++]=m[d++],u[f++]=m[d++],u[f++]=a?m[d++]:255,y=d},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Ke)==="[object Window]"){try{e=Ke.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var o;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,u,f,m,y,d;if(this.animation){for(d=[],a=f=0,m=(y=this.animation.frames).length;f<m;a=++f)o=y[a],l=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,u),o.imageData=l,d.push(o.image=n(l));return d}},r.prototype.renderFrame=function(s,o){var a,l,u;return a=(l=this.animation.frames)[o],u=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,u,f,m,y=this;return a=0,m=this.animation,u=m.numFrames,l=m.frames,f=m.numPlays,(o=function(){var d,v;if(d=a++%u,v=l[d],y.renderFrame(s,d),u>1&&a/u<f)return y.animation._timeout=setTimeout(o,v.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function qv(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,o=1<<(7&i)+1;n[e++],n[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var u=!0,f=[],m=0,y=null,d=0,v=null;for(this.width=t,this.height=r;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,v=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((I=n[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=n[e++];m=n[e++]|n[e++]<<8,y=n[e++],(1&w)==0&&(y=null),d=w>>2&7,e++;break;case 254:for(;;){if(!((I=n[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var S=n[e++]|n[e++]<<8,x=n[e++]|n[e++]<<8,_=n[e++]|n[e++]<<8,B=n[e++]|n[e++]<<8,$=n[e++],Q=$>>6&1,he=1<<(7&$)+1,Y=a,E=l,ue=!1;$>>7&&(ue=!0,Y=e,E=he,e+=3*he);var le=e;for(e++;;){var I;if(!((I=n[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}f.push({x:S,y:x,width:_,height:B,has_local_palette:ue,palette_offset:Y,palette_size:E,data_offset:le,data_length:e-le,transparent_index:y,interlaced:!!Q,delay:m,disposal:d});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return v},this.frameInfo=function(O){if(O<0||O>=f.length)throw new Error("Frame index out of range.");return f[O]},this.decodeAndBlitFrameBGRA=function(O,j){var R=this.frameInfo(O),oe=R.width*R.height,ie=new Uint8Array(oe);wp(n,R.data_offset,ie,oe);var de=R.palette_offset,te=R.transparent_index;te===null&&(te=256);var me=R.width,pe=t-me,Me=me,C=4*(R.y*t+R.x),F=4*((R.y+R.height)*t+R.x),q=C,W=4*pe;R.interlaced===!0&&(W+=4*t*7);for(var K=8,ne=0,re=ie.length;ne<re;++ne){var se=ie[ne];if(Me===0&&(Me=me,(q+=W)>=F&&(W=4*pe+4*t*(K-1),q=C+(me+pe)*(K<<1),K>>=1)),se===te)q+=4;else{var ke=n[de+3*se],Ne=n[de+3*se+1],Te=n[de+3*se+2];j[q++]=Te,j[q++]=Ne,j[q++]=ke,j[q++]=255}--Me}},this.decodeAndBlitFrameRGBA=function(O,j){var R=this.frameInfo(O),oe=R.width*R.height,ie=new Uint8Array(oe);wp(n,R.data_offset,ie,oe);var de=R.palette_offset,te=R.transparent_index;te===null&&(te=256);var me=R.width,pe=t-me,Me=me,C=4*(R.y*t+R.x),F=4*((R.y+R.height)*t+R.x),q=C,W=4*pe;R.interlaced===!0&&(W+=4*t*7);for(var K=8,ne=0,re=ie.length;ne<re;++ne){var se=ie[ne];if(Me===0&&(Me=me,(q+=W)>=F&&(W=4*pe+4*t*(K-1),q=C+(me+pe)*(K<<1),K>>=1)),se===te)q+=4;else{var ke=n[de+3*se],Ne=n[de+3*se+1],Te=n[de+3*se+2];j[q++]=ke,j[q++]=Ne,j[q++]=Te,j[q++]=255}--Me}}}function wp(n,e,t,r){for(var i=n[e++],s=1<<i,o=s+1,a=o+1,l=i+1,u=(1<<l)-1,f=0,m=0,y=0,d=n[e++],v=new Int32Array(4096),w=null;;){for(;f<16&&d!==0;)m|=n[e++]<<f,f+=8,d===1?d=n[e++]:--d;if(f<l)break;var S=m&u;if(m>>=l,f-=l,S!==s){if(S===o)break;for(var x=S<a?S:w,_=0,B=x;B>s;)B=v[B]>>8,++_;var $=B;if(y+_+(x!==S?1:0)>r)return void Ot.log("Warning, gif stream longer than expected.");t[y++]=$;var Q=y+=_;for(x!==S&&(t[y++]=$),B=x;_--;)B=v[B],t[--Q]=255&B,B>>=8;w!==null&&a<4096&&(v[a++]=w<<8|$,a>=u+1&&l<12&&(++l,u=u<<1|1)),w=S}else a=o+1,u=(1<<(l=i+1))-1,w=null}return y!==r&&Ot.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function rf(n){var e,t,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),f=new Array(64),m=new Array(65535),y=new Array(65535),d=new Array(64),v=new Array(64),w=[],S=0,x=7,_=new Array(64),B=new Array(64),$=new Array(64),Q=new Array(256),he=new Array(2048),Y=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ue=[0,1,2,3,4,5,6,7,8,9,10,11],le=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],oe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ie(C,F){for(var q=0,W=0,K=new Array,ne=1;ne<=16;ne++){for(var re=1;re<=C[ne];re++)K[F[W]]=[],K[F[W]][0]=q,K[F[W]][1]=ne,W++,q++;q*=2}return K}function de(C){for(var F=C[0],q=C[1]-1;q>=0;)F&1<<q&&(S|=1<<x),q--,--x<0&&(S==255?(te(255),te(0)):te(S),x=7,S=0)}function te(C){w.push(C)}function me(C){te(C>>8&255),te(255&C)}function pe(C,F,q,W,K){for(var ne,re=K[0],se=K[240],ke=function(Se,Ae){var Pe,_e,Ve,Ze,st,ut,gt,Ct,Ye,ft,Oe=0;for(Ye=0;Ye<8;++Ye){Pe=Se[Oe],_e=Se[Oe+1],Ve=Se[Oe+2],Ze=Se[Oe+3],st=Se[Oe+4],ut=Se[Oe+5],gt=Se[Oe+6];var bn=Pe+(Ct=Se[Oe+7]),bt=Pe-Ct,dr=_e+gt,Mt=_e-gt,Ft=Ve+ut,Fr=Ve-ut,wt=Ze+st,us=Ze-st,Bt=bn+wt,pr=bn-wt,ii=dr+Ft,jt=dr-Ft;Se[Oe]=Bt+ii,Se[Oe+4]=Bt-ii;var et=.707106781*(jt+pr);Se[Oe+2]=pr+et,Se[Oe+6]=pr-et;var xt=.382683433*((Bt=us+Fr)-(jt=Mt+bt)),fs=.5411961*Bt+xt,dn=1.306562965*jt+xt,Rr=.707106781*(ii=Fr+Mt),Br=bt+Rr,$e=bt-Rr;Se[Oe+5]=$e+fs,Se[Oe+3]=$e-fs,Se[Oe+1]=Br+dn,Se[Oe+7]=Br-dn,Oe+=8}for(Oe=0,Ye=0;Ye<8;++Ye){Pe=Se[Oe],_e=Se[Oe+8],Ve=Se[Oe+16],Ze=Se[Oe+24],st=Se[Oe+32],ut=Se[Oe+40],gt=Se[Oe+48];var mr=Pe+(Ct=Se[Oe+56]),jr=Pe-Ct,Fn=_e+gt,tn=_e-gt,Yt=Ve+ut,Gn=Ve-ut,Bs=Ze+st,si=Ze-st,gr=mr+Bs,yr=mr-Bs,br=Fn+Yt,qr=Fn-Yt;Se[Oe]=gr+br,Se[Oe+32]=gr-br;var tr=.707106781*(qr+yr);Se[Oe+16]=yr+tr,Se[Oe+48]=yr-tr;var zr=.382683433*((gr=si+Gn)-(qr=tn+jr)),hs=.5411961*gr+zr,js=1.306562965*qr+zr,qs=.707106781*(br=Gn+tn),zs=jr+qs,Vs=jr-qs;Se[Oe+40]=Vs+hs,Se[Oe+24]=Vs-hs,Se[Oe+8]=zs+js,Se[Oe+56]=zs-js,Oe++}for(Ye=0;Ye<64;++Ye)ft=Se[Ye]*Ae[Ye],d[Ye]=ft>0?ft+.5|0:ft-.5|0;return d}(C,F),Ne=0;Ne<64;++Ne)v[Y[Ne]]=ke[Ne];var Te=v[0]-q;q=v[0],Te==0?de(W[0]):(de(W[y[ne=32767+Te]]),de(m[ne]));for(var Fe=63;Fe>0&&v[Fe]==0;)Fe--;if(Fe==0)return de(re),q;for(var Ge,fe=1;fe<=Fe;){for(var z=fe;v[fe]==0&&fe<=Fe;)++fe;var nt=fe-z;if(nt>=16){Ge=nt>>4;for(var ze=1;ze<=Ge;++ze)de(se);nt&=15}ne=32767+v[fe],de(K[(nt<<4)+y[ne]]),de(m[ne]),fe++}return Fe!=63&&de(re),q}function Me(C){C=Math.min(Math.max(C,1),100),s!=C&&(function(F){for(var q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],W=0;W<64;W++){var K=o((q[W]*F+50)/100);K=Math.min(Math.max(K,1),255),a[Y[W]]=K}for(var ne=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],re=0;re<64;re++){var se=o((ne[re]*F+50)/100);se=Math.min(Math.max(se,1),255),l[Y[re]]=se}for(var ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ne=0,Te=0;Te<8;Te++)for(var Fe=0;Fe<8;Fe++)u[Ne]=1/(a[Y[Ne]]*ke[Te]*ke[Fe]*8),f[Ne]=1/(l[Y[Ne]]*ke[Te]*ke[Fe]*8),Ne++}(C<50?Math.floor(5e3/C):Math.floor(200-2*C)),s=C)}this.encode=function(C,F){F&&Me(F),w=new Array,S=0,x=7,me(65496),me(65504),me(16),te(74),te(70),te(73),te(70),te(0),te(1),te(1),te(0),me(1),me(1),te(0),te(0),function(){me(65499),me(132),te(0);for(var _e=0;_e<64;_e++)te(a[_e]);te(1);for(var Ve=0;Ve<64;Ve++)te(l[Ve])}(),function(_e,Ve){me(65472),me(17),te(8),me(Ve),me(_e),te(3),te(1),te(17),te(0),te(2),te(17),te(1),te(3),te(17),te(1)}(C.width,C.height),function(){me(65476),me(418),te(0);for(var _e=0;_e<16;_e++)te(E[_e+1]);for(var Ve=0;Ve<=11;Ve++)te(ue[Ve]);te(16);for(var Ze=0;Ze<16;Ze++)te(le[Ze+1]);for(var st=0;st<=161;st++)te(I[st]);te(1);for(var ut=0;ut<16;ut++)te(O[ut+1]);for(var gt=0;gt<=11;gt++)te(j[gt]);te(17);for(var Ct=0;Ct<16;Ct++)te(R[Ct+1]);for(var Ye=0;Ye<=161;Ye++)te(oe[Ye])}(),me(65498),me(12),te(3),te(1),te(0),te(2),te(17),te(3),te(17),te(0),te(63),te(0);var q=0,W=0,K=0;S=0,x=7,this.encode.displayName="_encode_";for(var ne,re,se,ke,Ne,Te,Fe,Ge,fe,z=C.data,nt=C.width,ze=C.height,Se=4*nt,Ae=0;Ae<ze;){for(ne=0;ne<Se;){for(Ne=Se*Ae+ne,Fe=-1,Ge=0,fe=0;fe<64;fe++)Te=Ne+(Ge=fe>>3)*Se+(Fe=4*(7&fe)),Ae+Ge>=ze&&(Te-=Se*(Ae+1+Ge-ze)),ne+Fe>=Se&&(Te-=ne+Fe-Se+4),re=z[Te++],se=z[Te++],ke=z[Te++],_[fe]=(he[re]+he[se+256>>0]+he[ke+512>>0]>>16)-128,B[fe]=(he[re+768>>0]+he[se+1024>>0]+he[ke+1280>>0]>>16)-128,$[fe]=(he[re+1280>>0]+he[se+1536>>0]+he[ke+1792>>0]>>16)-128;q=pe(_,u,q,e,r),W=pe(B,f,W,t,i),K=pe($,f,K,t,i),ne+=32}Ae+=8}if(x>=0){var Pe=[];Pe[1]=x+1,Pe[0]=(1<<x+1)-1,de(Pe)}return me(65497),new Uint8Array(w)},n=n||50,function(){for(var C=String.fromCharCode,F=0;F<256;F++)Q[F]=C(F)}(),e=ie(E,ue),t=ie(O,j),r=ie(le,I),i=ie(R,oe),function(){for(var C=1,F=2,q=1;q<=15;q++){for(var W=C;W<F;W++)y[32767+W]=q,m[32767+W]=[],m[32767+W][1]=q,m[32767+W][0]=W;for(var K=-(F-1);K<=-C;K++)y[32767+K]=q,m[32767+K]=[],m[32767+K][1]=q,m[32767+K][0]=F-1+K;C<<=1,F<<=1}}(),function(){for(var C=0;C<256;C++)he[C]=19595*C,he[C+256>>0]=38470*C,he[C+512>>0]=7471*C+32768,he[C+768>>0]=-11059*C,he[C+1024>>0]=-21709*C,he[C+1280>>0]=32768*C+8421375,he[C+1536>>0]=-27439*C,he[C+1792>>0]=-5329*C}(),Me(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Mr(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function xp(n){function e(E){if(!E)throw Error("assert :P")}function t(E,ue,le){for(var I=0;4>I;I++)if(E[ue+I]!=le.charCodeAt(I))return!0;return!1}function r(E,ue,le,I,O){for(var j=0;j<O;j++)E[ue+j]=le[I+j]}function i(E,ue,le,I){for(var O=0;O<I;O++)E[ue+O]=le}function s(E){return new Int32Array(E)}function o(E,ue){for(var le=[],I=0;I<E;I++)le.push(new ue);return le}function a(E,ue){var le=[];return function I(O,j,R){for(var oe=R[j],ie=0;ie<oe&&(O.push(R.length>j+1?[]:new ue),!(R.length<j+1));ie++)I(O[ie],j+1,R)}(le,0,E),le}var l=function(){var E=this;function ue(c,h){for(var g=1<<h-1>>>0;c&g;)g>>>=1;return g?(c&g-1)+g:c}function le(c,h,g,b,N){e(!(b%g));do c[h+(b-=g)]=N;while(0<b)}function I(c,h,g,b,N){if(e(2328>=N),512>=N)var A=s(512);else if((A=s(N))==null)return 0;return function(L,M,P,T,H,Z){var ee,G,be=M,ae=1<<P,U=s(16),J=s(16);for(e(H!=0),e(T!=null),e(L!=null),e(0<P),G=0;G<H;++G){if(15<T[G])return 0;++U[T[G]]}if(U[0]==H)return 0;for(J[1]=0,ee=1;15>ee;++ee){if(U[ee]>1<<ee)return 0;J[ee+1]=J[ee]+U[ee]}for(G=0;G<H;++G)ee=T[G],0<T[G]&&(Z[J[ee]++]=G);if(J[15]==1)return(T=new O).g=0,T.value=Z[0],le(L,be,1,ae,T),ae;var ge,ve=-1,ye=ae-1,De=0,Le=1,We=1,Ce=1<<P;for(G=0,ee=1,H=2;ee<=P;++ee,H<<=1){if(Le+=We<<=1,0>(We-=U[ee]))return 0;for(;0<U[ee];--U[ee])(T=new O).g=ee,T.value=Z[G++],le(L,be+De,H,Ce,T),De=ue(De,ee)}for(ee=P+1,H=2;15>=ee;++ee,H<<=1){if(Le+=We<<=1,0>(We-=U[ee]))return 0;for(;0<U[ee];--U[ee]){if(T=new O,(De&ye)!=ve){for(be+=Ce,ge=1<<(ve=ee)-P;15>ve&&!(0>=(ge-=U[ve]));)++ve,ge<<=1;ae+=Ce=1<<(ge=ve-P),L[M+(ve=De&ye)].g=ge+P,L[M+ve].value=be-M-ve}T.g=ee-P,T.value=Z[G++],le(L,be+(De>>P),H,Ce,T),De=ue(De,ee)}}return Le!=2*J[15]-1?0:ae}(c,h,g,b,N,A)}function O(){this.value=this.g=0}function j(){this.value=this.g=0}function R(){this.G=o(5,O),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Bn,j)}function oe(c,h,g,b){e(c!=null),e(h!=null),e(2147483648>b),c.Ca=254,c.I=0,c.b=-8,c.Ka=0,c.oa=h,c.pa=g,c.Jd=h,c.Yc=g+b,c.Zc=4<=b?g+b-4+1:g,ne(c)}function ie(c,h){for(var g=0;0<h--;)g|=se(c,128)<<h;return g}function de(c,h){var g=ie(c,h);return re(c)?-g:g}function te(c,h,g,b){var N,A=0;for(e(c!=null),e(h!=null),e(4294967288>b),c.Sb=b,c.Ra=0,c.u=0,c.h=0,4<b&&(b=4),N=0;N<b;++N)A+=h[g+N]<<8*N;c.Ra=A,c.bb=b,c.oa=h,c.pa=g}function me(c){for(;8<=c.u&&c.bb<c.Sb;)c.Ra>>>=8,c.Ra+=c.oa[c.pa+c.bb]<<ro-8>>>0,++c.bb,c.u-=8;q(c)&&(c.h=1,c.u=0)}function pe(c,h){if(e(0<=h),!c.h&&h<=no){var g=F(c)&to[h];return c.u+=h,me(c),g}return c.h=1,c.u=0}function Me(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function C(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function F(c){return c.Ra>>>(c.u&ro-1)>>>0}function q(c){return e(c.bb<=c.Sb),c.h||c.bb==c.Sb&&c.u>ro}function W(c,h){c.u=h,c.h=q(c)}function K(c){c.u>=ua&&(e(c.u>=ua),me(c))}function ne(c){e(c!=null&&c.oa!=null),c.pa<c.Zc?(c.I=(c.oa[c.pa++]|c.I<<8)>>>0,c.b+=8):(e(c!=null&&c.oa!=null),c.pa<c.Yc?(c.b+=8,c.I=c.oa[c.pa++]|c.I<<8):c.Ka?c.b=0:(c.I<<=8,c.b+=8,c.Ka=1))}function re(c){return ie(c,1)}function se(c,h){var g=c.Ca;0>c.b&&ne(c);var b=c.b,N=g*h>>>8,A=(c.I>>>b>N)+0;for(A?(g-=N,c.I-=N+1<<b>>>0):g=N+1,b=g,N=0;256<=b;)N+=8,b>>=8;return b=7^N+jn[b],c.b-=b,c.Ca=(g<<b)-1,A}function ke(c,h,g){c[h+0]=g>>24&255,c[h+1]=g>>16&255,c[h+2]=g>>8&255,c[h+3]=g>>0&255}function Ne(c,h){return c[h+0]<<0|c[h+1]<<8}function Te(c,h){return Ne(c,h)|c[h+2]<<16}function Fe(c,h){return Ne(c,h)|Ne(c,h+2)<<16}function Ge(c,h){var g=1<<h;return e(c!=null),e(0<h),c.X=s(g),c.X==null?0:(c.Mb=32-h,c.Xa=h,1)}function fe(c,h){e(c!=null),e(h!=null),e(c.Xa==h.Xa),r(h.X,0,c.X,0,1<<h.Xa)}function z(){this.X=[],this.Xa=this.Mb=0}function nt(c,h,g,b){e(g!=null),e(b!=null);var N=g[0],A=b[0];return N==0&&(N=(c*A+h/2)/h),A==0&&(A=(h*N+c/2)/c),0>=N||0>=A?0:(g[0]=N,b[0]=A,1)}function ze(c,h){return c+(1<<h)-1>>>h}function Se(c,h){return((4278255360&c)+(4278255360&h)>>>0&4278255360)+((16711935&c)+(16711935&h)>>>0&16711935)>>>0}function Ae(c,h){E[h]=function(g,b,N,A,L,M,P){var T;for(T=0;T<L;++T){var H=E[c](M[P+T-1],N,A+T);M[P+T]=Se(g[b+T],H)}}}function Pe(){this.ud=this.hd=this.jd=0}function _e(c,h){return((4278124286&(c^h))>>>1)+(c&h)>>>0}function Ve(c){return 0<=c&&256>c?c:0>c?0:255<c?255:void 0}function Ze(c,h){return Ve(c+(c-h+.5>>1))}function st(c,h,g){return Math.abs(h-g)-Math.abs(c-g)}function ut(c,h,g,b,N,A,L){for(b=A[L-1],g=0;g<N;++g)A[L+g]=b=Se(c[h+g],b)}function gt(c,h,g,b,N){var A;for(A=0;A<g;++A){var L=c[h+A],M=L>>8&255,P=16711935&(P=(P=16711935&L)+((M<<16)+M));b[N+A]=(4278255360&L)+P>>>0}}function Ct(c,h){h.jd=c>>0&255,h.hd=c>>8&255,h.ud=c>>16&255}function Ye(c,h,g,b,N,A){var L;for(L=0;L<b;++L){var M=h[g+L],P=M>>>8,T=M,H=255&(H=(H=M>>>16)+((c.jd<<24>>24)*(P<<24>>24)>>>5));T=255&(T=(T=T+((c.hd<<24>>24)*(P<<24>>24)>>>5))+((c.ud<<24>>24)*(H<<24>>24)>>>5)),N[A+L]=(4278255360&M)+(H<<16)+T}}function ft(c,h,g,b,N){E[h]=function(A,L,M,P,T,H,Z,ee,G){for(P=Z;P<ee;++P)for(Z=0;Z<G;++Z)T[H++]=N(M[b(A[L++])])},E[c]=function(A,L,M,P,T,H,Z){var ee=8>>A.b,G=A.Ea,be=A.K[0],ae=A.w;if(8>ee)for(A=(1<<A.b)-1,ae=(1<<ee)-1;L<M;++L){var U,J=0;for(U=0;U<G;++U)U&A||(J=b(P[T++])),H[Z++]=N(be[J&ae]),J>>=ee}else E["VP8LMapColor"+g](P,T,be,ae,H,Z,L,M,G)}}function Oe(c,h,g,b,N){for(g=h+g;h<g;){var A=c[h++];b[N++]=A>>16&255,b[N++]=A>>8&255,b[N++]=A>>0&255}}function bn(c,h,g,b,N){for(g=h+g;h<g;){var A=c[h++];b[N++]=A>>16&255,b[N++]=A>>8&255,b[N++]=A>>0&255,b[N++]=A>>24&255}}function bt(c,h,g,b,N){for(g=h+g;h<g;){var A=(L=c[h++])>>16&240|L>>12&15,L=L>>0&240|L>>28&15;b[N++]=A,b[N++]=L}}function dr(c,h,g,b,N){for(g=h+g;h<g;){var A=(L=c[h++])>>16&248|L>>13&7,L=L>>5&224|L>>3&31;b[N++]=A,b[N++]=L}}function Mt(c,h,g,b,N){for(g=h+g;h<g;){var A=c[h++];b[N++]=A>>0&255,b[N++]=A>>8&255,b[N++]=A>>16&255}}function Ft(c,h,g,b,N,A){if(A==0)for(g=h+g;h<g;)ke(b,((A=c[h++])[0]>>24|A[1]>>8&65280|A[2]<<8&16711680|A[3]<<24)>>>0),N+=32;else r(b,N,c,h,g)}function Fr(c,h){E[h][0]=E[c+"0"],E[h][1]=E[c+"1"],E[h][2]=E[c+"2"],E[h][3]=E[c+"3"],E[h][4]=E[c+"4"],E[h][5]=E[c+"5"],E[h][6]=E[c+"6"],E[h][7]=E[c+"7"],E[h][8]=E[c+"8"],E[h][9]=E[c+"9"],E[h][10]=E[c+"10"],E[h][11]=E[c+"11"],E[h][12]=E[c+"12"],E[h][13]=E[c+"13"],E[h][14]=E[c+"0"],E[h][15]=E[c+"0"]}function wt(c){return c==cu||c==uu||c==vl||c==fu}function us(){this.eb=[],this.size=this.A=this.fb=0}function Bt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function pr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new us,this.f.kb=new Bt,this.sd=null}function ii(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function jt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function et(c){return alert("todo:WebPSamplerProcessPlane"),c.T}function xt(c,h){var g=c.T,b=h.ba.f.RGBA,N=b.eb,A=b.fb+c.ka*b.A,L=sr[h.ba.S],M=c.y,P=c.O,T=c.f,H=c.N,Z=c.ea,ee=c.W,G=h.cc,be=h.dc,ae=h.Mc,U=h.Nc,J=c.ka,ge=c.ka+c.T,ve=c.U,ye=ve+1>>1;for(J==0?L(M,P,null,null,T,H,Z,ee,T,H,Z,ee,N,A,null,null,ve):(L(h.ec,h.fc,M,P,G,be,ae,U,T,H,Z,ee,N,A-b.A,N,A,ve),++g);J+2<ge;J+=2)G=T,be=H,ae=Z,U=ee,H+=c.Rc,ee+=c.Rc,A+=2*b.A,L(M,(P+=2*c.fa)-c.fa,M,P,G,be,ae,U,T,H,Z,ee,N,A-b.A,N,A,ve);return P+=c.fa,c.j+ge<c.o?(r(h.ec,h.fc,M,P,ve),r(h.cc,h.dc,T,H,ye),r(h.Mc,h.Nc,Z,ee,ye),g--):1&ge||L(M,P,null,null,T,H,Z,ee,T,H,Z,ee,N,A+b.A,null,null,ve),g}function fs(c,h,g){var b=c.F,N=[c.J];if(b!=null){var A=c.U,L=h.ba.S,M=L==bl||L==vl;h=h.ba.f.RGBA;var P=[0],T=c.ka;P[0]=c.T,c.Kb&&(T==0?--P[0]:(--T,N[0]-=c.width),c.j+c.ka+c.T==c.o&&(P[0]=c.o-c.j-T));var H=h.eb;T=h.fb+T*h.A,c=dl(b,N[0],c.width,A,P,H,T+(M?0:3),h.A),e(g==P),c&&wt(L)&&Ti(H,T,M,A,P,h.A)}return 0}function dn(c){var h=c.ma,g=h.ba.S,b=11>g,N=g==gl||g==yl||g==bl||g==lu||g==12||wt(g);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!la(h.Oa,c,N?11:12))return 0;if(N&&wt(g)&&we(),c.da)alert("todo:use_scaling");else{if(b){if(h.Ib=et,c.Kb){if(g=c.U+1>>1,h.memory=s(c.U+2*g),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+c.U,h.Mc=h.cc,h.Nc=h.dc+g,h.Ib=xt,we()}}else alert("todo:EmitYUV");N&&(h.Jb=fs,b&&X())}if(b&&!Nh){for(c=0;256>c;++c)q0[c]=89858*(c-128)+xl>>wl,H0[c]=-22014*(c-128)+xl,V0[c]=-45773*(c-128),z0[c]=113618*(c-128)+xl>>wl;for(c=ga;c<pu;++c)h=76283*(c-16)+xl>>wl,U0[c-ga]=Kn(h,255),W0[c-ga]=Kn(h+8>>4,15);Nh=1}return 1}function Rr(c){var h=c.ma,g=c.U,b=c.T;return e(!(1&c.ka)),0>=g||0>=b?0:(g=h.Ib(c,h),h.Jb!=null&&h.Jb(c,h,g),h.Dc+=g,1)}function Br(c){c.ma.memory=null}function $e(c,h,g,b){return pe(c,8)!=47?0:(h[0]=pe(c,14)+1,g[0]=pe(c,14)+1,b[0]=pe(c,1),pe(c,3)!=0?0:!c.h)}function mr(c,h){if(4>c)return c+1;var g=c-2>>1;return(2+(1&c)<<g)+pe(h,g)+1}function jr(c,h){return 120<h?h-120:1<=(g=((g=L0[h-1])>>4)*c+(8-(15&g)))?g:1;var g}function Fn(c,h,g){var b=F(g),N=c[h+=255&b].g-8;return 0<N&&(W(g,g.u+8),b=F(g),h+=c[h].value,h+=b&(1<<N)-1),W(g,g.u+c[h].g),c[h].value}function tn(c,h,g){return g.g+=c.g,g.value+=c.value<<h>>>0,e(8>=g.g),c.g}function Yt(c,h,g){var b=c.xc;return e((h=b==0?0:c.vc[c.md*(g>>b)+(h>>b)])<c.Wb),c.Ya[h]}function Gn(c,h,g,b){var N=c.ab,A=c.c*h,L=c.C;h=L+h;var M=g,P=b;for(b=c.Ta,g=c.Ua;0<N--;){var T=c.gc[N],H=L,Z=h,ee=M,G=P,be=(P=b,M=g,T.Ea);switch(e(H<Z),e(Z<=T.nc),T.hc){case 2:hl(ee,G,(Z-H)*be,P,M);break;case 0:var ae=H,U=Z,J=P,ge=M,ve=(Ce=T).Ea;ae==0&&(iu(ee,G,null,null,1,J,ge),ut(ee,G+1,0,0,ve-1,J,ge+1),G+=ve,ge+=ve,++ae);for(var ye=1<<Ce.b,De=ye-1,Le=ze(ve,Ce.b),We=Ce.K,Ce=Ce.w+(ae>>Ce.b)*Le;ae<U;){var vt=We,kt=Ce,yt=1;for(fa(ee,G,J,ge-ve,1,J,ge);yt<ve;){var dt=(yt&~De)+ye;dt>ve&&(dt=ve),(0,Mi[vt[kt++]>>8&15])(ee,G+ +yt,J,ge+yt-ve,dt-yt,J,ge+yt),yt=dt}G+=ve,ge+=ve,++ae&De||(Ce+=Le)}Z!=T.nc&&r(P,M-be,P,M+(Z-H-1)*be,be);break;case 1:for(be=ee,U=G,ve=(ee=T.Ea)-(ge=ee&~(J=(G=1<<T.b)-1)),ae=ze(ee,T.b),ye=T.K,T=T.w+(H>>T.b)*ae;H<Z;){for(De=ye,Le=T,We=new Pe,Ce=U+ge,vt=U+ee;U<Ce;)Ct(De[Le++],We),nr(We,be,U,G,P,M),U+=G,M+=G;U<vt&&(Ct(De[Le++],We),nr(We,be,U,ve,P,M),U+=ve,M+=ve),++H&J||(T+=ae)}break;case 3:if(ee==P&&G==M&&0<T.b){for(U=P,ee=be=M+(Z-H)*be-(ge=(Z-H)*ze(T.Ea,T.b)),G=P,J=M,ae=[],ge=(ve=ge)-1;0<=ge;--ge)ae[ge]=G[J+ge];for(ge=ve-1;0<=ge;--ge)U[ee+ge]=ae[ge];Sr(T,H,Z,P,be,P,M)}else Sr(T,H,Z,ee,G,P,M)}M=b,P=g}P!=g&&r(b,g,M,P,A)}function Bs(c,h){var g=c.V,b=c.Ba+c.c*c.C,N=h-c.C;if(e(h<=c.l.o),e(16>=N),0<N){var A=c.l,L=c.Ta,M=c.Ua,P=A.width;if(Gn(c,N,g,b),N=M=[M],e((g=c.C)<(b=h)),e(A.v<A.va),b>A.o&&(b=A.o),g<A.j){var T=A.j-g;g=A.j,N[0]+=T*P}if(g>=b?g=0:(N[0]+=4*A.v,A.ka=g-A.j,A.U=A.va-A.v,A.T=b-g,g=1),g){if(M=M[0],11>(g=c.ca).S){var H=g.f.RGBA,Z=(b=g.S,N=A.U,A=A.T,T=H.eb,H.A),ee=A;for(H=H.fb+c.Ma*H.A;0<ee--;){var G=L,be=M,ae=N,U=T,J=H;switch(b){case ml:Nr(G,be,ae,U,J);break;case gl:Pi(G,be,ae,U,J);break;case cu:Pi(G,be,ae,U,J),Ti(U,J,0,ae,1,0);break;case dh:io(G,be,ae,U,J);break;case yl:Ft(G,be,ae,U,J,1);break;case uu:Ft(G,be,ae,U,J,1),Ti(U,J,0,ae,1,0);break;case bl:Ft(G,be,ae,U,J,0);break;case vl:Ft(G,be,ae,U,J,0),Ti(U,J,1,ae,1,0);break;case lu:Hr(G,be,ae,U,J);break;case fu:Hr(G,be,ae,U,J),ao(U,J,ae,1,0);break;case ph:ci(G,be,ae,U,J);break;default:e(0)}M+=P,H+=Z}c.Ma+=A}else alert("todo:EmitRescaledRowsYUVA");e(c.Ma<=g.height)}}c.C=h,e(c.C<=c.i)}function si(c){var h;if(0<c.ua)return 0;for(h=0;h<c.Wb;++h){var g=c.Ya[h].G,b=c.Ya[h].H;if(0<g[1][b[1]+0].g||0<g[2][b[2]+0].g||0<g[3][b[3]+0].g)return 0}return 1}function gr(c,h,g,b,N,A){if(c.Z!=0){var L=c.qd,M=c.rd;for(e(Di[c.Z]!=null);h<g;++h)Di[c.Z](L,M,b,N,b,N,A),L=b,M=N,N+=A;c.qd=L,c.rd=M}}function yr(c,h){var g=c.l.ma,b=g.Z==0||g.Z==1?c.l.j:c.C;if(b=c.C<b?b:c.C,e(h<=c.l.o),h>b){var N=c.l.width,A=g.ca,L=g.tb+N*b,M=c.V,P=c.Ba+c.c*b,T=c.gc;e(c.ab==1),e(T[0].hc==3),su(T[0],b,h,M,P,A,L),gr(g,b,h,A,L,N)}c.C=c.Ma=h}function br(c,h,g,b,N,A,L){var M=c.$/b,P=c.$%b,T=c.m,H=c.s,Z=g+c.$,ee=Z;N=g+b*N;var G=g+b*A,be=280+H.ua,ae=c.Pb?M:16777216,U=0<H.ua?H.Wa:null,J=H.wc,ge=Z<G?Yt(H,P,M):null;e(c.C<A),e(G<=N);var ve=!1;e:for(;;){for(;ve||Z<G;){var ye=0;if(M>=ae){var De=Z-g;e((ae=c).Pb),ae.wd=ae.m,ae.xd=De,0<ae.s.ua&&fe(ae.s.Wa,ae.s.vb),ae=M+_0}if(P&J||(ge=Yt(H,P,M)),e(ge!=null),ge.Qb&&(h[Z]=ge.qb,ve=!0),!ve)if(K(T),ge.jc){ye=T,De=h;var Le=Z,We=ge.pd[F(ye)&Bn-1];e(ge.jc),256>We.g?(W(ye,ye.u+We.g),De[Le]=We.value,ye=0):(W(ye,ye.u+We.g-256),e(256<=We.value),ye=We.value),ye==0&&(ve=!0)}else ye=Fn(ge.G[0],ge.H[0],T);if(T.h)break;if(ve||256>ye){if(!ve)if(ge.nd)h[Z]=(ge.qb|ye<<8)>>>0;else{if(K(T),ve=Fn(ge.G[1],ge.H[1],T),K(T),De=Fn(ge.G[2],ge.H[2],T),Le=Fn(ge.G[3],ge.H[3],T),T.h)break;h[Z]=(Le<<24|ve<<16|ye<<8|De)>>>0}if(ve=!1,++Z,++P>=b&&(P=0,++M,L!=null&&M<=A&&!(M%16)&&L(c,M),U!=null))for(;ee<Z;)ye=h[ee++],U.X[(506832829*ye&4294967295)>>>U.Mb]=ye}else if(280>ye){if(ye=mr(ye-256,T),De=Fn(ge.G[4],ge.H[4],T),K(T),De=jr(b,De=mr(De,T)),T.h)break;if(Z-g<De||N-Z<ye)break e;for(Le=0;Le<ye;++Le)h[Z+Le]=h[Z+Le-De];for(Z+=ye,P+=ye;P>=b;)P-=b,++M,L!=null&&M<=A&&!(M%16)&&L(c,M);if(e(Z<=N),P&J&&(ge=Yt(H,P,M)),U!=null)for(;ee<Z;)ye=h[ee++],U.X[(506832829*ye&4294967295)>>>U.Mb]=ye}else{if(!(ye<be))break e;for(ve=ye-280,e(U!=null);ee<Z;)ye=h[ee++],U.X[(506832829*ye&4294967295)>>>U.Mb]=ye;ye=Z,e(!(ve>>>(De=U).Xa)),h[ye]=De.X[ve],ve=!0}ve||e(T.h==q(T))}if(c.Pb&&T.h&&Z<N)e(c.m.h),c.a=5,c.m=c.wd,c.$=c.xd,0<c.s.ua&&fe(c.s.vb,c.s.Wa);else{if(T.h)break e;L!=null&&L(c,M>A?A:M),c.a=0,c.$=Z-g}return 1}return c.a=3,0}function qr(c){e(c!=null),c.vc=null,c.yc=null,c.Ya=null;var h=c.Wa;h!=null&&(h.X=null),c.vb=null,e(c!=null)}function tr(){var c=new ru;return c==null?null:(c.a=0,c.xb=yh,Fr("Predictor","VP8LPredictors"),Fr("Predictor","VP8LPredictors_C"),Fr("PredictorAdd","VP8LPredictorsAdd"),Fr("PredictorAdd","VP8LPredictorsAdd_C"),hl=gt,nr=Ye,Nr=Oe,Pi=bn,Hr=bt,ci=dr,io=Mt,E.VP8LMapColor32b=ha,E.VP8LMapColor8b=ou,c)}function zr(c,h,g,b,N){var A=1,L=[c],M=[h],P=b.m,T=b.s,H=null,Z=0;e:for(;;){if(g)for(;A&&pe(P,1);){var ee=L,G=M,be=b,ae=1,U=be.m,J=be.gc[be.ab],ge=pe(U,2);if(be.Oc&1<<ge)A=0;else{switch(be.Oc|=1<<ge,J.hc=ge,J.Ea=ee[0],J.nc=G[0],J.K=[null],++be.ab,e(4>=be.ab),ge){case 0:case 1:J.b=pe(U,3)+2,ae=zr(ze(J.Ea,J.b),ze(J.nc,J.b),0,be,J.K),J.K=J.K[0];break;case 3:var ve,ye=pe(U,8)+1,De=16<ye?0:4<ye?1:2<ye?2:3;if(ee[0]=ze(J.Ea,De),J.b=De,ve=ae=zr(ye,1,0,be,J.K)){var Le,We=ye,Ce=J,vt=1<<(8>>Ce.b),kt=s(vt);if(kt==null)ve=0;else{var yt=Ce.K[0],dt=Ce.w;for(kt[0]=Ce.K[0][0],Le=1;Le<1*We;++Le)kt[Le]=Se(yt[dt+Le],kt[Le-1]);for(;Le<4*vt;++Le)kt[Le]=0;Ce.K[0]=null,Ce.K[0]=kt,ve=1}}ae=ve;break;case 2:break;default:e(0)}A=ae}}if(L=L[0],M=M[0],A&&pe(P,1)&&!(A=1<=(Z=pe(P,4))&&11>=Z)){b.a=3;break e}var Pt;if(Pt=A)t:{var _t,it,Qt,qn=b,Zt=L,zn=M,At=Z,Xn=g,Qn=qn.m,ln=qn.s,pn=[null],_n=1,or=0,Ur=C0[At];n:for(;;){if(Xn&&pe(Qn,1)){var cn=pe(Qn,3)+2,pi=ze(Zt,cn),vs=ze(zn,cn),lo=pi*vs;if(!zr(pi,vs,0,qn,pn))break n;for(pn=pn[0],ln.xc=cn,_t=0;_t<lo;++_t){var Fi=pn[_t]>>8&65535;pn[_t]=Fi,Fi>=_n&&(_n=Fi+1)}}if(Qn.h)break n;for(it=0;5>it;++it){var zt=mh[it];!it&&0<At&&(zt+=1<<At),or<zt&&(or=zt)}var mu=o(_n*Ur,O),Lh=_n,Ch=o(Lh,R);if(Ch==null)var Nl=null;else e(65536>=Lh),Nl=Ch;var ya=s(or);if(Nl==null||ya==null||mu==null){qn.a=1;break n}var kl=mu;for(_t=Qt=0;_t<_n;++_t){var Cr=Nl[_t],co=Cr.G,uo=Cr.H,_h=0,Al=1,Mh=0;for(it=0;5>it;++it){zt=mh[it],co[it]=kl,uo[it]=Qt,!it&&0<At&&(zt+=1<<At);i:{var Ll,gu=zt,Cl=qn,ba=ya,G0=kl,K0=Qt,yu=0,Ri=Cl.m,Y0=pe(Ri,1);if(i(ba,0,0,gu),Y0){var X0=pe(Ri,1)+1,Q0=pe(Ri,1),Ph=pe(Ri,Q0==0?1:8);ba[Ph]=1,X0==2&&(ba[Ph=pe(Ri,8)]=1);var _l=1}else{var Oh=s(19),Ih=pe(Ri,4)+4;if(19<Ih){Cl.a=3;var Ml=0;break i}for(Ll=0;Ll<Ih;++Ll)Oh[A0[Ll]]=pe(Ri,3);var bu=void 0,va=void 0,Th=Cl,Z0=Oh,Pl=gu,Eh=ba,vu=0,Bi=Th.m,Dh=8,Fh=o(128,O);r:for(;I(Fh,0,7,Z0,19);){if(pe(Bi,1)){var em=2+2*pe(Bi,3);if((bu=2+pe(Bi,em))>Pl)break r}else bu=Pl;for(va=0;va<Pl&&bu--;){K(Bi);var Rh=Fh[0+(127&F(Bi))];W(Bi,Bi.u+Rh.g);var fo=Rh.value;if(16>fo)Eh[va++]=fo,fo!=0&&(Dh=fo);else{var tm=fo==16,Bh=fo-16,nm=N0[Bh],jh=pe(Bi,S0[Bh])+nm;if(va+jh>Pl)break r;for(var rm=tm?Dh:0;0<jh--;)Eh[va++]=rm}}vu=1;break r}vu||(Th.a=3),_l=vu}(_l=_l&&!Ri.h)&&(yu=I(G0,K0,8,ba,gu)),_l&&yu!=0?Ml=yu:(Cl.a=3,Ml=0)}if(Ml==0)break n;if(Al&&k0[it]==1&&(Al=kl[Qt].g==0),_h+=kl[Qt].g,Qt+=Ml,3>=it){var wa,wu=ya[0];for(wa=1;wa<zt;++wa)ya[wa]>wu&&(wu=ya[wa]);Mh+=wu}}if(Cr.nd=Al,Cr.Qb=0,Al&&(Cr.qb=(co[3][uo[3]+0].value<<24|co[1][uo[1]+0].value<<16|co[2][uo[2]+0].value)>>>0,_h==0&&256>co[0][uo[0]+0].value&&(Cr.Qb=1,Cr.qb+=co[0][uo[0]+0].value<<8)),Cr.jc=!Cr.Qb&&6>Mh,Cr.jc){var Ol,mi=Cr;for(Ol=0;Ol<Bn;++Ol){var ji=Ol,qi=mi.pd[ji],Il=mi.G[0][mi.H[0]+ji];256<=Il.value?(qi.g=Il.g+256,qi.value=Il.value):(qi.g=0,qi.value=0,ji>>=tn(Il,8,qi),ji>>=tn(mi.G[1][mi.H[1]+ji],16,qi),ji>>=tn(mi.G[2][mi.H[2]+ji],0,qi),tn(mi.G[3][mi.H[3]+ji],24,qi))}}}ln.vc=pn,ln.Wb=_n,ln.Ya=Nl,ln.yc=mu,Pt=1;break t}Pt=0}if(!(A=Pt)){b.a=3;break e}if(0<Z){if(T.ua=1<<Z,!Ge(T.Wa,Z)){b.a=1,A=0;break e}}else T.ua=0;var xu=b,qh=L,im=M,Su=xu.s,Nu=Su.xc;if(xu.c=qh,xu.i=im,Su.md=ze(qh,Nu),Su.wc=Nu==0?-1:(1<<Nu)-1,g){b.xb=D0;break e}if((H=s(L*M))==null){b.a=1,A=0;break e}A=(A=br(b,H,0,L,M,M,null))&&!P.h;break e}return A?(N!=null?N[0]=H:(e(H==null),e(g)),b.$=0,g||qr(T)):qr(T),A}function hs(c,h){var g=c.c*c.i,b=g+h+16*h;return e(c.c<=h),c.V=s(b),c.V==null?(c.Ta=null,c.Ua=0,c.a=1,0):(c.Ta=c.V,c.Ua=c.Ba+g+h,1)}function js(c,h){var g=c.C,b=h-g,N=c.V,A=c.Ba+c.c*g;for(e(h<=c.l.o);0<b;){var L=16<b?16:b,M=c.l.ma,P=c.l.width,T=P*L,H=M.ca,Z=M.tb+P*g,ee=c.Ta,G=c.Ua;Gn(c,L,N,A),ah(ee,G,H,Z,T),gr(M,g,g+L,H,Z,P),b-=L,N+=L*c.c,g+=L}e(g==h),c.C=c.Ma=h}function qs(){this.ub=this.yd=this.td=this.Rb=0}function zs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Vs(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function $a(){this.Yb=function(){var c=[];return function h(g,b,N){for(var A=N[b],L=0;L<A&&(g.push(N.length>b+1?[]:0),!(N.length<b+1));L++)h(g[L],b+1,N)}(c,0,[3,11]),c}()}function Ec(){this.jb=s(3),this.Wc=a([4,8],$a),this.Xc=a([4,17],$a)}function Dc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Hs(){this.ld=this.La=this.dd=this.tc=0}function Ja(){this.Na=this.la=0}function Fc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function $o(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Rc(){this.uc=this.M=this.Nb=0,this.wa=Array(new Hs),this.Y=0,this.ya=Array(new $o),this.aa=0,this.l=new Us}function Ga(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Bc(){this.cb=this.a=0,this.sc="",this.m=new Me,this.Od=new qs,this.Kc=new zs,this.ed=new Dc,this.Qa=new Vs,this.Ic=this.$c=this.Aa=0,this.D=new Rc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Me),this.ia=0,this.pb=o(4,Fc),this.Pa=new Ec,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ga),this.Hd=0,this.rb=Array(new Ja),this.sb=0,this.wa=Array(new Hs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new $o),this.L=this.aa=0,this.gd=a([4,2],Hs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Us(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function jc(){var c=new Bc;return c!=null&&(c.a=0,c.sc="OK",c.cb=0,c.Xb=0,ma||(ma=Xa)),c}function Wt(c,h,g){return c.a==0&&(c.a=h,c.sc=g,c.cb=0),0}function Ka(c,h,g){return 3<=g&&c[h+0]==157&&c[h+1]==1&&c[h+2]==42}function Ya(c,h){if(c==null)return 0;if(c.a=0,c.sc="OK",h==null)return Wt(c,2,"null VP8Io passed to VP8GetHeaders()");var g=h.data,b=h.w,N=h.ha;if(4>N)return Wt(c,7,"Truncated header.");var A=g[b+0]|g[b+1]<<8|g[b+2]<<16,L=c.Od;if(L.Rb=!(1&A),L.td=A>>1&7,L.yd=A>>4&1,L.ub=A>>5,3<L.td)return Wt(c,3,"Incorrect keyframe parameters.");if(!L.yd)return Wt(c,4,"Frame not displayable.");b+=3,N-=3;var M=c.Kc;if(L.Rb){if(7>N)return Wt(c,7,"cannot parse picture header");if(!Ka(g,b,N))return Wt(c,3,"Bad code word");M.c=16383&(g[b+4]<<8|g[b+3]),M.Td=g[b+4]>>6,M.i=16383&(g[b+6]<<8|g[b+5]),M.Ud=g[b+6]>>6,b+=7,N-=7,c.za=M.c+15>>4,c.Ub=M.i+15>>4,h.width=M.c,h.height=M.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,i((A=c.Pa).jb,0,255,A.jb.length),e((A=c.Qa)!=null),A.Cb=0,A.Bb=0,A.Fb=1,i(A.Zb,0,0,A.Zb.length),i(A.Lb,0,0,A.Lb)}if(L.ub>N)return Wt(c,7,"bad partition length");oe(A=c.m,g,b,L.ub),b+=L.ub,N-=L.ub,L.Rb&&(M.Ld=re(A),M.Kd=re(A)),M=c.Qa;var P,T=c.Pa;if(e(A!=null),e(M!=null),M.Cb=re(A),M.Cb){if(M.Bb=re(A),re(A)){for(M.Fb=re(A),P=0;4>P;++P)M.Zb[P]=re(A)?de(A,7):0;for(P=0;4>P;++P)M.Lb[P]=re(A)?de(A,6):0}if(M.Bb)for(P=0;3>P;++P)T.jb[P]=re(A)?ie(A,8):255}else M.Bb=0;if(A.Ka)return Wt(c,3,"cannot parse segment header");if((M=c.ed).zd=re(A),M.Tb=ie(A,6),M.wb=ie(A,3),M.Pc=re(A),M.Pc&&re(A)){for(T=0;4>T;++T)re(A)&&(M.vd[T]=de(A,6));for(T=0;4>T;++T)re(A)&&(M.od[T]=de(A,6))}if(c.L=M.Tb==0?0:M.zd?1:2,A.Ka)return Wt(c,3,"cannot parse filter header");var H=N;if(N=P=b,b=P+H,M=H,c.Xb=(1<<ie(c.m,2))-1,H<3*(T=c.Xb))g=7;else{for(P+=3*T,M-=3*T,H=0;H<T;++H){var Z=g[N+0]|g[N+1]<<8|g[N+2]<<16;Z>M&&(Z=M),oe(c.Jc[+H],g,P,Z),P+=Z,M-=Z,N+=3}oe(c.Jc[+T],g,P,M),g=P<b?0:5}if(g!=0)return Wt(c,g,"cannot parse partitions");for(g=ie(P=c.m,7),N=re(P)?de(P,4):0,b=re(P)?de(P,4):0,M=re(P)?de(P,4):0,T=re(P)?de(P,4):0,P=re(P)?de(P,4):0,H=c.Qa,Z=0;4>Z;++Z){if(H.Cb){var ee=H.Zb[Z];H.Fb||(ee+=g)}else{if(0<Z){c.pb[Z]=c.pb[0];continue}ee=g}var G=c.pb[Z];G.Sc[0]=hu[Kn(ee+N,127)],G.Sc[1]=du[Kn(ee+0,127)],G.Eb[0]=2*hu[Kn(ee+b,127)],G.Eb[1]=101581*du[Kn(ee+M,127)]>>16,8>G.Eb[1]&&(G.Eb[1]=8),G.Qc[0]=hu[Kn(ee+T,117)],G.Qc[1]=du[Kn(ee+P,127)],G.lc=ee+P}if(!L.Rb)return Wt(c,4,"Not a key frame.");for(re(A),L=c.Pa,g=0;4>g;++g){for(N=0;8>N;++N)for(b=0;3>b;++b)for(M=0;11>M;++M)T=se(A,T0[g][N][b][M])?ie(A,8):O0[g][N][b][M],L.Wc[g][N].Yb[b][M]=T;for(N=0;17>N;++N)L.Xc[g][N]=L.Wc[g][E0[N]]}return c.kc=re(A),c.kc&&(c.Bd=ie(A,8)),c.cb=1}function Xa(c,h,g,b,N,A,L){var M=h[N].Yb[g];for(g=0;16>N;++N){if(!se(c,M[g+0]))return N;for(;!se(c,M[g+1]);)if(M=h[++N].Yb[0],g=0,N==16)return 16;var P=h[N+1].Yb;if(se(c,M[g+2])){var T=c,H=0;if(se(T,(ee=M)[(Z=g)+3]))if(se(T,ee[Z+6])){for(M=0,Z=2*(H=se(T,ee[Z+8]))+(ee=se(T,ee[Z+9+H])),H=0,ee=M0[Z];ee[M];++M)H+=H+se(T,ee[M]);H+=3+(8<<Z)}else se(T,ee[Z+7])?(H=7+2*se(T,165),H+=se(T,145)):H=5+se(T,159);else H=se(T,ee[Z+4])?3+se(T,ee[Z+5]):2;M=P[2]}else H=1,M=P[1];P=L+P0[N],0>(T=c).b&&ne(T);var Z,ee=T.b,G=(Z=T.Ca>>1)-(T.I>>ee)>>31;--T.b,T.Ca+=G,T.Ca|=1,T.I-=(Z+1&G)<<ee,A[P]=((H^G)-G)*b[(0<N)+0]}return 16}function Jo(c){var h=c.rb[c.sb-1];h.la=0,h.Na=0,i(c.zc,0,0,c.zc.length),c.ja=0}function qc(c,h){if(c==null)return 0;if(h==null)return Wt(c,2,"NULL VP8Io parameter in VP8Decode().");if(!c.cb&&!Ya(c,h))return 0;if(e(c.cb),h.ac==null||h.ac(h)){h.ob&&(c.L=0);var g=Sl[c.L];if(c.L==2?(c.yb=0,c.zb=0):(c.yb=h.v-g>>4,c.zb=h.j-g>>4,0>c.yb&&(c.yb=0),0>c.zb&&(c.zb=0)),c.Va=h.o+15+g>>4,c.Hb=h.va+15+g>>4,c.Hb>c.za&&(c.Hb=c.za),c.Va>c.Ub&&(c.Va=c.Ub),0<c.L){var b=c.ed;for(g=0;4>g;++g){var N;if(c.Qa.Cb){var A=c.Qa.Lb[g];c.Qa.Fb||(A+=b.Tb)}else A=b.Tb;for(N=0;1>=N;++N){var L=c.gd[g][N],M=A;if(b.Pc&&(M+=b.vd[0],N&&(M+=b.od[0])),0<(M=0>M?0:63<M?63:M)){var P=M;0<b.wb&&(P=4<b.wb?P>>2:P>>1)>9-b.wb&&(P=9-b.wb),1>P&&(P=1),L.dd=P,L.tc=2*M+P,L.ld=40<=M?2:15<=M?1:0}else L.tc=0;L.La=N}}}g=0}else Wt(c,6,"Frame setup failed"),g=c.a;if(g=g==0){if(g){c.$c=0,0<c.Aa||(c.Ic=J0);e:{g=c.Ic,b=4*(P=c.za);var T=32*P,H=P+1,Z=0<c.L?P*(0<c.Aa?2:1):0,ee=(c.Aa==2?2:1)*P;if((L=b+832+(N=3*(16*g+Sl[c.L])/2*T)+(A=c.Fa!=null&&0<c.Fa.length?c.Kc.c*c.Kc.i:0))!=L)g=0;else{if(L>c.Vb){if(c.Vb=0,c.Ec=s(L),c.Fc=0,c.Ec==null){g=Wt(c,1,"no memory during frame initialization.");break e}c.Vb=L}L=c.Ec,M=c.Fc,c.Ac=L,c.Bc=M,M+=b,c.Gd=o(T,Ga),c.Hd=0,c.rb=o(H+1,Ja),c.sb=1,c.wa=Z?o(Z,Hs):null,c.Y=0,c.D.Nb=0,c.D.wa=c.wa,c.D.Y=c.Y,0<c.Aa&&(c.D.Y+=P),e(!0),c.oc=L,c.pc=M,M+=832,c.ya=o(ee,$o),c.aa=0,c.D.ya=c.ya,c.D.aa=c.aa,c.Aa==2&&(c.D.aa+=P),c.R=16*P,c.B=8*P,P=(T=Sl[c.L])*c.R,T=T/2*c.B,c.sa=L,c.ta=M+P,c.qa=c.sa,c.ra=c.ta+16*g*c.R+T,c.Ha=c.qa,c.Ia=c.ra+8*g*c.B+T,c.$c=0,M+=N,c.mb=A?L:null,c.nb=A?M:null,e(M+A<=c.Fc+c.Vb),Jo(c),i(c.Ac,c.Bc,0,b),g=1}}if(g){if(h.ka=0,h.y=c.sa,h.O=c.ta,h.f=c.qa,h.N=c.ra,h.ea=c.Ha,h.Vd=c.Ia,h.fa=c.R,h.Rc=c.B,h.F=null,h.J=0,!hh){for(g=-255;255>=g;++g)lh[255+g]=0>g?-g:g;for(g=-1020;1020>=g;++g)ch[1020+g]=-128>g?-128:127<g?127:g;for(g=-112;112>=g;++g)uh[112+g]=-16>g?-16:15<g?15:g;for(g=-255;510>=g;++g)fh[255+g]=0>g?0:255<g?255:g;hh=1}kr=Hc,so=zc,Oi=Za,Ar=Vc,ui=el,da=Qa,ys=Zo,oo=ms,bs=nu,Ii=ea,pa=tu,rr=Ys,fi=ta,Tt=cl,Et=ll,$t=ai,nn=Li,hi=eu,Lr[0]=Vr,Lr[1]=Uc,Lr[2]=Gc,Lr[3]=Kc,Lr[4]=rl,Lr[5]=Gs,Lr[6]=il,Lr[7]=Yo,Lr[8]=Xc,Lr[9]=Yc,Ei[0]=tl,Ei[1]=$c,Ei[2]=oi,Ei[3]=$s,Ei[4]=vn,Ei[5]=Jc,Ei[6]=nl,di[0]=Ai,di[1]=Wc,di[2]=Qc,di[3]=Xo,di[4]=ps,di[5]=Zc,di[6]=Qo,g=1}else g=0}g&&(g=function(G,be){for(G.M=0;G.M<G.Va;++G.M){var ae,U=G.Jc[G.M&G.Xb],J=G.m,ge=G;for(ae=0;ae<ge.za;++ae){var ve=J,ye=ge,De=ye.Ac,Le=ye.Bc+4*ae,We=ye.zc,Ce=ye.ya[ye.aa+ae];if(ye.Qa.Bb?Ce.$b=se(ve,ye.Pa.jb[0])?2+se(ve,ye.Pa.jb[2]):se(ve,ye.Pa.jb[1]):Ce.$b=0,ye.kc&&(Ce.Ad=se(ve,ye.Bd)),Ce.Za=!se(ve,145)+0,Ce.Za){var vt=Ce.Ob,kt=0;for(ye=0;4>ye;++ye){var yt,dt=We[0+ye];for(yt=0;4>yt;++yt){dt=I0[De[Le+yt]][dt];for(var Pt=gh[se(ve,dt[0])];0<Pt;)Pt=gh[2*Pt+se(ve,dt[Pt])];dt=-Pt,De[Le+yt]=dt}r(vt,kt,De,Le,4),kt+=4,We[0+ye]=dt}}else dt=se(ve,156)?se(ve,128)?1:3:se(ve,163)?2:0,Ce.Ob[0]=dt,i(De,Le,dt,4),i(We,0,dt,4);Ce.Dd=se(ve,142)?se(ve,114)?se(ve,183)?1:3:2:0}if(ge.m.Ka)return Wt(G,7,"Premature end-of-partition0 encountered.");for(;G.ja<G.za;++G.ja){if(ge=U,ve=(J=G).rb[J.sb-1],De=J.rb[J.sb+J.ja],ae=J.ya[J.aa+J.ja],Le=J.kc?ae.Ad:0)ve.la=De.la=0,ae.Za||(ve.Na=De.Na=0),ae.Hc=0,ae.Gc=0,ae.ia=0;else{var _t,it;if(ve=De,De=ge,Le=J.Pa.Xc,We=J.ya[J.aa+J.ja],Ce=J.pb[We.$b],ye=We.ad,vt=0,kt=J.rb[J.sb-1],dt=yt=0,i(ye,vt,0,384),We.Za)var Qt=0,qn=Le[3];else{Pt=s(16);var Zt=ve.Na+kt.Na;if(Zt=ma(De,Le[1],Zt,Ce.Eb,0,Pt,0),ve.Na=kt.Na=(0<Zt)+0,1<Zt)kr(Pt,0,ye,vt);else{var zn=Pt[0]+3>>3;for(Pt=0;256>Pt;Pt+=16)ye[vt+Pt]=zn}Qt=1,qn=Le[0]}var At=15&ve.la,Xn=15&kt.la;for(Pt=0;4>Pt;++Pt){var Qn=1&Xn;for(zn=it=0;4>zn;++zn)At=At>>1|(Qn=(Zt=ma(De,qn,Zt=Qn+(1&At),Ce.Sc,Qt,ye,vt))>Qt)<<7,it=it<<2|(3<Zt?3:1<Zt?2:ye[vt+0]!=0),vt+=16;At>>=4,Xn=Xn>>1|Qn<<7,yt=(yt<<8|it)>>>0}for(qn=At,Qt=Xn>>4,_t=0;4>_t;_t+=2){for(it=0,At=ve.la>>4+_t,Xn=kt.la>>4+_t,Pt=0;2>Pt;++Pt){for(Qn=1&Xn,zn=0;2>zn;++zn)Zt=Qn+(1&At),At=At>>1|(Qn=0<(Zt=ma(De,Le[2],Zt,Ce.Qc,0,ye,vt)))<<3,it=it<<2|(3<Zt?3:1<Zt?2:ye[vt+0]!=0),vt+=16;At>>=2,Xn=Xn>>1|Qn<<5}dt|=it<<4*_t,qn|=At<<4<<_t,Qt|=(240&Xn)<<_t}ve.la=qn,kt.la=Qt,We.Hc=yt,We.Gc=dt,We.ia=43690&dt?0:Ce.ia,Le=!(yt|dt)}if(0<J.L&&(J.wa[J.Y+J.ja]=J.gd[ae.$b][ae.Za],J.wa[J.Y+J.ja].La|=!Le),ge.Ka)return Wt(G,7,"Premature end-of-file encountered.")}if(Jo(G),J=be,ge=1,ae=(U=G).D,ve=0<U.L&&U.M>=U.zb&&U.M<=U.Va,U.Aa==0)e:{if(ae.M=U.M,ae.uc=ve,aa(U,ae),ge=1,ae=(it=U.D).Nb,ve=(dt=Sl[U.L])*U.R,De=dt/2*U.B,Pt=16*ae*U.R,zn=8*ae*U.B,Le=U.sa,We=U.ta-ve+Pt,Ce=U.qa,ye=U.ra-De+zn,vt=U.Ha,kt=U.Ia-De+zn,Xn=(At=it.M)==0,yt=At>=U.Va-1,U.Aa==2&&aa(U,it),it.uc)for(Qn=(Zt=U).D.M,e(Zt.D.uc),it=Zt.yb;it<Zt.Hb;++it){Qt=it,qn=Qn;var ln=(pn=(zt=Zt).D).Nb;_t=zt.R;var pn=pn.wa[pn.Y+Qt],_n=zt.sa,or=zt.ta+16*ln*_t+16*Qt,Ur=pn.dd,cn=pn.tc;if(cn!=0)if(e(3<=cn),zt.L==1)0<Qt&&$t(_n,or,_t,cn+4),pn.La&&hi(_n,or,_t,cn),0<qn&&Et(_n,or,_t,cn+4),pn.La&&nn(_n,or,_t,cn);else{var pi=zt.B,vs=zt.qa,lo=zt.ra+8*ln*pi+8*Qt,Fi=zt.Ha,zt=zt.Ia+8*ln*pi+8*Qt;ln=pn.ld,0<Qt&&(oo(_n,or,_t,cn+4,Ur,ln),Ii(vs,lo,Fi,zt,pi,cn+4,Ur,ln)),pn.La&&(rr(_n,or,_t,cn,Ur,ln),Tt(vs,lo,Fi,zt,pi,cn,Ur,ln)),0<qn&&(ys(_n,or,_t,cn+4,Ur,ln),bs(vs,lo,Fi,zt,pi,cn+4,Ur,ln)),pn.La&&(pa(_n,or,_t,cn,Ur,ln),fi(vs,lo,Fi,zt,pi,cn,Ur,ln))}}if(U.ia&&alert("todo:DitherRow"),J.put!=null){if(it=16*At,At=16*(At+1),Xn?(J.y=U.sa,J.O=U.ta+Pt,J.f=U.qa,J.N=U.ra+zn,J.ea=U.Ha,J.W=U.Ia+zn):(it-=dt,J.y=Le,J.O=We,J.f=Ce,J.N=ye,J.ea=vt,J.W=kt),yt||(At-=dt),At>J.o&&(At=J.o),J.F=null,J.J=null,U.Fa!=null&&0<U.Fa.length&&it<At&&(J.J=sa(U,J,it,At-it),J.F=U.mb,J.F==null&&J.F.length==0)){ge=Wt(U,3,"Could not decode alpha data.");break e}it<J.j&&(dt=J.j-it,it=J.j,e(!(1&dt)),J.O+=U.R*dt,J.N+=U.B*(dt>>1),J.W+=U.B*(dt>>1),J.F!=null&&(J.J+=J.width*dt)),it<At&&(J.O+=J.v,J.N+=J.v>>1,J.W+=J.v>>1,J.F!=null&&(J.J+=J.v),J.ka=it-J.j,J.U=J.va-J.v,J.T=At-it,ge=J.put(J))}ae+1!=U.Ic||yt||(r(U.sa,U.ta-ve,Le,We+16*U.R,ve),r(U.qa,U.ra-De,Ce,ye+8*U.B,De),r(U.Ha,U.Ia-De,vt,kt+8*U.B,De))}if(!ge)return Wt(G,6,"Output aborted.")}return 1}(c,h)),h.bc!=null&&h.bc(h),g&=1}return g?(c.cb=0,g):0}function vr(c,h,g,b,N){N=c[h+g+32*b]+(N>>3),c[h+g+32*b]=-256&N?0>N?0:255:N}function Ws(c,h,g,b,N,A){vr(c,h,0,g,b+N),vr(c,h,1,g,b+A),vr(c,h,2,g,b-A),vr(c,h,3,g,b-N)}function Rn(c){return(20091*c>>16)+c}function Go(c,h,g,b){var N,A=0,L=s(16);for(N=0;4>N;++N){var M=c[h+0]+c[h+8],P=c[h+0]-c[h+8],T=(35468*c[h+4]>>16)-Rn(c[h+12]),H=Rn(c[h+4])+(35468*c[h+12]>>16);L[A+0]=M+H,L[A+1]=P+T,L[A+2]=P-T,L[A+3]=M-H,A+=4,h++}for(N=A=0;4>N;++N)M=(c=L[A+0]+4)+L[A+8],P=c-L[A+8],T=(35468*L[A+4]>>16)-Rn(L[A+12]),vr(g,b,0,0,M+(H=Rn(L[A+4])+(35468*L[A+12]>>16))),vr(g,b,1,0,P+T),vr(g,b,2,0,P-T),vr(g,b,3,0,M-H),A++,b+=32}function Qa(c,h,g,b){var N=c[h+0]+4,A=35468*c[h+4]>>16,L=Rn(c[h+4]),M=35468*c[h+1]>>16;Ws(g,b,0,N+L,c=Rn(c[h+1]),M),Ws(g,b,1,N+A,c,M),Ws(g,b,2,N-A,c,M),Ws(g,b,3,N-L,c,M)}function zc(c,h,g,b,N){Go(c,h,g,b),N&&Go(c,h+16,g,b+4)}function Za(c,h,g,b){so(c,h+0,g,b,1),so(c,h+32,g,b+128,1)}function Vc(c,h,g,b){var N;for(c=c[h+0]+4,N=0;4>N;++N)for(h=0;4>h;++h)vr(g,b,h,N,c)}function el(c,h,g,b){c[h+0]&&Ar(c,h+0,g,b),c[h+16]&&Ar(c,h+16,g,b+4),c[h+32]&&Ar(c,h+32,g,b+128),c[h+48]&&Ar(c,h+48,g,b+128+4)}function Hc(c,h,g,b){var N,A=s(16);for(N=0;4>N;++N){var L=c[h+0+N]+c[h+12+N],M=c[h+4+N]+c[h+8+N],P=c[h+4+N]-c[h+8+N],T=c[h+0+N]-c[h+12+N];A[0+N]=L+M,A[8+N]=L-M,A[4+N]=T+P,A[12+N]=T-P}for(N=0;4>N;++N)L=(c=A[0+4*N]+3)+A[3+4*N],M=A[1+4*N]+A[2+4*N],P=A[1+4*N]-A[2+4*N],T=c-A[3+4*N],g[b+0]=L+M>>3,g[b+16]=T+P>>3,g[b+32]=L-M>>3,g[b+48]=T-P>>3,b+=64}function Ko(c,h,g){var b,N=h-32,A=Yn,L=255-c[N-1];for(b=0;b<g;++b){var M,P=A,T=L+c[h-1];for(M=0;M<g;++M)c[h+M]=P[T+c[N+M]];h+=32}}function Uc(c,h){Ko(c,h,4)}function Wc(c,h){Ko(c,h,8)}function $c(c,h){Ko(c,h,16)}function oi(c,h){var g;for(g=0;16>g;++g)r(c,h+32*g,c,h-32,16)}function $s(c,h){var g;for(g=16;0<g;--g)i(c,h,c[h-1],16),h+=32}function Js(c,h,g){var b;for(b=0;16>b;++b)i(h,g+32*b,c,16)}function tl(c,h){var g,b=16;for(g=0;16>g;++g)b+=c[h-1+32*g]+c[h+g-32];Js(b>>5,c,h)}function vn(c,h){var g,b=8;for(g=0;16>g;++g)b+=c[h-1+32*g];Js(b>>4,c,h)}function Jc(c,h){var g,b=8;for(g=0;16>g;++g)b+=c[h+g-32];Js(b>>4,c,h)}function nl(c,h){Js(128,c,h)}function Qe(c,h,g){return c+2*h+g+2>>2}function Gc(c,h){var g,b=h-32;for(b=new Uint8Array([Qe(c[b-1],c[b+0],c[b+1]),Qe(c[b+0],c[b+1],c[b+2]),Qe(c[b+1],c[b+2],c[b+3]),Qe(c[b+2],c[b+3],c[b+4])]),g=0;4>g;++g)r(c,h+32*g,b,0,b.length)}function Kc(c,h){var g=c[h-1],b=c[h-1+32],N=c[h-1+64],A=c[h-1+96];ke(c,h+0,16843009*Qe(c[h-1-32],g,b)),ke(c,h+32,16843009*Qe(g,b,N)),ke(c,h+64,16843009*Qe(b,N,A)),ke(c,h+96,16843009*Qe(N,A,A))}function Vr(c,h){var g,b=4;for(g=0;4>g;++g)b+=c[h+g-32]+c[h-1+32*g];for(b>>=3,g=0;4>g;++g)i(c,h+32*g,b,4)}function rl(c,h){var g=c[h-1+0],b=c[h-1+32],N=c[h-1+64],A=c[h-1-32],L=c[h+0-32],M=c[h+1-32],P=c[h+2-32],T=c[h+3-32];c[h+0+96]=Qe(b,N,c[h-1+96]),c[h+1+96]=c[h+0+64]=Qe(g,b,N),c[h+2+96]=c[h+1+64]=c[h+0+32]=Qe(A,g,b),c[h+3+96]=c[h+2+64]=c[h+1+32]=c[h+0+0]=Qe(L,A,g),c[h+3+64]=c[h+2+32]=c[h+1+0]=Qe(M,L,A),c[h+3+32]=c[h+2+0]=Qe(P,M,L),c[h+3+0]=Qe(T,P,M)}function il(c,h){var g=c[h+1-32],b=c[h+2-32],N=c[h+3-32],A=c[h+4-32],L=c[h+5-32],M=c[h+6-32],P=c[h+7-32];c[h+0+0]=Qe(c[h+0-32],g,b),c[h+1+0]=c[h+0+32]=Qe(g,b,N),c[h+2+0]=c[h+1+32]=c[h+0+64]=Qe(b,N,A),c[h+3+0]=c[h+2+32]=c[h+1+64]=c[h+0+96]=Qe(N,A,L),c[h+3+32]=c[h+2+64]=c[h+1+96]=Qe(A,L,M),c[h+3+64]=c[h+2+96]=Qe(L,M,P),c[h+3+96]=Qe(M,P,P)}function Gs(c,h){var g=c[h-1+0],b=c[h-1+32],N=c[h-1+64],A=c[h-1-32],L=c[h+0-32],M=c[h+1-32],P=c[h+2-32],T=c[h+3-32];c[h+0+0]=c[h+1+64]=A+L+1>>1,c[h+1+0]=c[h+2+64]=L+M+1>>1,c[h+2+0]=c[h+3+64]=M+P+1>>1,c[h+3+0]=P+T+1>>1,c[h+0+96]=Qe(N,b,g),c[h+0+64]=Qe(b,g,A),c[h+0+32]=c[h+1+96]=Qe(g,A,L),c[h+1+32]=c[h+2+96]=Qe(A,L,M),c[h+2+32]=c[h+3+96]=Qe(L,M,P),c[h+3+32]=Qe(M,P,T)}function Yo(c,h){var g=c[h+0-32],b=c[h+1-32],N=c[h+2-32],A=c[h+3-32],L=c[h+4-32],M=c[h+5-32],P=c[h+6-32],T=c[h+7-32];c[h+0+0]=g+b+1>>1,c[h+1+0]=c[h+0+64]=b+N+1>>1,c[h+2+0]=c[h+1+64]=N+A+1>>1,c[h+3+0]=c[h+2+64]=A+L+1>>1,c[h+0+32]=Qe(g,b,N),c[h+1+32]=c[h+0+96]=Qe(b,N,A),c[h+2+32]=c[h+1+96]=Qe(N,A,L),c[h+3+32]=c[h+2+96]=Qe(A,L,M),c[h+3+64]=Qe(L,M,P),c[h+3+96]=Qe(M,P,T)}function Yc(c,h){var g=c[h-1+0],b=c[h-1+32],N=c[h-1+64],A=c[h-1+96];c[h+0+0]=g+b+1>>1,c[h+2+0]=c[h+0+32]=b+N+1>>1,c[h+2+32]=c[h+0+64]=N+A+1>>1,c[h+1+0]=Qe(g,b,N),c[h+3+0]=c[h+1+32]=Qe(b,N,A),c[h+3+32]=c[h+1+64]=Qe(N,A,A),c[h+3+64]=c[h+2+64]=c[h+0+96]=c[h+1+96]=c[h+2+96]=c[h+3+96]=A}function Xc(c,h){var g=c[h-1+0],b=c[h-1+32],N=c[h-1+64],A=c[h-1+96],L=c[h-1-32],M=c[h+0-32],P=c[h+1-32],T=c[h+2-32];c[h+0+0]=c[h+2+32]=g+L+1>>1,c[h+0+32]=c[h+2+64]=b+g+1>>1,c[h+0+64]=c[h+2+96]=N+b+1>>1,c[h+0+96]=A+N+1>>1,c[h+3+0]=Qe(M,P,T),c[h+2+0]=Qe(L,M,P),c[h+1+0]=c[h+3+32]=Qe(g,L,M),c[h+1+32]=c[h+3+64]=Qe(b,g,L),c[h+1+64]=c[h+3+96]=Qe(N,b,g),c[h+1+96]=Qe(A,N,b)}function Qc(c,h){var g;for(g=0;8>g;++g)r(c,h+32*g,c,h-32,8)}function Xo(c,h){var g;for(g=0;8>g;++g)i(c,h,c[h-1],8),h+=32}function ds(c,h,g){var b;for(b=0;8>b;++b)i(h,g+32*b,c,8)}function Ai(c,h){var g,b=8;for(g=0;8>g;++g)b+=c[h+g-32]+c[h-1+32*g];ds(b>>4,c,h)}function Zc(c,h){var g,b=4;for(g=0;8>g;++g)b+=c[h+g-32];ds(b>>3,c,h)}function ps(c,h){var g,b=4;for(g=0;8>g;++g)b+=c[h-1+32*g];ds(b>>3,c,h)}function Qo(c,h){ds(128,c,h)}function Ks(c,h,g){var b=c[h-g],N=c[h+0],A=3*(N-b)+au[1020+c[h-2*g]-c[h+g]],L=pl[112+(A+4>>3)];c[h-g]=Yn[255+b+pl[112+(A+3>>3)]],c[h+0]=Yn[255+N-L]}function sl(c,h,g,b){var N=c[h+0],A=c[h+g];return ir[255+c[h-2*g]-c[h-g]]>b||ir[255+A-N]>b}function ol(c,h,g,b){return 4*ir[255+c[h-g]-c[h+0]]+ir[255+c[h-2*g]-c[h+g]]<=b}function al(c,h,g,b,N){var A=c[h-3*g],L=c[h-2*g],M=c[h-g],P=c[h+0],T=c[h+g],H=c[h+2*g],Z=c[h+3*g];return 4*ir[255+M-P]+ir[255+L-T]>b?0:ir[255+c[h-4*g]-A]<=N&&ir[255+A-L]<=N&&ir[255+L-M]<=N&&ir[255+Z-H]<=N&&ir[255+H-T]<=N&&ir[255+T-P]<=N}function ll(c,h,g,b){var N=2*b+1;for(b=0;16>b;++b)ol(c,h+b,g,N)&&Ks(c,h+b,g)}function ai(c,h,g,b){var N=2*b+1;for(b=0;16>b;++b)ol(c,h+b*g,1,N)&&Ks(c,h+b*g,1)}function Li(c,h,g,b){var N;for(N=3;0<N;--N)ll(c,h+=4*g,g,b)}function eu(c,h,g,b){var N;for(N=3;0<N;--N)ai(c,h+=4,g,b)}function Ci(c,h,g,b,N,A,L,M){for(A=2*A+1;0<N--;){if(al(c,h,g,A,L))if(sl(c,h,g,M))Ks(c,h,g);else{var P=c,T=h,H=g,Z=P[T-2*H],ee=P[T-H],G=P[T+0],be=P[T+H],ae=P[T+2*H],U=27*(ge=au[1020+3*(G-ee)+au[1020+Z-be]])+63>>7,J=18*ge+63>>7,ge=9*ge+63>>7;P[T-3*H]=Yn[255+P[T-3*H]+ge],P[T-2*H]=Yn[255+Z+J],P[T-H]=Yn[255+ee+U],P[T+0]=Yn[255+G-U],P[T+H]=Yn[255+be-J],P[T+2*H]=Yn[255+ae-ge]}h+=b}}function wr(c,h,g,b,N,A,L,M){for(A=2*A+1;0<N--;){if(al(c,h,g,A,L))if(sl(c,h,g,M))Ks(c,h,g);else{var P=c,T=h,H=g,Z=P[T-H],ee=P[T+0],G=P[T+H],be=pl[112+((ae=3*(ee-Z))+4>>3)],ae=pl[112+(ae+3>>3)],U=be+1>>1;P[T-2*H]=Yn[255+P[T-2*H]+U],P[T-H]=Yn[255+Z+ae],P[T+0]=Yn[255+ee-be],P[T+H]=Yn[255+G-U]}h+=b}}function Zo(c,h,g,b,N,A){Ci(c,h,g,1,16,b,N,A)}function ms(c,h,g,b,N,A){Ci(c,h,1,g,16,b,N,A)}function tu(c,h,g,b,N,A){var L;for(L=3;0<L;--L)wr(c,h+=4*g,g,1,16,b,N,A)}function Ys(c,h,g,b,N,A){var L;for(L=3;0<L;--L)wr(c,h+=4,1,g,16,b,N,A)}function nu(c,h,g,b,N,A,L,M){Ci(c,h,N,1,8,A,L,M),Ci(g,b,N,1,8,A,L,M)}function ea(c,h,g,b,N,A,L,M){Ci(c,h,1,N,8,A,L,M),Ci(g,b,1,N,8,A,L,M)}function ta(c,h,g,b,N,A,L,M){wr(c,h+4*N,N,1,8,A,L,M),wr(g,b+4*N,N,1,8,A,L,M)}function cl(c,h,g,b,N,A,L,M){wr(c,h+4,1,N,8,A,L,M),wr(g,b+4,1,N,8,A,L,M)}function Xs(){this.ba=new pr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new jt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function na(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ra(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ul(){this.ua=0,this.Wa=new z,this.vb=new z,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new R,this.yc=new O}function ru(){this.xb=this.a=0,this.l=new Us,this.ca=new pr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new C,this.Pb=0,this.wd=new C,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ul,this.ab=0,this.gc=o(4,ra),this.Oc=0}function Qs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Us,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function gs(c,h,g,b,N,A,L){for(c=c==null?0:c[h+0],h=0;h<L;++h)N[A+h]=c+g[b+h]&255,c=N[A+h]}function ia(c,h,g,b,N,A,L){var M;if(c==null)gs(null,null,g,b,N,A,L);else for(M=0;M<L;++M)N[A+M]=c[h+M]+g[b+M]&255}function _i(c,h,g,b,N,A,L){if(c==null)gs(null,null,g,b,N,A,L);else{var M,P=c[h+0],T=P,H=P;for(M=0;M<L;++M)T=H+(P=c[h+M])-T,H=g[b+M]+(-256&T?0>T?0:255:T)&255,T=P,N[A+M]=H}}function sa(c,h,g,b){var N=h.width,A=h.o;if(e(c!=null&&h!=null),0>g||0>=b||g+b>A)return null;if(!c.Cc){if(c.ga==null){var L;if(c.ga=new Qs,(L=c.ga==null)||(L=h.width*h.o,e(c.Gb.length==0),c.Gb=s(L),c.Uc=0,c.Gb==null?L=0:(c.mb=c.Gb,c.nb=c.Uc,c.rc=null,L=1),L=!L),!L){L=c.ga;var M=c.Fa,P=c.P,T=c.qc,H=c.mb,Z=c.nb,ee=P+1,G=T-1,be=L.l;if(e(M!=null&&H!=null&&h!=null),Di[0]=null,Di[1]=gs,Di[2]=ia,Di[3]=_i,L.ca=H,L.tb=Z,L.c=h.width,L.i=h.height,e(0<L.c&&0<L.i),1>=T)h=0;else if(L.$a=M[P+0]>>0&3,L.Z=M[P+0]>>2&3,L.Lc=M[P+0]>>4&3,P=M[P+0]>>6&3,0>L.$a||1<L.$a||4<=L.Z||1<L.Lc||P)h=0;else if(be.put=Rr,be.ac=dn,be.bc=Br,be.ma=L,be.width=h.width,be.height=h.height,be.Da=h.Da,be.v=h.v,be.va=h.va,be.j=h.j,be.o=h.o,L.$a)e:{e(L.$a==1),h=tr();t:for(;;){if(h==null){h=0;break e}if(e(L!=null),L.mc=h,h.c=L.c,h.i=L.i,h.l=L.l,h.l.ma=L,h.l.width=L.c,h.l.height=L.i,h.a=0,te(h.m,M,ee,G),!zr(L.c,L.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&si(h.s)?(L.ic=1,M=h.c*h.i,h.Ta=null,h.Ua=0,h.V=s(M),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(L.ic=0,h=hs(h,L.c)),!h))break t;h=1;break e}L.mc=null,h=0}else h=G>=L.c*L.i;L=!h}if(L)return null;c.ga.Lc!=1?c.Ga=0:b=A-g}e(c.ga!=null),e(g+b<=A);e:{if(h=(M=c.ga).c,A=M.l.o,M.$a==0){if(ee=c.rc,G=c.Vc,be=c.Fa,P=c.P+1+g*h,T=c.mb,H=c.nb+g*h,e(P<=c.P+c.qc),M.Z!=0)for(e(Di[M.Z]!=null),L=0;L<b;++L)Di[M.Z](ee,G,be,P,T,H,h),ee=T,G=H,H+=h,P+=h;else for(L=0;L<b;++L)r(T,H,be,P,h),ee=T,G=H,H+=h,P+=h;c.rc=ee,c.Vc=G}else{if(e(M.mc!=null),h=g+b,e((L=M.mc)!=null),e(h<=L.i),L.C>=h)h=1;else if(M.ic||X(),M.ic){M=L.V,ee=L.Ba,G=L.c;var ae=L.i,U=(be=1,P=L.$/G,T=L.$%G,H=L.m,Z=L.s,L.$),J=G*ae,ge=G*h,ve=Z.wc,ye=U<ge?Yt(Z,T,P):null;e(U<=J),e(h<=ae),e(si(Z));t:for(;;){for(;!H.h&&U<ge;){if(T&ve||(ye=Yt(Z,T,P)),e(ye!=null),K(H),256>(ae=Fn(ye.G[0],ye.H[0],H)))M[ee+U]=ae,++U,++T>=G&&(T=0,++P<=h&&!(P%16)&&yr(L,P));else{if(!(280>ae)){be=0;break t}ae=mr(ae-256,H);var De,Le=Fn(ye.G[4],ye.H[4],H);if(K(H),!(U>=(Le=jr(G,Le=mr(Le,H)))&&J-U>=ae)){be=0;break t}for(De=0;De<ae;++De)M[ee+U+De]=M[ee+U+De-Le];for(U+=ae,T+=ae;T>=G;)T-=G,++P<=h&&!(P%16)&&yr(L,P);U<ge&&T&ve&&(ye=Yt(Z,T,P))}e(H.h==q(H))}yr(L,P>h?h:P);break t}!be||H.h&&U<J?(be=0,L.a=H.h?5:3):L.$=U,h=be}else h=br(L,L.V,L.Ba,L.c,L.i,h,js);if(!h){b=0;break e}}g+b>=A&&(c.Cc=1),b=1}if(!b)return null;if(c.Cc&&((b=c.ga)!=null&&(b.mc=null),c.ga=null,0<c.Ga))return alert("todo:WebPDequantizeLevels"),null}return c.nb+g*N}function p(c,h,g,b,N,A){for(;0<N--;){var L,M=c,P=h+(g?1:0),T=c,H=h+(g?0:3);for(L=0;L<b;++L){var Z=T[H+4*L];Z!=255&&(Z*=32897,M[P+4*L+0]=M[P+4*L+0]*Z>>23,M[P+4*L+1]=M[P+4*L+1]*Z>>23,M[P+4*L+2]=M[P+4*L+2]*Z>>23)}h+=A}}function k(c,h,g,b,N){for(;0<b--;){var A;for(A=0;A<g;++A){var L=c[h+2*A+0],M=15&(T=c[h+2*A+1]),P=4369*M,T=(240&T|T>>4)*P>>16;c[h+2*A+0]=(240&L|L>>4)*P>>16&240|(15&L|L<<4)*P>>16>>4&15,c[h+2*A+1]=240&T|M}h+=N}}function D(c,h,g,b,N,A,L,M){var P,T,H=255;for(T=0;T<N;++T){for(P=0;P<b;++P){var Z=c[h+P];A[L+4*P]=Z,H&=Z}h+=g,L+=M}return H!=255}function V(c,h,g,b,N){var A;for(A=0;A<N;++A)g[b+A]=c[h+A]>>8}function X(){Ti=p,ao=k,dl=D,ah=V}function ce(c,h,g){E[c]=function(b,N,A,L,M,P,T,H,Z,ee,G,be,ae,U,J,ge,ve){var ye,De=ve-1>>1,Le=M[P+0]|T[H+0]<<16,We=Z[ee+0]|G[be+0]<<16;e(b!=null);var Ce=3*Le+We+131074>>2;for(h(b[N+0],255&Ce,Ce>>16,ae,U),A!=null&&(Ce=3*We+Le+131074>>2,h(A[L+0],255&Ce,Ce>>16,J,ge)),ye=1;ye<=De;++ye){var vt=M[P+ye]|T[H+ye]<<16,kt=Z[ee+ye]|G[be+ye]<<16,yt=Le+vt+We+kt+524296,dt=yt+2*(vt+We)>>3;Ce=dt+Le>>1,Le=(yt=yt+2*(Le+kt)>>3)+vt>>1,h(b[N+2*ye-1],255&Ce,Ce>>16,ae,U+(2*ye-1)*g),h(b[N+2*ye-0],255&Le,Le>>16,ae,U+(2*ye-0)*g),A!=null&&(Ce=yt+We>>1,Le=dt+kt>>1,h(A[L+2*ye-1],255&Ce,Ce>>16,J,ge+(2*ye-1)*g),h(A[L+2*ye+0],255&Le,Le>>16,J,ge+(2*ye+0)*g)),Le=vt,We=kt}1&ve||(Ce=3*Le+We+131074>>2,h(b[N+ve-1],255&Ce,Ce>>16,ae,U+(ve-1)*g),A!=null&&(Ce=3*We+Le+131074>>2,h(A[L+ve-1],255&Ce,Ce>>16,J,ge+(ve-1)*g)))}}function we(){sr[ml]=F0,sr[gl]=bh,sr[dh]=R0,sr[yl]=vh,sr[bl]=wh,sr[lu]=xh,sr[ph]=B0,sr[cu]=bh,sr[uu]=vh,sr[vl]=wh,sr[fu]=xh}function Ee(c){return c&~j0?0>c?0:255:c>>Sh}function Ue(c,h){return Ee((19077*c>>8)+(26149*h>>8)-14234)}function rt(c,h,g){return Ee((19077*c>>8)-(6419*h>>8)-(13320*g>>8)+8708)}function ot(c,h){return Ee((19077*c>>8)+(33050*h>>8)-17685)}function mt(c,h,g,b,N){b[N+0]=Ue(c,g),b[N+1]=rt(c,h,g),b[N+2]=ot(c,h)}function Rt(c,h,g,b,N){b[N+0]=ot(c,h),b[N+1]=rt(c,h,g),b[N+2]=Ue(c,g)}function qt(c,h,g,b,N){var A=rt(c,h,g);h=A<<3&224|ot(c,h)>>3,b[N+0]=248&Ue(c,g)|A>>5,b[N+1]=h}function Xt(c,h,g,b,N){var A=240&ot(c,h)|15;b[N+0]=240&Ue(c,g)|rt(c,h,g)>>4,b[N+1]=A}function wn(c,h,g,b,N){b[N+0]=255,mt(c,h,g,b,N+1)}function an(c,h,g,b,N){Rt(c,h,g,b,N),b[N+3]=255}function xr(c,h,g,b,N){mt(c,h,g,b,N),b[N+3]=255}function Kn(c,h){return 0>c?0:c>h?h:c}function li(c,h,g){E[c]=function(b,N,A,L,M,P,T,H,Z){for(var ee=H+(-2&Z)*g;H!=ee;)h(b[N+0],A[L+0],M[P+0],T,H),h(b[N+1],A[L+0],M[P+0],T,H+g),N+=2,++L,++P,H+=2*g;1&Z&&h(b[N+0],A[L+0],M[P+0],T,H)}}function fl(c,h,g){return g==0?c==0?h==0?6:5:h==0?4:0:g}function oa(c,h,g,b,N){switch(c>>>30){case 3:so(h,g,b,N,0);break;case 2:da(h,g,b,N);break;case 1:Ar(h,g,b,N)}}function aa(c,h){var g,b,N=h.M,A=h.Nb,L=c.oc,M=c.pc+40,P=c.oc,T=c.pc+584,H=c.oc,Z=c.pc+600;for(g=0;16>g;++g)L[M+32*g-1]=129;for(g=0;8>g;++g)P[T+32*g-1]=129,H[Z+32*g-1]=129;for(0<N?L[M-1-32]=P[T-1-32]=H[Z-1-32]=129:(i(L,M-32-1,127,21),i(P,T-32-1,127,9),i(H,Z-32-1,127,9)),b=0;b<c.za;++b){var ee=h.ya[h.aa+b];if(0<b){for(g=-1;16>g;++g)r(L,M+32*g-4,L,M+32*g+12,4);for(g=-1;8>g;++g)r(P,T+32*g-4,P,T+32*g+4,4),r(H,Z+32*g-4,H,Z+32*g+4,4)}var G=c.Gd,be=c.Hd+b,ae=ee.ad,U=ee.Hc;if(0<N&&(r(L,M-32,G[be].y,0,16),r(P,T-32,G[be].f,0,8),r(H,Z-32,G[be].ea,0,8)),ee.Za){var J=L,ge=M-32+16;for(0<N&&(b>=c.za-1?i(J,ge,G[be].y[15],4):r(J,ge,G[be+1].y,0,4)),g=0;4>g;g++)J[ge+128+g]=J[ge+256+g]=J[ge+384+g]=J[ge+0+g];for(g=0;16>g;++g,U<<=2)J=L,ge=M+kh[g],Lr[ee.Ob[g]](J,ge),oa(U,ae,16*+g,J,ge)}else if(J=fl(b,N,ee.Ob[0]),Ei[J](L,M),U!=0)for(g=0;16>g;++g,U<<=2)oa(U,ae,16*+g,L,M+kh[g]);for(g=ee.Gc,J=fl(b,N,ee.Dd),di[J](P,T),di[J](H,Z),U=ae,J=P,ge=T,255&(ee=g>>0)&&(170&ee?Oi(U,256,J,ge):ui(U,256,J,ge)),ee=H,U=Z,255&(g>>=8)&&(170&g?Oi(ae,320,ee,U):ui(ae,320,ee,U)),N<c.Ub-1&&(r(G[be].y,0,L,M+480,16),r(G[be].f,0,P,T+224,8),r(G[be].ea,0,H,Z+224,8)),g=8*A*c.B,G=c.sa,be=c.ta+16*b+16*A*c.R,ae=c.qa,ee=c.ra+8*b+g,U=c.Ha,J=c.Ia+8*b+g,g=0;16>g;++g)r(G,be+g*c.R,L,M+32*g,16);for(g=0;8>g;++g)r(ae,ee+g*c.B,P,T+32*g,8),r(U,J+g*c.B,H,Z+32*g,8)}}function Zs(c,h,g,b,N,A,L,M,P){var T=[0],H=[0],Z=0,ee=P!=null?P.kd:0,G=P!=null?P:new na;if(c==null||12>g)return 7;G.data=c,G.w=h,G.ha=g,h=[h],g=[g],G.gb=[G.gb];e:{var be=h,ae=g,U=G.gb;if(e(c!=null),e(ae!=null),e(U!=null),U[0]=0,12<=ae[0]&&!t(c,be[0],"RIFF")){if(t(c,be[0]+8,"WEBP")){U=3;break e}var J=Fe(c,be[0]+4);if(12>J||4294967286<J){U=3;break e}if(ee&&J>ae[0]-8){U=7;break e}U[0]=J,be[0]+=12,ae[0]-=12}U=0}if(U!=0)return U;for(J=0<G.gb[0],g=g[0];;){e:{var ge=c;ae=h,U=g;var ve=T,ye=H,De=be=[0];if((Ce=Z=[Z])[0]=0,8>U[0])U=7;else{if(!t(ge,ae[0],"VP8X")){if(Fe(ge,ae[0]+4)!=10){U=3;break e}if(18>U[0]){U=7;break e}var Le=Fe(ge,ae[0]+8),We=1+Te(ge,ae[0]+12);if(2147483648<=We*(ge=1+Te(ge,ae[0]+15))){U=3;break e}De!=null&&(De[0]=Le),ve!=null&&(ve[0]=We),ye!=null&&(ye[0]=ge),ae[0]+=18,U[0]-=18,Ce[0]=1}U=0}}if(Z=Z[0],be=be[0],U!=0)return U;if(ae=!!(2&be),!J&&Z)return 3;if(A!=null&&(A[0]=!!(16&be)),L!=null&&(L[0]=ae),M!=null&&(M[0]=0),L=T[0],be=H[0],Z&&ae&&P==null){U=0;break}if(4>g){U=7;break}if(J&&Z||!J&&!Z&&!t(c,h[0],"ALPH")){g=[g],G.na=[G.na],G.P=[G.P],G.Sa=[G.Sa];e:{Le=c,U=h,J=g;var Ce=G.gb;ve=G.na,ye=G.P,De=G.Sa,We=22,e(Le!=null),e(J!=null),ge=U[0];var vt=J[0];for(e(ve!=null),e(De!=null),ve[0]=null,ye[0]=null,De[0]=0;;){if(U[0]=ge,J[0]=vt,8>vt){U=7;break e}var kt=Fe(Le,ge+4);if(4294967286<kt){U=3;break e}var yt=8+kt+1&-2;if(We+=yt,0<Ce&&We>Ce){U=3;break e}if(!t(Le,ge,"VP8 ")||!t(Le,ge,"VP8L")){U=0;break e}if(vt[0]<yt){U=7;break e}t(Le,ge,"ALPH")||(ve[0]=Le,ye[0]=ge+8,De[0]=kt),ge+=yt,vt-=yt}}if(g=g[0],G.na=G.na[0],G.P=G.P[0],G.Sa=G.Sa[0],U!=0)break}g=[g],G.Ja=[G.Ja],G.xa=[G.xa];e:if(Ce=c,U=h,J=g,ve=G.gb[0],ye=G.Ja,De=G.xa,Le=U[0],ge=!t(Ce,Le,"VP8 "),We=!t(Ce,Le,"VP8L"),e(Ce!=null),e(J!=null),e(ye!=null),e(De!=null),8>J[0])U=7;else{if(ge||We){if(Ce=Fe(Ce,Le+4),12<=ve&&Ce>ve-12){U=3;break e}if(ee&&Ce>J[0]-8){U=7;break e}ye[0]=Ce,U[0]+=8,J[0]-=8,De[0]=We}else De[0]=5<=J[0]&&Ce[Le+0]==47&&!(Ce[Le+4]>>5),ye[0]=J[0];U=0}if(g=g[0],G.Ja=G.Ja[0],G.xa=G.xa[0],h=h[0],U!=0)break;if(4294967286<G.Ja)return 3;if(M==null||ae||(M[0]=G.xa?2:1),L=[L],be=[be],G.xa){if(5>g){U=7;break}M=L,ee=be,ae=A,c==null||5>g?c=0:5<=g&&c[h+0]==47&&!(c[h+4]>>5)?(J=[0],Ce=[0],ve=[0],te(ye=new C,c,h,g),$e(ye,J,Ce,ve)?(M!=null&&(M[0]=J[0]),ee!=null&&(ee[0]=Ce[0]),ae!=null&&(ae[0]=ve[0]),c=1):c=0):c=0}else{if(10>g){U=7;break}M=be,c==null||10>g||!Ka(c,h+3,g-3)?c=0:(ee=c[h+0]|c[h+1]<<8|c[h+2]<<16,ae=16383&(c[h+7]<<8|c[h+6]),c=16383&(c[h+9]<<8|c[h+8]),1&ee||3<(ee>>1&7)||!(ee>>4&1)||ee>>5>=G.Ja||!ae||!c?c=0:(L&&(L[0]=ae),M&&(M[0]=c),c=1))}if(!c||(L=L[0],be=be[0],Z&&(T[0]!=L||H[0]!=be)))return 3;P!=null&&(P[0]=G,P.offset=h-P.w,e(4294967286>h-P.w),e(P.offset==P.ha-g));break}return U==0||U==7&&Z&&P==null?(A!=null&&(A[0]|=G.na!=null&&0<G.na.length),b!=null&&(b[0]=L),N!=null&&(N[0]=be),0):U}function la(c,h,g){var b=h.width,N=h.height,A=0,L=0,M=b,P=N;if(h.Da=c!=null&&0<c.Da,h.Da&&(M=c.cd,P=c.bd,A=c.v,L=c.j,11>g||(A&=-2,L&=-2),0>A||0>L||0>=M||0>=P||A+M>b||L+P>N))return 0;if(h.v=A,h.j=L,h.va=A+M,h.o=L+P,h.U=M,h.T=P,h.da=c!=null&&0<c.da,h.da){if(!nt(M,P,g=[c.ib],A=[c.hb]))return 0;h.ib=g[0],h.hb=A[0]}return h.ob=c!=null&&c.ob,h.Kb=c==null||!c.Sd,h.da&&(h.ob=h.ib<3*b/4&&h.hb<3*N/4,h.Kb=0),1}function ca(c){if(c==null)return 2;if(11>c.S){var h=c.f.RGBA;h.fb+=(c.height-1)*h.A,h.A=-h.A}else h=c.f.kb,c=c.height,h.O+=(c-1)*h.fa,h.fa=-h.fa,h.N+=(c-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(c-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(c-1)*h.lb,h.lb=-h.lb);return 0}function eo(c,h,g,b){if(b==null||0>=c||0>=h)return 2;if(g!=null){if(g.Da){var N=g.cd,A=g.bd,L=-2&g.v,M=-2&g.j;if(0>L||0>M||0>=N||0>=A||L+N>c||M+A>h)return 2;c=N,h=A}if(g.da){if(!nt(c,h,N=[g.ib],A=[g.hb]))return 2;c=N[0],h=A[0]}}b.width=c,b.height=h;e:{var P=b.width,T=b.height;if(c=b.S,0>=P||0>=T||!(c>=ml&&13>c))c=2;else{if(0>=b.Rd&&b.sd==null){L=A=N=h=0;var H=(M=P*Ah[c])*T;if(11>c||(A=(T+1)/2*(h=(P+1)/2),c==12&&(L=(N=P)*T)),(T=s(H+2*A+L))==null){c=1;break e}b.sd=T,11>c?((P=b.f.RGBA).eb=T,P.fb=0,P.A=M,P.size=H):((P=b.f.kb).y=T,P.O=0,P.fa=M,P.Fd=H,P.f=T,P.N=0+H,P.Ab=h,P.Cd=A,P.ea=T,P.W=0+H+A,P.Db=h,P.Ed=A,c==12&&(P.F=T,P.J=0+H+2*A),P.Tc=L,P.lb=N)}if(h=1,N=b.S,A=b.width,L=b.height,N>=ml&&13>N)if(11>N)c=b.f.RGBA,h&=(M=Math.abs(c.A))*(L-1)+A<=c.size,h&=M>=A*Ah[N],h&=c.eb!=null;else{c=b.f.kb,M=(A+1)/2,H=(L+1)/2,P=Math.abs(c.fa),T=Math.abs(c.Ab);var Z=Math.abs(c.Db),ee=Math.abs(c.lb),G=ee*(L-1)+A;h&=P*(L-1)+A<=c.Fd,h&=T*(H-1)+M<=c.Cd,h=(h&=Z*(H-1)+M<=c.Ed)&P>=A&T>=M&Z>=M,h&=c.y!=null,h&=c.f!=null,h&=c.ea!=null,N==12&&(h&=ee>=A,h&=G<=c.Tc,h&=c.F!=null)}else h=0;c=h?0:2}}return c!=0||g!=null&&g.fd&&(c=ca(b)),c}var Bn=64,to=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],no=24,ro=32,ua=8,jn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ae("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(c){return c},E.Predictor2=function(c,h,g){return h[g+0]},E.Predictor3=function(c,h,g){return h[g+1]},E.Predictor4=function(c,h,g){return h[g-1]},E.Predictor5=function(c,h,g){return _e(_e(c,h[g+1]),h[g+0])},E.Predictor6=function(c,h,g){return _e(c,h[g-1])},E.Predictor7=function(c,h,g){return _e(c,h[g+0])},E.Predictor8=function(c,h,g){return _e(h[g-1],h[g+0])},E.Predictor9=function(c,h,g){return _e(h[g+0],h[g+1])},E.Predictor10=function(c,h,g){return _e(_e(c,h[g-1]),_e(h[g+0],h[g+1]))},E.Predictor11=function(c,h,g){var b=h[g+0];return 0>=st(b>>24&255,c>>24&255,(h=h[g-1])>>24&255)+st(b>>16&255,c>>16&255,h>>16&255)+st(b>>8&255,c>>8&255,h>>8&255)+st(255&b,255&c,255&h)?b:c},E.Predictor12=function(c,h,g){var b=h[g+0];return(Ve((c>>24&255)+(b>>24&255)-((h=h[g-1])>>24&255))<<24|Ve((c>>16&255)+(b>>16&255)-(h>>16&255))<<16|Ve((c>>8&255)+(b>>8&255)-(h>>8&255))<<8|Ve((255&c)+(255&b)-(255&h)))>>>0},E.Predictor13=function(c,h,g){var b=h[g-1];return(Ze((c=_e(c,h[g+0]))>>24&255,b>>24&255)<<24|Ze(c>>16&255,b>>16&255)<<16|Ze(c>>8&255,b>>8&255)<<8|Ze(c>>0&255,b>>0&255))>>>0};var iu=E.PredictorAdd0;E.PredictorAdd1=ut,Ae("Predictor2","PredictorAdd2"),Ae("Predictor3","PredictorAdd3"),Ae("Predictor4","PredictorAdd4"),Ae("Predictor5","PredictorAdd5"),Ae("Predictor6","PredictorAdd6"),Ae("Predictor7","PredictorAdd7"),Ae("Predictor8","PredictorAdd8"),Ae("Predictor9","PredictorAdd9"),Ae("Predictor10","PredictorAdd10"),Ae("Predictor11","PredictorAdd11"),Ae("Predictor12","PredictorAdd12"),Ae("Predictor13","PredictorAdd13");var fa=E.PredictorAdd2;ft("ColorIndexInverseTransform","MapARGB","32b",function(c){return c>>8&255},function(c){return c}),ft("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(c){return c},function(c){return c>>8&255});var hl,Sr=E.ColorIndexInverseTransform,ha=E.MapARGB,su=E.VP8LColorIndexInverseTransformAlpha,ou=E.MapAlpha,Mi=E.VP8LPredictorsAdd=[];Mi.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var nr,Nr,Pi,Hr,ci,io,kr,so,da,Oi,Ar,ui,ys,oo,bs,Ii,pa,rr,fi,Tt,Et,$t,nn,hi,Ti,ao,dl,ah,lh=s(511),ch=s(2041),uh=s(225),fh=s(767),hh=0,au=ch,pl=uh,Yn=fh,ir=lh,ml=0,gl=1,dh=2,yl=3,bl=4,lu=5,ph=6,cu=7,uu=8,vl=9,fu=10,S0=[2,3,7],N0=[3,3,11],mh=[280,256,256,256,40],k0=[0,1,1,1,0],A0=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],L0=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],C0=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],_0=8,hu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],du=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ma=null,M0=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],P0=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],gh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],O0=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],I0=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],T0=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],E0=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ei=[],Lr=[],di=[],D0=1,yh=2,Di=[],sr=[];ce("UpsampleRgbLinePair",mt,3),ce("UpsampleBgrLinePair",Rt,3),ce("UpsampleRgbaLinePair",xr,4),ce("UpsampleBgraLinePair",an,4),ce("UpsampleArgbLinePair",wn,4),ce("UpsampleRgba4444LinePair",Xt,2),ce("UpsampleRgb565LinePair",qt,2);var F0=E.UpsampleRgbLinePair,R0=E.UpsampleBgrLinePair,bh=E.UpsampleRgbaLinePair,vh=E.UpsampleBgraLinePair,wh=E.UpsampleArgbLinePair,xh=E.UpsampleRgba4444LinePair,B0=E.UpsampleRgb565LinePair,wl=16,xl=1<<wl-1,ga=-227,pu=482,Sh=6,j0=(256<<Sh)-1,Nh=0,q0=s(256),z0=s(256),V0=s(256),H0=s(256),U0=s(pu-ga),W0=s(pu-ga);li("YuvToRgbRow",mt,3),li("YuvToBgrRow",Rt,3),li("YuvToRgbaRow",xr,4),li("YuvToBgraRow",an,4),li("YuvToArgbRow",wn,4),li("YuvToRgba4444Row",Xt,2),li("YuvToRgb565Row",qt,2);var kh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Sl=[0,2,8],$0=[8,7,6,4,4,2,2,2,1,1,1,1],J0=1;this.WebPDecodeRGBA=function(c,h,g,b,N){var A=gl,L=new Xs,M=new pr;L.ba=M,M.S=A,M.width=[M.width],M.height=[M.height];var P=M.width,T=M.height,H=new ii;if(H==null||c==null)var Z=2;else e(H!=null),Z=Zs(c,h,g,H.width,H.height,H.Pd,H.Qd,H.format,null);if(Z!=0?P=0:(P!=null&&(P[0]=H.width[0]),T!=null&&(T[0]=H.height[0]),P=1),P){M.width=M.width[0],M.height=M.height[0],b!=null&&(b[0]=M.width),N!=null&&(N[0]=M.height);e:{if(b=new Us,(N=new na).data=c,N.w=h,N.ha=g,N.kd=1,h=[0],e(N!=null),((c=Zs(N.data,N.w,N.ha,null,null,null,h,null,N))==0||c==7)&&h[0]&&(c=4),(h=c)==0){if(e(L!=null),b.data=N.data,b.w=N.w+N.offset,b.ha=N.ha-N.offset,b.put=Rr,b.ac=dn,b.bc=Br,b.ma=L,N.xa){if((c=tr())==null){L=1;break e}if(function(ee,G){var be=[0],ae=[0],U=[0];t:for(;;){if(ee==null)return 0;if(G==null)return ee.a=2,0;if(ee.l=G,ee.a=0,te(ee.m,G.data,G.w,G.ha),!$e(ee.m,be,ae,U)){ee.a=3;break t}if(ee.xb=yh,G.width=be[0],G.height=ae[0],!zr(be[0],ae[0],1,ee,null))break t;return 1}return e(ee.a!=0),0}(c,b)){if(b=(h=eo(b.width,b.height,L.Oa,L.ba))==0){t:{b=c;n:for(;;){if(b==null){b=0;break t}if(e(b.s.yc!=null),e(b.s.Ya!=null),e(0<b.s.Wb),e((g=b.l)!=null),e((N=g.ma)!=null),b.xb!=0){if(b.ca=N.ba,b.tb=N.tb,e(b.ca!=null),!la(N.Oa,g,yl)){b.a=2;break n}if(!hs(b,g.width)||g.da)break n;if((g.da||wt(b.ca.S))&&X(),11>b.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),b.ca.f.kb.F!=null&&X()),b.Pb&&0<b.s.ua&&b.s.vb.X==null&&!Ge(b.s.vb,b.s.Wa.Xa)){b.a=1;break n}b.xb=0}if(!br(b,b.V,b.Ba,b.c,b.i,g.o,Bs))break n;N.Dc=b.Ma,b=1;break t}e(b.a!=0),b=0}b=!b}b&&(h=c.a)}else h=c.a}else{if((c=new jc)==null){L=1;break e}if(c.Fa=N.na,c.P=N.P,c.qc=N.Sa,Ya(c,b)){if((h=eo(b.width,b.height,L.Oa,L.ba))==0){if(c.Aa=0,g=L.Oa,e((N=c)!=null),g!=null){if(0<(P=0>(P=g.Md)?0:100<P?255:255*P/100)){for(T=H=0;4>T;++T)12>(Z=N.pb[T]).lc&&(Z.ia=P*$0[0>Z.lc?0:Z.lc]>>3),H|=Z.ia;H&&(alert("todo:VP8InitRandom"),N.ia=1)}N.Ga=g.Id,100<N.Ga?N.Ga=100:0>N.Ga&&(N.Ga=0)}qc(c,b)||(h=c.a)}}else h=c.a}h==0&&L.Oa!=null&&L.Oa.fd&&(h=ca(L.ba))}L=h}A=L!=0?null:11>A?M.f.RGBA.eb:M.f.kb.y}else A=null;return A};var Ah=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(E,ue){for(var le="",I=0;I<4;I++)le+=String.fromCharCode(E[ue++]);return le}function f(E,ue){return(E[ue+0]<<0|E[ue+1]<<8|E[ue+2]<<16)>>>0}function m(E,ue){return(E[ue+0]<<0|E[ue+1]<<8|E[ue+2]<<16|E[ue+3]<<24)>>>0}new l;var y=[0],d=[0],v=[],w=new l,S=n,x=function(E,ue){var le={},I=0,O=!1,j=0,R=0;if(le.frames=[],!function(F,q,W,K){for(var ne=0;ne<K;ne++)if(F[q+ne]!=W.charCodeAt(ne))return!0;return!1}(E,ue,"RIFF",4)){var oe,ie;for(m(E,ue+=4),ue+=8;ue<E.length;){var de=u(E,ue),te=m(E,ue+=4);ue+=4;var me=te+(1&te);switch(de){case"VP8 ":case"VP8L":le.frames[I]===void 0&&(le.frames[I]={}),(C=le.frames[I]).src_off=O?R:ue-8,C.src_size=j+te+8,I++,O&&(O=!1,j=0,R=0);break;case"VP8X":(C=le.header={}).feature_flags=E[ue];var pe=ue+4;C.canvas_width=1+f(E,pe),pe+=3,C.canvas_height=1+f(E,pe),pe+=3;break;case"ALPH":O=!0,j=me+8,R=ue-8;break;case"ANIM":(C=le.header).bgcolor=m(E,ue),pe=ue+4,C.loop_count=(oe=E)[(ie=pe)+0]<<0|oe[ie+1]<<8,pe+=2;break;case"ANMF":var Me,C;(C=le.frames[I]={}).offset_x=2*f(E,ue),ue+=3,C.offset_y=2*f(E,ue),ue+=3,C.width=1+f(E,ue),ue+=3,C.height=1+f(E,ue),ue+=3,C.duration=f(E,ue),ue+=3,Me=E[ue++],C.dispose=1&Me,C.blend=Me>>1&1}de!="ANMF"&&(ue+=me)}return le}}(S,0);x.response=S,x.rgbaoutput=!0,x.dataurl=!1;var _=x.header?x.header:null,B=x.frames?x.frames:null;if(_){_.loop_counter=_.loop_count,y=[_.canvas_height],d=[_.canvas_width];for(var $=0;$<B.length&&B[$].blend!=0;$++);}var Q=B[0],he=w.WebPDecodeRGBA(S,Q.src_off,Q.src_size,d,y);Q.rgba=he,Q.imgwidth=d[0],Q.imgheight=y[0];for(var Y=0;Y<d[0]*y[0]*4;Y++)v[Y]=he[Y];return this.width=d,this.height=y,this.data=v,this}(function(n){var e=function(){return typeof If=="function"},t=function(y,d,v,w){var S=4,x=o;switch(w){case n.image_compression.FAST:S=1,x=s;break;case n.image_compression.MEDIUM:S=6,x=a;break;case n.image_compression.SLOW:S=9,x=l}y=r(y,d,v,x);var _=If(y,{level:S});return n.__addimage__.arrayBufferToBinaryString(_)},r=function(y,d,v,w){for(var S,x,_,B=y.length/d,$=new Uint8Array(y.length+B),Q=f(),he=0;he<B;he+=1){if(_=he*d,S=y.subarray(_,_+d),w)$.set(w(S,v,x),_+he);else{for(var Y,E=Q.length,ue=[];Y<E;Y+=1)ue[Y]=Q[Y](S,v,x);var le=m(ue.concat());$.set(ue[le],_+he)}x=S}return $},i=function(y){var d=Array.apply([],y);return d.unshift(0),d},s=function(y,d){var v,w=[],S=y.length;w[0]=1;for(var x=0;x<S;x+=1)v=y[x-d]||0,w[x+1]=y[x]-v+256&255;return w},o=function(y,d,v){var w,S=[],x=y.length;S[0]=2;for(var _=0;_<x;_+=1)w=v&&v[_]||0,S[_+1]=y[_]-w+256&255;return S},a=function(y,d,v){var w,S,x=[],_=y.length;x[0]=3;for(var B=0;B<_;B+=1)w=y[B-d]||0,S=v&&v[B]||0,x[B+1]=y[B]+256-(w+S>>>1)&255;return x},l=function(y,d,v){var w,S,x,_,B=[],$=y.length;B[0]=4;for(var Q=0;Q<$;Q+=1)w=y[Q-d]||0,S=v&&v[Q]||0,x=v&&v[Q-d]||0,_=u(w,S,x),B[Q+1]=y[Q]-_+256&255;return B},u=function(y,d,v){if(y===d&&d===v)return y;var w=Math.abs(d-v),S=Math.abs(y-v),x=Math.abs(y+d-v-v);return w<=S&&w<=x?y:S<=x?d:v},f=function(){return[i,s,o,a,l]},m=function(y){var d=y.map(function(v){return v.reduce(function(w,S){return w+Math.abs(S)},0)});return d.indexOf(Math.min.apply(null,d))};n.processPNG=function(y,d,v,w){var S,x,_,B,$,Q,he,Y,E,ue,le,I,O,j,R,oe=this.decode.FLATE_DECODE,ie="";if(this.__addimage__.isArrayBuffer(y)&&(y=new Uint8Array(y)),this.__addimage__.isArrayBufferView(y)){if(y=(_=new jv(y)).imgData,x=_.bits,S=_.colorSpace,$=_.colors,[4,6].indexOf(_.colorType)!==-1){if(_.bits===8){E=(Y=_.pixelBitlength==32?new Uint32Array(_.decodePixels().buffer):_.pixelBitlength==16?new Uint16Array(_.decodePixels().buffer):new Uint8Array(_.decodePixels().buffer)).length,le=new Uint8Array(E*_.colors),ue=new Uint8Array(E);var de,te=_.pixelBitlength-_.bits;for(j=0,R=0;j<E;j++){for(O=Y[j],de=0;de<te;)le[R++]=O>>>de&255,de+=_.bits;ue[j]=O>>>de&255}}if(_.bits===16){E=(Y=new Uint32Array(_.decodePixels().buffer)).length,le=new Uint8Array(E*(32/_.pixelBitlength)*_.colors),ue=new Uint8Array(E*(32/_.pixelBitlength)),I=_.colors>1,j=0,R=0;for(var me=0;j<E;)O=Y[j++],le[R++]=O>>>0&255,I&&(le[R++]=O>>>16&255,O=Y[j++],le[R++]=O>>>0&255),ue[me++]=O>>>16&255;x=8}w!==n.image_compression.NONE&&e()?(y=t(le,_.width*_.colors,_.colors,w),he=t(ue,_.width,1,w)):(y=le,he=ue,oe=void 0)}if(_.colorType===3&&(S=this.color_spaces.INDEXED,Q=_.palette,_.transparency.indexed)){var pe=_.transparency.indexed,Me=0;for(j=0,E=pe.length;j<E;++j)Me+=pe[j];if((Me/=255)===E-1&&pe.indexOf(0)!==-1)B=[pe.indexOf(0)];else if(Me!==E){for(Y=_.decodePixels(),ue=new Uint8Array(Y.length),j=0,E=Y.length;j<E;j++)ue[j]=pe[Y[j]];he=t(ue,_.width,1)}}var C=function(F){var q;switch(F){case n.image_compression.FAST:q=11;break;case n.image_compression.MEDIUM:q=13;break;case n.image_compression.SLOW:q=14;break;default:q=12}return q}(w);return oe===this.decode.FLATE_DECODE&&(ie="/Predictor "+C+" "),ie+="/Colors "+$+" /BitsPerComponent "+x+" /Columns "+_.width,(this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),(he&&this.__addimage__.isArrayBuffer(he)||this.__addimage__.isArrayBufferView(he))&&(he=this.__addimage__.arrayBufferToBinaryString(he)),{alias:v,data:y,index:d,filter:oe,decodeParameters:ie,transparency:B,palette:Q,sMask:he,predictor:C,width:_.width,height:_.height,bitsPerComponent:x,colorSpace:S}}}})(Je.API),function(n){n.processGIF89A=function(e,t,r,i){var s=new qv(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:a},f=new rf(100).encode(u,100);return n.processJPEG.call(this,f,t,r,i)},n.processGIF87A=n.processGIF89A}(Je.API),Mr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Mr.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Ot.log("bit decode error:"+t)}},Mr.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}t!==0&&(this.pos+=4-t)}},Mr.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Mr.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Mr.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,f=r*this.width*4+4*i;this.data[f]=l,this.data[f+1]=a,this.data[f+2]=o,this.data[f+3]=u}this.pos+=n}},Mr.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&t)/t*255|0,u=(o>>11)/e*255|0,f=i*this.width*4+4*s;this.data[f]=u,this.data[f+1]=l,this.data[f+2]=a,this.data[f+3]=255}this.pos+=n}},Mr.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Mr.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Mr.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var s=new Mr(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new rf(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}}(Je.API),xp.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var s=new xp(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new rf(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}}(Je.API),Je.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,u=0;u<i;u+=4){var f=r[u],m=r[u+1],y=r[u+2],d=r[u+3];s[a++]=f,s[a++]=m,s[a++]=y,o[l++]=d}var v=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Je.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},go=Je.API,zl=go.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,f=u.fof?u.fof:1,m=e.doKerning!==!1,y=0,d=n.length,v=0,w=a[0]||l,S=[];for(t=0;t<d;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?S.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(y=m&&Lt(u[r])==="object"&&!isNaN(parseInt(u[r][v],10))?u[r][v]/f:0,S.push((a[r]||w)/l+y)),v=r;return S},yp=go.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return go.processArabic&&(n=go.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:zl.apply(this,arguments).reduce(function(s,o){return s+o},0)},bp=function(n,e,t,r){for(var i=[],s=0,o=n.length,a=0;s!==o&&a+e[s]<t;)a+=e[s],s++;i.push(n.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(n.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(n.slice(l,s)),i},vp=function(n,e,t){t||(t={});var r,i,s,o,a,l,u,f=[],m=[f],y=t.textIndent||0,d=0,v=0,w=n.split(" "),S=zl.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?w[0].length+2:t.lineIndent||0){var x=Array(l).join(" "),_=[];w.map(function($){($=$.split(/\s*\n/)).length>1?_=_.concat($.map(function(Q,he){return(he&&Q.length?`
`:"")+Q})):_.push($[0])}),w=_,l=yp.apply(this,[x,t])}for(s=0,o=w.length;s<o;s++){var B=0;if(r=w[s],l&&r[0]==`
`&&(r=r.substr(1),B=1),y+d+(v=(i=zl.apply(this,[r,t])).reduce(function($,Q){return $+Q},0))>e||B){if(v>e){for(a=bp.apply(this,[r,i,e-(y+d),e]),f.push(a.shift()),f=[a.pop()];a.length;)m.push([a.shift()]);v=i.slice(r.length-(f[0]?f[0].length:0)).reduce(function($,Q){return $+Q},0)}else f=[r];m.push(f),y=v+l,d=S}else f.push(r),y+=d+v,d=S}return u=l?function($,Q){return(Q?x:"")+$.join(" ")}:function($){return $.join(" ")},m.map(u)},go.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var m=this.internal.getFont(f.fontName,f.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat(vp.apply(this,[r[a],o,s]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(m){return"0x"+parseInt(m,10).toString(16)},o=n.__fontmetrics__.compress=function(m){var y,d,v,w,S=["{"];for(var x in m){if(y=m[x],isNaN(parseInt(x,10))?d="'"+x+"'":(x=parseInt(x,10),d=(d=s(x).slice(2)).slice(0,-1)+r[d.slice(-1)]),typeof y=="number")y<0?(v=s(y).slice(3),w="-"):(v=s(y).slice(2),w=""),v=w+v.slice(0,-1)+r[v.slice(-1)];else{if(Lt(y)!=="object")throw new Error("Don't know what to do with value type "+Lt(y)+".");v=o(y)}S.push(d+v)}return S.push("}"),S.join("")},a=n.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,d,v,w,S={},x=1,_=S,B=[],$="",Q="",he=m.length-1,Y=1;Y<he;Y+=1)(w=m[Y])=="'"?y?(v=y.join(""),y=void 0):y=[]:y?y.push(w):w=="{"?(B.push([_,v]),_={},v=void 0):w=="}"?((d=B.pop())[0][d[1]]=_,v=void 0,_=d[0]):w=="-"?x=-1:v===void 0?t.hasOwnProperty(w)?($+=t[w],v=parseInt($,16)*x,x=1,$=""):$+=w:t.hasOwnProperty(w)?(Q+=t[w],_[v]=parseInt(Q,16)*x,x=1,v=void 0,Q=""):Q+=w;return S},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},f={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(m){var y=m.font,d=f.Unicode[y.postScriptName];d&&(y.metadata.Unicode={},y.metadata.Unicode.widths=d.widths,y.metadata.Unicode.kerning=d.kerning);var v=u.Unicode[y.postScriptName];v&&(y.metadata.Unicode.encoding=v,y.encoding=v.codePages[0])}])}(Je.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Da(a)),o.metadata=n.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Je),function(n){function e(){return(Ke.canvg?Promise.resolve(Ke.canvg):Cf(()=>import("./index.es.cd540dcc.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Je.API.addSvgAsImage=function(t,r,i,s,o,a,l,u){if(isNaN(r)||isNaN(i))throw Ot.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Ot.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=o;var m=f.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,f.width,f.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return e().then(function(v){return v.fromString(m,t,y)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(y)}).then(function(){d.addImage(f.toDataURL("image/jpeg",1),r,i,s,o,l,u)})}}(),Je.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Je.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],u=0,f=0,m=0;function y(v,w){var S,x=!1;for(S=0;S<v.length;S+=1)v[S]===w&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var d=a.length;for(m=0;m<d;m+=1)t[a[m]].value=t[a[m]].defaultValue,t[a[m]].explicitSet=!1}if(Lt(n)==="object"){for(i in n)if(s=n[i],y(a,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&y(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(f=0;f<s[u].length;f+=1)typeof s[u][f]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,w=[];for(v in t)t[v].explicitSet===!0&&(t[v].type==="name"?w.push("/"+v+" /"+t[v].value):w.push("/"+v+" "+t[v].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Je.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],f=[""],m=0,y=s.length;m<y;++m){if(a=o.metadata.characterToGlyph(s.charCodeAt(m)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(m),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return f.join("");a=a.toString(16),f.push(u[4-a.length],a)}return f.join("")},r=function(s){var o,a,l,u,f,m,y;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],m=0,y=(a=Object.keys(s).sort(function(d,v){return d-v})).length;m<y;m++)o=a[m],l.length>=100&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,f=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var m=a.metadata.Unicode.widths,y=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),d="",v=0;v<y.length;v++)d+=String.fromCharCode(y[v]);var w=u();f({data:d,addLength1:!0,objectId:w}),l("endobj");var S=u();f({data:r(a.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var x=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+wo(a.fontName)),l("/FontFile2 "+w+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var _=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+wo(a.fontName)),l("/FontDescriptor "+x+" 0 R"),l("/W "+n.API.PDFObject.convert(m)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+S+" 0 R"),l("/BaseFont /"+wo(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+_+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,f=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var m=a.metadata.rawData,y="",d=0;d<m.length;d++)y+=String.fromCharCode(m[d]);var v=u();f({data:y,addLength1:!0,objectId:v}),l("endobj");var w=u();f({data:r(a.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var S=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+v+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+wo(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var x=0;x<a.metadata.hmtx.widths.length;x++)a.metadata.hmtx.widths[x]=parseInt(a.metadata.hmtx.widths[x]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+wo(a.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,u=s.y,f=s.options||{},m=s.mutex||{},y=m.pdfEscape,d=m.activeFontKey,v=m.fonts,w=d,S="",x=0,_="",B=v[w].encoding;if(v[w].encoding!=="Identity-H")return{text:a,x:l,y:u,options:f,mutex:m};for(_=a,w=d,Array.isArray(a)&&(_=a[0]),x=0;x<_.length;x+=1)v[w].metadata.hasOwnProperty("cmap")&&(o=v[w].metadata.cmap.unicode.codeMap[_[x].charCodeAt(0)]),o||_[x].charCodeAt(0)<256&&v[w].metadata.hasOwnProperty("Unicode")?S+=_[x]:S+="";var $="";return parseInt(w.slice(1))<14||B==="WinAnsiEncoding"?$=y(S,w).split("").map(function(Q){return Q.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&($=t(S,v[w])),m.isHex=!0,{text:$,x:l,y:u,options:f,mutex:m}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},l,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(Je),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Je.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,o,a,l,u,f,m=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,B=0;this.__bidiEngine__={};var $=function(I){var O=I.charCodeAt(),j=O>>8,R=w[j];return R!==void 0?m[256*R+(255&O)]:j===252||j===253?"AL":x.test(j)?"L":j===8?"R":"N"},Q=function(I){for(var O,j=0;j<I.length;j++){if((O=$(I.charAt(j)))==="L")return!1;if(O==="R")return!0}return!1},he=function(I,O,j,R){var oe,ie,de,te,me=O[R];switch(me){case"L":case"R":_=!1;break;case"N":case"AN":break;case"EN":_&&(me="AN");break;case"AL":_=!0,me="R";break;case"WS":me="N";break;case"CS":R<1||R+1>=O.length||(oe=j[R-1])!=="EN"&&oe!=="AN"||(ie=O[R+1])!=="EN"&&ie!=="AN"?me="N":_&&(ie="AN"),me=ie===oe?ie:"N";break;case"ES":me=(oe=R>0?j[R-1]:"B")==="EN"&&R+1<O.length&&O[R+1]==="EN"?"EN":"N";break;case"ET":if(R>0&&j[R-1]==="EN"){me="EN";break}if(_){me="N";break}for(de=R+1,te=O.length;de<te&&O[de]==="ET";)de++;me=de<te&&O[de]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(te=O.length,de=R+1;de<te&&O[de]==="NSM";)de++;if(de<te){var pe=I[R],Me=pe>=1425&&pe<=2303||pe===64286;if(oe=O[de],Me&&(oe==="R"||oe==="AL")){me="R";break}}}me=R<1||(oe=O[R-1])==="B"?"N":j[R-1];break;case"B":_=!1,i=!0,me=B;break;case"S":s=!0,me="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"BN":me="N"}return me},Y=function(I,O,j){var R=I.split("");return j&&E(R,j,{hiLevel:B}),R.reverse(),O&&O.reverse(),R.join("")},E=function(I,O,j){var R,oe,ie,de,te,me=-1,pe=I.length,Me=0,C=[],F=B?d:y,q=[];for(_=!1,i=!1,s=!1,oe=0;oe<pe;oe++)q[oe]=$(I[oe]);for(ie=0;ie<pe;ie++){if(te=Me,C[ie]=he(I,q,C,ie),R=240&(Me=F[te][v[C[ie]]]),Me&=15,O[ie]=de=F[Me][5],R>0)if(R===16){for(oe=me;oe<ie;oe++)O[oe]=1;me=-1}else me=-1;if(F[Me][6])me===-1&&(me=ie);else if(me>-1){for(oe=me;oe<ie;oe++)O[oe]=de;me=-1}q[ie]==="B"&&(O[ie]=0),j.hiLevel|=de}s&&function(W,K,ne){for(var re=0;re<ne;re++)if(W[re]==="S"){K[re]=B;for(var se=re-1;se>=0&&W[se]==="WS";se--)K[se]=B}}(q,O,pe)},ue=function(I,O,j,R,oe){if(!(oe.hiLevel<I)){if(I===1&&B===1&&!i)return O.reverse(),void(j&&j.reverse());for(var ie,de,te,me,pe=O.length,Me=0;Me<pe;){if(R[Me]>=I){for(te=Me+1;te<pe&&R[te]>=I;)te++;for(me=Me,de=te-1;me<de;me++,de--)ie=O[me],O[me]=O[de],O[de]=ie,j&&(ie=j[me],j[me]=j[de],j[de]=ie);Me=te}Me++}}},le=function(I,O,j){var R=I.split(""),oe={hiLevel:B};return j||(j=[]),E(R,j,oe),function(ie,de,te){if(te.hiLevel!==0&&f)for(var me,pe=0;pe<ie.length;pe++)de[pe]===1&&(me=S.indexOf(ie[pe]))>=0&&(ie[pe]=S[me+1])}(R,j,oe),ue(2,R,O,j,oe),ue(1,R,O,j,oe),R.join("")};return this.__bidiEngine__.doBidiReorder=function(I,O,j){if(function(oe,ie){if(ie)for(var de=0;de<oe.length;de++)ie[de]=de;a===void 0&&(a=Q(oe)),u===void 0&&(u=Q(oe))}(I,O),o||!l||u)if(o&&l&&a^u)B=a?1:0,I=Y(I,O,j);else if(!o&&l&&u)B=a?1:0,I=le(I,O,j),I=Y(I,O);else if(!o||a||l||u){if(o&&!l&&a^u)I=Y(I,O),a?(B=0,I=le(I,O,j)):(B=1,I=le(I,O,j),I=Y(I,O));else if(o&&a&&!l&&u)B=1,I=le(I,O,j),I=Y(I,O);else if(!o&&!l&&a^u){var R=f;a?(B=1,I=le(I,O,j),B=0,f=!1,I=le(I,O,j),f=R):(B=0,I=le(I,O,j),I=Y(I,O),B=1,f=!1,I=le(I,O,j),f=R,I=Y(I,O))}}else B=0,I=le(I,O,j);else B=a?1:0,I=le(I,O,j);return I},this.__bidiEngine__.setOptions=function(I){I&&(o=I.isInputVisual,l=I.isOutputVisual,a=I.isInputRtl,u=I.isOutputRtl,f=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([t.doBidiReorder(i[a])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Je),Je.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new ss(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new tw(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new zv(this.contents),this.head=new Hv(this),this.name=new Gv(this),this.cmap=new w0(this),this.toUnicode={},this.hhea=new Uv(this),this.maxp=new Kv(this),this.hmtx=new Yv(this),this.post=new $v(this),this.os2=new Wv(this),this.loca=new ew(this),this.glyf=new Xv(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,a,l,u;for(u=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}.call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(t=i>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Dr,ss=function(){function n(e){this.data=e!=null?e:[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,o,a,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),zv=function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,o,a,l,u,f,m,y,d,v,w;for(w in d=Object.keys(t).length,l=Math.log(2),m=16*Math.floor(Math.log(d)/l),o=Math.floor(m/l),f=16*d-m,(i=new ss).writeInt(this.scalarType),i.writeShort(d),i.writeShort(m),i.writeShort(o),i.writeShort(f),s=16*d,u=i.pos+s,a=null,v=[],t)for(y=t[w],i.writeString(w),i.writeInt(n(y)),i.writeInt(u),i.writeInt(y.length),v=v.concat(y),w==="head"&&(a=u),u+=y.length;u%4;)v.push(0),u++;return i.write(v),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,o;for(t=x0.call(t);t.length%4;)t.push(0);for(s=new ss(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),Vv={}.hasOwnProperty,ri=function(n,e){for(var t in e)Vv.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Dr=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var Hv=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ri(e,Dr),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new ss).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),Sp=function(){function n(e,t){var r,i,s,o,a,l,u,f,m,y,d,v,w,S,x,_,B;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),m=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(d=e.readUInt16(),y=d/2,e.pos+=6,s=function(){var $,Q;for(Q=[],l=$=0;0<=y?$<y:$>y;l=0<=y?++$:--$)Q.push(e.readUInt16());return Q}(),e.pos+=2,w=function(){var $,Q;for(Q=[],l=$=0;0<=y?$<y:$>y;l=0<=y?++$:--$)Q.push(e.readUInt16());return Q}(),u=function(){var $,Q;for(Q=[],l=$=0;0<=y?$<y:$>y;l=0<=y?++$:--$)Q.push(e.readUInt16());return Q}(),f=function(){var $,Q;for(Q=[],l=$=0;0<=y?$<y:$>y;l=0<=y?++$:--$)Q.push(e.readUInt16());return Q}(),i=(this.length-e.pos+this.offset)/2,a=function(){var $,Q;for(Q=[],l=$=0;0<=i?$<i:$>i;l=0<=i?++$:--$)Q.push(e.readUInt16());return Q}(),l=x=0,B=s.length;x<B;l=++x)for(S=s[l],r=_=v=w[l];v<=S?_<=S:_>=S;r=v<=S?++_:--_)f[l]===0?o=r+u[l]:(o=a[f[l]/2+(r-v)-(y-l)]||0)!==0&&(o+=u[l]),this.codeMap[r]=65535&o}e.pos=m}return n.encode=function(e,t){var r,i,s,o,a,l,u,f,m,y,d,v,w,S,x,_,B,$,Q,he,Y,E,ue,le,I,O,j,R,oe,ie,de,te,me,pe,Me,C,F,q,W,K,ne,re,se,ke,Ne,Te;switch(R=new ss,o=Object.keys(e).sort(function(Fe,Ge){return Fe-Ge}),t){case"macroman":for(w=0,S=function(){var Fe=[];for(v=0;v<256;++v)Fe.push(0);return Fe}(),_={0:0},s={},oe=0,me=o.length;oe<me;oe++)_[se=e[i=o[oe]]]==null&&(_[se]=++w),s[i]={old:e[i],new:_[e[i]]},S[i]=_[e[i]];return R.writeUInt16(1),R.writeUInt16(0),R.writeUInt32(12),R.writeUInt16(0),R.writeUInt16(262),R.writeUInt16(0),R.write(S),{charMap:s,subtable:R.data,maxGlyphID:w+1};case"unicode":for(O=[],m=[],B=0,_={},r={},x=u=null,ie=0,pe=o.length;ie<pe;ie++)_[Q=e[i=o[ie]]]==null&&(_[Q]=++B),r[i]={old:Q,new:_[Q]},a=_[Q]-i,x!=null&&a===u||(x&&m.push(x),O.push(i),u=a),x=i;for(x&&m.push(x),m.push(65535),O.push(65535),le=2*(ue=O.length),E=2*Math.pow(Math.log(ue)/Math.LN2,2),y=Math.log(E/2)/Math.LN2,Y=2*ue-E,l=[],he=[],d=[],v=de=0,Me=O.length;de<Me;v=++de){if(I=O[v],f=m[v],I===65535){l.push(0),he.push(0);break}if(I-(j=r[I].new)>=32768)for(l.push(0),he.push(2*(d.length+ue-v)),i=te=I;I<=f?te<=f:te>=f;i=I<=f?++te:--te)d.push(r[i].new);else l.push(j-I),he.push(0)}for(R.writeUInt16(3),R.writeUInt16(1),R.writeUInt32(12),R.writeUInt16(4),R.writeUInt16(16+8*ue+2*d.length),R.writeUInt16(0),R.writeUInt16(le),R.writeUInt16(E),R.writeUInt16(y),R.writeUInt16(Y),ne=0,C=m.length;ne<C;ne++)i=m[ne],R.writeUInt16(i);for(R.writeUInt16(0),re=0,F=O.length;re<F;re++)i=O[re],R.writeUInt16(i);for(ke=0,q=l.length;ke<q;ke++)a=l[ke],R.writeUInt16(a);for(Ne=0,W=he.length;Ne<W;Ne++)$=he[Ne],R.writeUInt16($);for(Te=0,K=d.length;Te<K;Te++)w=d[Te],R.writeUInt16(w);return{charMap:r,subtable:R.data,maxGlyphID:B+1}}},n}(),w0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ri(e,Dr),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new Sp(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=Sp.encode(t,r),(s=new ss).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),Uv=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ri(e,Dr),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),Wv=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ri(e,Dr),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),$v=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ri(e,Dr),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=function(){var a,l,u;for(u=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)u.push(t.readUInt32());return u}.call(this)}},e}(),Jv=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Gv=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ri(e,Dr),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,s,o,a,l,u,f,m,y,d;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(u={},o=m=0,y=i.length;m<y;o=++m)s=i[o],t.pos=s.offset,f=t.readString(s.length),a=new Jv(f,s),u[d=s.nameID]==null&&(u[d]=[]),u[s.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),Kv=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ri(e,Dr),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Yv=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ri(e,Dr),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,s,o,a,l,u;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,m;for(m=[],r=f=0;0<=s?f<s:f>s;r=0<=s?++f:--f)m.push(t.readInt16());return m}(),this.widths=function(){var f,m,y,d;for(d=[],f=0,m=(y=this.metrics).length;f<m;f++)o=y[f],d.push(o.advance);return d}.call(this),i=this.widths[this.widths.length-1],u=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),x0=[].slice,Xv=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ri(e,Dr),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,s,o,a,l,u,f,m,y;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(t),(s=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,a=(l=new ss(r.read(s))).readShort(),f=l.readShort(),y=l.readShort(),u=l.readShort(),m=l.readShort(),this.cache[t]=a===-1?new Zv(l,f,y,u,m):new Qv(l,a,f,y,u,m),this.cache[t]))},e.prototype.encode=function(t,r,i){var s,o,a,l,u;for(a=[],o=[],l=0,u=r.length;l<u;l++)s=t[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),Qv=function(){function n(e,t,r,i,s,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),Zv=function(){function n(e,t,r,i,s){var o,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new ss(x0.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),ew=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ri(e,Dr),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*t.readUInt16());return o}.call(this):function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(t.readUInt32());return o}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],u=this.offsets[a+1]-l;u>0&&(s+=u)}for(var f=new Array(4*i.length),m=0;m<i.length;++m)f[4*m+3]=255&i[m],f[4*m+2]=(65280&i[m])>>8,f[4*m+1]=(16711680&i[m])>>16,f[4*m]=(4278190080&i[m])>>24;return f},e}(),tw=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in l=this.glyphsFor(t))r=l[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,o,a,l,u,f,m,y,d,v,w,S,x;for(i in r=w0.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),d={0:0},x=r.charMap)d[(l=x[i]).old]=l.new;for(v in y=r.maxGlyphID,o)v in d||(d[v]=y++);return f=function(_){var B,$;for(B in $={},_)$[_[B]]=B;return $}(d),m=Object.keys(f).sort(function(_,B){return _-B}),w=function(){var _,B,$;for($=[],_=0,B=m.length;_<B;_++)a=m[_],$.push(f[a]);return $}(),s=this.font.glyf.encode(o,w,d),u=this.font.loca.encode(s.offsets,w),S={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},n}();Je.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,o;if(Array.isArray(t))return"["+function(){var a,l,u;for(u=[],a=0,l=t.length;a<l;a++)r=t[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)o=t[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+t},e}();function nw(n){let e,t,r,i,s,o,a,l;return s=new nv({}),{c(){e=He("button"),e.textContent="Back to editor",t=St(),r=He("button"),r.textContent="Generate PDF",i=St(),Qi(s.$$.fragment),Be(e,"class","svelte-ol5qnu"),Be(r,"class","svelte-ol5qnu")},m(u,f){pt(u,e,f),pt(u,t,f),pt(u,r,f),pt(u,i,f),bi(s,u,f),o=!0,a||(l=[Ut(e,"click",n[0]),Ut(r,"click",n[1])],a=!0)},p:In,i(u){o||(It(s.$$.fragment,u),o=!0)},o(u){en(s.$$.fragment,u),o=!1},d(u){u&&ht(e),u&&ht(t),u&&ht(r),u&&ht(i),vi(s,u),a=!1,ti(l)}}}function rw(n,e,t){let r;return ur(n,Mn,o=>t(2,r=o)),[()=>za.set("editor"),()=>{const o=new Je;o.setFontSize(16),o.text("Questions",10,10),o.setFontSize(10),r.questions.forEach((a,l)=>{let u=l%25;l!=0&&u==0&&o.addPage(),o.text(l+1+". "+a.query,10,(u+2)*10)}),o.addPage(),o.setFontSize(16),o.text("Answers",10,10),o.setFontSize(10),r.questions.forEach((a,l)=>{let u=l%25;l!=0&&u==0&&o.addPage(),o.text(l+1+". "+a.answer,10,(u+2)*10)}),o.save("quiz.pdf")}]}class iw extends Ni{constructor(e){super(),Si(this,e,rw,nw,ni,{})}}function Np(n,e,t){const r=n.slice();return r[7]=e[t],r[9]=t,r}function kp(n){let e,t=n[1],r=[];for(let i=0;i<t.length;i+=1)r[i]=Ap(Np(n,t,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=zo()},m(i,s){for(let o=0;o<r.length;o+=1)r[o].m(i,s);pt(i,e,s)},p(i,s){if(s&42){t=i[1];let o;for(o=0;o<t.length;o+=1){const a=Np(i,t,o);r[o]?r[o].p(a,s):(r[o]=Ap(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(i){bc(r,i),i&&ht(e)}}}function Ap(n){let e,t=n[7]+"",r,i,s,o;function a(){return n[6](n[7])}return{c(){e=He("button"),r=on(t),i=St(),Be(e,"class","quiz-card-choice-button color"+n[9]+" svelte-p8ker2"),e.disabled=n[3]},m(l,u){pt(l,e,u),Ie(e,r),Ie(e,i),s||(o=Ut(e,"click",a),s=!0)},p(l,u){n=l,u&2&&t!==(t=n[7]+"")&&hr(r,t),u&8&&(e.disabled=n[3])},d(l){l&&ht(e),s=!1,o()}}}function sw(n){let e,t,r,i,s,o,a,l,u,f,m,y=Array.isArray(n[1]),d,v=y&&kp(n);return{c(){e=He("div"),t=He("div"),r=He("p"),i=on(n[0]),s=St(),o=He("div"),a=He("p"),l=on(n[2]),f=St(),m=He("div"),v&&v.c(),Be(r,"class","svelte-p8ker2"),Be(t,"id","quiz-card-question-view"),Be(t,"class","p-container"),Be(a,"class","svelte-p8ker2"),Be(o,"id","quiz-card-answer-view"),Be(o,"class",u=(n[3]?"":"hidden")+" p-container svelte-p8ker2"),Be(m,"id","quiz-card-choices-view"),Be(m,"class","svelte-p8ker2"),Be(e,"id","quiz-card-main-view"),Be(e,"class",d=lr(n[4]?"correct":"wrong")+" svelte-p8ker2"),ec(e,"answered",n[3])},m(w,S){pt(w,e,S),Ie(e,t),Ie(t,r),Ie(r,i),Ie(e,s),Ie(e,o),Ie(o,a),Ie(a,l),Ie(e,f),Ie(e,m),v&&v.m(m,null)},p(w,[S]){S&1&&hr(i,w[0]),S&4&&hr(l,w[2]),S&8&&u!==(u=(w[3]?"":"hidden")+" p-container svelte-p8ker2")&&Be(o,"class",u),S&2&&(y=Array.isArray(w[1])),y?v?v.p(w,S):(v=kp(w),v.c(),v.m(m,null)):v&&(v.d(1),v=null),S&16&&d!==(d=lr(w[4]?"correct":"wrong")+" svelte-p8ker2")&&Be(e,"class",d),S&24&&ec(e,"answered",w[3])},i:In,o:In,d(w){w&&ht(e),v&&v.d()}}}function ow(n,e,t){let{query:r}=e,{choices:i}=e,{answer:s}=e,o=!1,a=!1,l=f=>{console.log("hi"),f===s&&t(4,a=!0),t(3,o=!0)};const u=f=>l(f);return n.$$set=f=>{"query"in f&&t(0,r=f.query),"choices"in f&&t(1,i=f.choices),"answer"in f&&t(2,s=f.answer)},[r,i,s,o,a,l,u]}class aw extends Ni{constructor(e){super(),Si(this,e,ow,sw,ni,{query:0,choices:1,answer:2})}}function Lp(n,e,t){const r=n.slice();return r[5]=e[t],r[7]=t,r}function Cp(n){let e,t,r=n[0].length>n[1]&&_p(n);return{c(){r&&r.c(),e=zo()},m(i,s){r&&r.m(i,s),pt(i,e,s),t=!0},p(i,s){i[0].length>i[1]?r?(r.p(i,s),s&3&&It(r,1)):(r=_p(i),r.c(),It(r,1),r.m(e.parentNode,e)):r&&(Vo(),en(r,1,1,()=>{r=null}),Ho())},i(i){t||(It(r),t=!0)},o(i){en(r),t=!1},d(i){r&&r.d(i),i&&ht(e)}}}function _p(n){let e,t,r,i,s=n[1]+1+"",o,a,l=n[0].length+"",u,f,m,y,d,v,w=n[0],S=[];for(let _=0;_<w.length;_+=1)S[_]=Mp(Lp(n,w,_));const x=_=>en(S[_],1,1,()=>{S[_]=null});return{c(){for(let _=0;_<S.length;_+=1)S[_].c();e=St(),t=He("div"),r=He("button"),r.textContent="<",i=St(),o=on(s),a=on(" / "),u=on(l),f=St(),m=He("button"),m.textContent=">",Be(t,"class","cards-view-bottom")},m(_,B){for(let $=0;$<S.length;$+=1)S[$].m(_,B);pt(_,e,B),pt(_,t,B),Ie(t,r),Ie(t,i),Ie(t,o),Ie(t,a),Ie(t,u),Ie(t,f),Ie(t,m),y=!0,d||(v=[Ut(r,"click",n[3]),Ut(m,"click",n[2])],d=!0)},p(_,B){if(B&3){w=_[0];let $;for($=0;$<w.length;$+=1){const Q=Lp(_,w,$);S[$]?(S[$].p(Q,B),It(S[$],1)):(S[$]=Mp(Q),S[$].c(),It(S[$],1),S[$].m(e.parentNode,e))}for(Vo(),$=w.length;$<S.length;$+=1)x($);Ho()}(!y||B&2)&&s!==(s=_[1]+1+"")&&hr(o,s),(!y||B&1)&&l!==(l=_[0].length+"")&&hr(u,l)},i(_){if(!y){for(let B=0;B<w.length;B+=1)It(S[B]);y=!0}},o(_){S=S.filter(Boolean);for(let B=0;B<S.length;B+=1)en(S[B]);y=!1},d(_){bc(S,_),_&&ht(e),_&&ht(t),d=!1,ti(v)}}}function Mp(n){let e,t,r,i;return t=new aw({props:{query:n[5].query,choices:n[5].choices,answer:n[5].answer}}),{c(){e=He("div"),Qi(t.$$.fragment),Be(e,"style",r=n[7]===n[1]?"display: block":"display: none")},m(s,o){pt(s,e,o),bi(t,e,null),i=!0},p(s,o){const a={};o&1&&(a.query=s[5].query),o&1&&(a.choices=s[5].choices),o&1&&(a.answer=s[5].answer),t.$set(a),(!i||o&2&&r!==(r=s[7]===s[1]?"display: block":"display: none"))&&Be(e,"style",r)},i(s){i||(It(t.$$.fragment,s),i=!0)},o(s){en(t.$$.fragment,s),i=!1},d(s){s&&ht(e),vi(t)}}}function lw(n){let e=Array.isArray(n[0]),t,r,i=e&&Cp(n);return{c(){i&&i.c(),t=zo()},m(s,o){i&&i.m(s,o),pt(s,t,o),r=!0},p(s,[o]){o&1&&(e=Array.isArray(s[0])),e?i?(i.p(s,o),o&1&&It(i,1)):(i=Cp(s),i.c(),It(i,1),i.m(t.parentNode,t)):i&&(Vo(),en(i,1,1,()=>{i=null}),Ho())},i(s){r||(It(i),r=!0)},o(s){en(i),r=!1},d(s){i&&i.d(s),s&&ht(t)}}}function cw(n,e,t){let r;ur(n,Gl,l=>t(1,r=l));let i=null;const s=Mn.subscribe(l=>{l!=null&&t(0,i=l.questions)});jf(()=>s());function o(){r<i.length-1&&Gl.set(r+1)}function a(){r>0&&Gl.set(r-1)}return[i,r,o,a]}class uw extends Ni{constructor(e){super(),Si(this,e,cw,lw,ni,{})}}function fw(n){let e,t,r,i,s,o,a;return i=new uw({}),{c(){e=He("div"),t=He("button"),t.textContent="End quiz",r=St(),Qi(i.$$.fragment),Be(t,"class","svelte-eubbsu")},m(l,u){pt(l,e,u),Ie(e,t),pt(l,r,u),bi(i,l,u),s=!0,o||(a=Ut(t,"click",n[0]),o=!0)},p:In,i(l){s||(It(i.$$.fragment,l),s=!0)},o(l){en(i.$$.fragment,l),s=!1},d(l){l&&ht(e),l&&ht(r),vi(i,l),o=!1,a()}}}function hw(n){return[()=>za.set("editor")]}class dw extends Ni{constructor(e){super(),Si(this,e,hw,fw,ni,{})}}function pw(n){let e,t,r,i,s,o,a,l,u,f,m,y,d,v,w;return s=new Yb({}),u=new iw({}),d=new dw({}),{c(){e=He("main"),t=He("div"),t.innerHTML='<div class="lds-dual-ring svelte-f7nwhb"></div>',r=St(),i=He("div"),Qi(s.$$.fragment),a=St(),l=He("div"),Qi(u.$$.fragment),m=St(),y=He("div"),Qi(d.$$.fragment),Be(t,"class","loading svelte-f7nwhb"),ec(t,"hidden",!n[1]),Be(i,"class",o=lr(n[0]==="editor"?"":"hidden")+" svelte-f7nwhb"),Be(l,"class",f=lr(n[0]==="flashCards"?"":"hidden")+" svelte-f7nwhb"),Be(y,"class",v=lr(n[0]==="quiz"?"":"hidden")+" svelte-f7nwhb")},m(S,x){pt(S,e,x),Ie(e,t),Ie(e,r),Ie(e,i),bi(s,i,null),Ie(e,a),Ie(e,l),bi(u,l,null),Ie(e,m),Ie(e,y),bi(d,y,null),w=!0},p(S,[x]){(!w||x&2)&&ec(t,"hidden",!S[1]),(!w||x&1&&o!==(o=lr(S[0]==="editor"?"":"hidden")+" svelte-f7nwhb"))&&Be(i,"class",o),(!w||x&1&&f!==(f=lr(S[0]==="flashCards"?"":"hidden")+" svelte-f7nwhb"))&&Be(l,"class",f),(!w||x&1&&v!==(v=lr(S[0]==="quiz"?"":"hidden")+" svelte-f7nwhb"))&&Be(y,"class",v)},i(S){w||(It(s.$$.fragment,S),It(u.$$.fragment,S),It(d.$$.fragment,S),w=!0)},o(S){en(s.$$.fragment,S),en(u.$$.fragment,S),en(d.$$.fragment,S),w=!1},d(S){S&&ht(e),vi(s),vi(u),vi(d)}}}function mw(n,e,t){let r,i;return ur(n,za,s=>t(0,r=s)),ur(n,Lf,s=>t(1,i=s)),console.log(r==="editor"),[r,i]}class gw extends Ni{constructor(e){super(),Si(this,e,mw,pw,ni,{})}}new gw({target:document.getElementById("app")});
